# 📡 Config Radar – מדריך פשוט להבנת מסך ההגדרות

## מה זה Config Radar ולמה צריך את זה?

דמיינו שיש לכם לוח בקרה במכונית שמראה לכם בזמן אמת את כל מה שקורה: מהירות, דלק, טמפרטורה. **Config Radar** עושה בדיוק את זה – אבל עבור ההגדרות של המערכת שלכם.

במקום לחפש בקבצים שונים ולנסות להבין מה מוגדר איפה, אפשר לראות הכל במקום אחד:
- ⏰ **מתי נשלחות התראות** ובאילו תנאים
- 🐛 **איך המערכת מזהה שגיאות** ומה היא עושה איתן
- 🖼️ **איך נראות התמונות** שנוצרות (גודל, סגנון, צבעים)

**למה זה חשוב?** כי ככה אפשר לוודא שהמערכת מתנהגת כמו שציפיתם, בלי הפתעות.

---

## איך להגיע למסך?

1. **היכנסו לאתר הניהול** (WebApp) עם משתמש שיש לו הרשאות ניהול
2. **לחצו על "הגדרות"** (`/settings`)
3. **תמצאו לשונית בשם "Config Radar"** – לחצו עליה

> 💡 רק מנהלי מערכת יכולים לראות את המסך הזה. אם לא רואים אותו, בדקו שיש לכם הרשאות מתאימות.

---

## שלוש הכרטיסיות במסך

המסך מחולק לשלוש כרטיסיות, כל אחת מתמקדת בנושא אחר:

### 🔔 כרטיסייה 1: סקירת התראות (Alerts Overview)

**מה זה בכלל?** המערכת יכולה לשלוח לכם התראות כשמשהו קורה – למשל כששגיאה מסוימת חוזרת על עצמה יותר מדי פעמים.

**מה רואים פה:**

| הגדרה | הסבר פשוט |
|--------|----------|
| **חלון זמן (Window Minutes)** | כמה דקות המערכת "זוכרת" שגיאות. למשל, אם מוגדר 60 דקות – המערכת סופרת כמה שגיאות קרו בשעה האחרונה |
| **סף מינימלי (Min Count)** | כמה פעמים צריכה לקרות שגיאה כדי לקבל התראה. אם מוגדר 3 – תקבלו התראה רק אחרי השגיאה השלישית |
| **זמן המתנה (Cooldown)** | אחרי שנשלחה התראה, כמה דקות לחכות לפני שאפשר לשלוח עוד אחת. מונע הצפה של הודעות |

**מה זה "Immediate"?** יש שגיאות כל כך קריטיות שלא רוצים לחכות – רוצים לדעת עליהן מיד. שגיאות שמסומנות כ-"immediate" יגרמו להתראה מיידית, בלי לחכות לסף.

---

### 🐛 כרטיסייה 2: חתימות שגיאה (Error Signatures)

**מה זה בכלל?** המערכת צריכה לדעת "מה נחשב שגיאה". חתימות שגיאה זה בעצם רשימה של דפוסים שהמערכת מחפשת בלוגים כדי לזהות בעיות.

**מה רואים פה:**

- **רשימת "רעש" (Noise Allowlist)** – שגיאות שהחלטנו להתעלם מהן כי הן לא באמת חשובות (למשל, הודעות מערכת רגילות שנראות כמו שגיאות)
- **קטגוריות** – השגיאות מחולקות לקבוצות (למשל: "בעיות רשת", "בעיות בסיס נתונים")
- **חומרה** – כמה רצינית כל שגיאה (קריטית, אזהרה, מידע)

**למה לשים לב:** אם רואים שגיאה מסומנת באדום או עם סימן אזהרה – זה אומר שיש בעיה בהגדרה עצמה (למשל, דפוס חיפוש שגוי). כדאי לתקן את זה.

---

### 🖼️ כרטיסייה 3: הגדרות תמונה (Image Settings)

**מה זה בכלל?** כשהמערכת יוצרת תמונות (למשל, צילומי מסך של קוד), יש הגדרות שקובעות איך הן ייראו.

**מה רואים פה:**

| הגדרה | הסבר פשוט |
|--------|----------|
| **ערכת נושא (Theme)** | בהיר או כהה – הרקע של התמונה |
| **סגנון (Style)** | איך הקוד מוצג (צבעים, הדגשות) |
| **רוחב** | כמה רחבה התמונה בפיקסלים |
| **גופן** | איזה פונט משמש לטקסט |
| **מגבלת שורות** | כמה שורות קוד מקסימום אפשר לכלול בתמונה אחת |

**למה זה חשוב?** אם יוצאות תמונות קטועות או עם סגנון לא נכון, פה תוכלו לראות מה ההגדרות הנוכחיות ולהבין למה.

---

## הכפתור "בדוק תקינות" (Validate Schema)

בראש המסך יש כפתור שבודק שכל ההגדרות תקינות. כשלוחצים עליו:

- ✅ **ירוק** = הכל בסדר, ההגדרות תקינות
- ❌ **אדום** = יש בעיה שצריך לתקן

**מה הוא בודק?**
- שכל הקבצים קיימים ונקראים נכון
- שאין שגיאות כתיב בשמות הגדרות
- שדפוסי החיפוש (Regex) תקינים
- שהערכים הגיוניים (למשל, שמספרים באמת מספרים)

---

## מידע על גרסאות (Git Info)

ליד כל קובץ הגדרות תוכלו לראות:
- **מתי השתנה לאחרונה** – תאריך ושעה
- **מי שינה** – שם המשתמש שביצע את השינוי האחרון
- **מה השתנה** – תיאור קצר של השינוי (מהקומיט)

**למה זה שימושי?** אם משהו פתאום לא עובד כמו שצריך, אפשר לראות מי שינה מה ומתי – וככה לחזור אחורה אם צריך.

---

## מתי כדאי להשתמש במסך הזה?

| מצב | מה לבדוק |
|-----|----------|
| **לפני העלאה לייצור** | שאין שגיאות באדום, שכל הולידציות עוברות |
| **משהו לא עובד** | מה ההגדרות הנוכחיות? אולי משהו השתנה לאחרונה? |
| **אחרי שינוי הגדרות** | לוודא שהשינוי נטען נכון ומופיע כמצופה |
| **חקירת בעיה** | האם קטגוריה מסוימת מוגדרת כ-immediate? מה המגבלות? |

---

## מידע טכני (למתקדמים)

<details>
<summary>לחצו כאן לפרטים טכניים על ה-API</summary>

המסך מושך את המידע מה-API הבא:

```
GET /api/config/radar
```

**התשובה כוללת:**
```json
{
  "ok": true,
  "checked_at": "2024-01-15T10:30:00Z",
  "alerts": { ... },
  "error_signatures": { ... },
  "image_settings": { ... },
  "validation": {
    "status": "ok",
    "issues": []
  }
}
```

- הגישה מוגבלת למשתמשים עם הרשאות ניהול
- זו קריאת קריאה בלבד (read-only) – אי אפשר לשנות הגדרות דרך ה-API הזה

</details>

---

## קישורים שימושיים

- 📊 [לוח הנראות (Observability Dashboard)](https://amirbiron.github.io/CodeBot/observability/observability_dashboard.html) – לראות איך הנתונים האלה משפיעים בפועל
- 📚 [תיעוד הפרויקט](https://amirbiron.github.io/CodeBot/) – מידע נוסף על המערכת

---

> 💬 **יש שאלות?** אל תהססו לפנות לצוות – עדיף לשאול מאשר לנחש!
