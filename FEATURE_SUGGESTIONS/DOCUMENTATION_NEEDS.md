# ğŸ“š ×¦×¨×›×™ ×ª×™×¢×•×“ - CodeBot & WebApp

> **××˜×¨×”:** ×œ×¡×›× ××” ×§×¨×™×˜×™ ×œ×”×•×¡×™×£ ×œ××ª×¨ ×”×ª×™×¢×•×“ ([https://amirbiron.github.io/CodeBot/](https://amirbiron.github.io/CodeBot/)) ×›×“×™ ×œ×¢×–×•×¨ ×œ××¤×ª×—×™× ×•×œ×¡×•×›× ×™ AI ×‘×¢×‘×•×“×” ×¢×œ ×”×¨×™×¤×•.

**×ª××¨×™×š ×™×¦×™×¨×”:** 2025-10-10  
**×¡×˜×˜×•×¡:** ×××ª×™×Ÿ ×œ××™××•×©

---

## ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

- [×—×¡×¨×™× ×§×¨×™×˜×™×™× (×¢×“×™×¤×•×ª ×’×‘×•×”×”)](#-×—×¡×¨×™×-×§×¨×™×˜×™×™×-×¢×“×™×¤×•×ª-×’×‘×•×”×”)
- [×—×¡×¨×™× ×—×©×•×‘×™× (×¢×“×™×¤×•×ª ×‘×™× ×•× ×™×ª)](#-×—×¡×¨×™×-×—×©×•×‘×™×-×¢×“×™×¤×•×ª-×‘×™× ×•× ×™×ª)
- [×¨×¦×•×™ ×œ×”×•×¡×™×£ (×¢×“×™×¤×•×ª × ××•×›×”)](#-×¨×¦×•×™-×œ×”×•×¡×™×£-×¢×“×™×¤×•×ª-× ××•×›×”)
- [×”××œ×¦×•×ª ×™×™×©×•× ××™×™×“×™×•×ª](#-×”××œ×¦×•×ª-×™×™×©×•×-××™×™×“×™×•×ª)
- [×˜×™×¤ ×—×©×•×‘ ×œ×¡×•×›× ×™ AI](#-×˜×™×¤-×—×©×•×‘-×œ×¡×•×›× ×™-ai)

---

## âš ï¸ ×—×¡×¨×™× ×§×¨×™×˜×™×™× (×¢×“×™×¤×•×ª ×’×‘×•×”×”)

### 1. ğŸš€ Quickstart ×›×¤×•×œ - ××¤×ª×—×™× ×•×¡×•×›× ×™ AI (×—×“×©!)

**×œ××” ×–×” ×§×¨×™×˜×™:**
- **× ×§×•×“×ª ×›× ×™×¡×” ××”×™×¨×”** - ×¦×¨×™×š ×œ×–×¨×– ××ª ×”×”×ª×—×œ×”
- **×©× ×™ ×§×”×œ×™ ×™×¢×“ ×©×•× ×™×** - ××¤×ª×—×™× ×× ×•×©×™×™× vs. ×¡×•×›× ×™ AI
- ×¦×¨×™×š ×œ×”×™×•×ª ×¢××•×“ ×¨××©×•×Ÿ ×©×›×•×œ× ×¨×•××™×

#### ×. Quickstart ×œ××¤×ª×—×™× (3 ×¦×¢×“×™×)

```markdown
# ğŸš€ ×”×ª×—×œ×” ××”×™×¨×” - ××¤×ª×—×™×

## ×©×œ×‘ 1: ×”×ª×§× ×”
```bash
git clone https://github.com/amirbiron/CodeBot.git
cd CodeBot
pip install -r requirements.txt
```

## ×©×œ×‘ 2: ×”×’×“×¨×ª .env
```bash
cp .env.example .env
# ×¢×¨×•×š .env ×•×”×•×¡×£:
# - BOT_TOKEN (×-BotFather)
# - MONGODB_URL (××§×•××™ ××• Atlas)
```

## ×©×œ×‘ 3: ×”×¨×¦×”
```bash
# ×”×¨×¦×ª ×”×‘×•×˜
python main.py

# ×”×¨×¦×ª WebApp (×‘×˜×¨××™× ×œ × ×¤×¨×“)
cd webapp && python app.py
```

## âœ… ××” ×”×œ××”?
- [××¨×›×™×˜×§×˜×•×¨×”](architecture.html) - ×”×‘×Ÿ ××ª ×”××¢×¨×›×ª
- [×ª×¨×•××”](contributing.html) - ×›×ª×•×‘ ×§×•×“
- [×˜×¡×˜×™×](testing.html) - ×”×¨×¥ ×‘×“×™×§×•×ª
```

#### ×‘. Quickstart ×œ×¡×•×›× ×™ AI (×§×¨×™×˜×™!)

**××” ×œ×”×•×¡×™×£:**

```markdown
# ğŸ¤– ×”×ª×—×œ×” ××”×™×¨×” - ×¡×•×›× ×™ AI

×‘×¨×•×š ×”×‘×! ××ª×” ×¢×•×‘×“ ×¢×œ CodeBot - ×‘×•×˜ Telegram ×œ× ×™×”×•×œ ×§×•×“.

## ğŸ¯ ×¢×§×¨×•× ×•×ª ×¢×‘×•×“×” ×§×¨×™×˜×™×™×

### âŒ ××” ××¡×•×¨ ×œ×¢×©×•×ª
- **×œ×œ× sudo** - ××£ ×¤×¢×
- **×œ×œ× ×ª×”×œ×™×›×™× ××¨×•×›×™-×—×™×™×** - ×œ× `npm run dev`, `watch`, background processes
- **×œ×œ× ×¤×§×•×“×•×ª ××™× ×˜×¨××§×˜×™×‘×™×•×ª** - ×œ× `git rebase -i`, `git add -i`
- **×œ×œ× ×©×™× ×•×™ git config** - ××£ ×¤×¢×
- **×œ×œ× ×“×—×™×¤×” ×œremote** - ××œ× ×× ×”×ª×‘×§×©×ª ××¤×•×¨×©×•×ª

### âœ… ××” ××•×ª×¨ ×•××•××œ×¥
- **×›×œ×™ ×§×¨×™××” ×××•×©×¨×™×:** Read, LS, Grep, Glob
- **×œ×œ× grep/find/cat ×’×•×œ××™** - ×”×©×ª××© ×‘×›×œ×™× ×”××•×‘× ×™×
- **×¢×‘×•×“×” ×‘× ×ª×™×‘×™× ××•×—×œ×˜×™×** - ×ª××™×“
- **IO ×¨×§ ×‘-/tmp** - ×‘×˜×¡×˜×™× ×•×‘×¤×™×ª×•×—
- **×¢×¨×™×›×•×ª × ×§×•×“×ª×™×•×ª** - ×©××•×¨ ×¡×’× ×•×Ÿ ×§×™×™×

## ğŸ“ ×¤×•×¨××˜×™ ×¦×™×˜×•×˜ ×§×•×“

### ×§×•×“ ×§×™×™× - ×”×©×ª××© ×‘-CODE REFERENCE:
\`\`\`12:15:app/components/Todo.tsx
export const Todo = () => {
  return <div>Todo</div>;
};
\`\`\`

### ×§×•×“ ×—×“×©/××•×¦×¢ - Markdown code block ×¨×’×™×œ:
\`\`\`bash
gh pr create --title "feat: add X" --body "Why and test plan"
\`\`\`

## ğŸ”§ ×¢×‘×•×“×” ×¢× ×§×‘×¦×™×

### ×§×¨×™××”
\`\`\`python
# âœ… × ×›×•×Ÿ
Read("path/to/file.py")

# âŒ ×œ× × ×›×•×Ÿ
cat path/to/file.py
\`\`\`

### ×—×™×¤×•×©
\`\`\`python
# âœ… × ×›×•×Ÿ
Grep(pattern="function.*hello", type="py")

# âŒ ×œ× × ×›×•×Ÿ
grep -r "function.*hello" .
\`\`\`

### ××—×™×§×” ×‘×˜×•×—×” (×¨×§ ×‘-tmp!)
\`\`\`python
from pathlib import Path
import shutil

def safe_rmtree(path: Path, allow_under: Path) -> None:
    p = path.resolve()
    base = allow_under.resolve()
    if not str(p).startswith(str(base)) or p in (Path('/'), base.parent, Path.cwd()):
        raise RuntimeError(f"Refusing to delete unsafe path: {p}")
    shutil.rmtree(p)

# ×©×™××•×©:
safe_rmtree(Path("/tmp/test"), allow_under=Path("/tmp"))
\`\`\`

## ğŸ« ×§×•××™×˜×™× ×•-PR

### ×¤×•×¨××˜ ×§×•××™×˜ (HEREDOC)
\`\`\`bash
git commit -m "$(cat <<'EOF'
feat: add user authentication

- Implement JWT tokens
- Add login/logout endpoints
- Update tests

EOF
)"
\`\`\`

### ×œ×¤× ×™ ×§×•××™×˜ - ×‘×“×•×§:
- [ ] ××™×Ÿ ×¡×•×“×•×ª/×˜×•×§× ×™× ×‘×§×•×“
- [ ] ××™×Ÿ PII ×‘×œ×•×’×™×
- [ ] Conventional Commit format
- [ ] ×˜×¡×˜×™× ×¢×•×‘×¨×™×

### ×¦'×§×œ×™×¡×˜ PR:
- [ ] What/Why/Tests ××¤×•×¨×˜
- [ ] ×§×™×©×•×¨ ×œ-[CodeBot Docs](https://amirbiron.github.io/CodeBot/)
- [ ] ×ª×›× ×™×ª Rollback
- [ ] CI ×™×¨×•×§ (3 ×¡×˜×˜×•×¡×™×)

## ğŸ§ª ×˜×¡×˜×™×

### ×”×¨×¦×”
\`\`\`bash
# ×›×œ ×”×˜×¡×˜×™×
pytest

# ×¡×¤×¦×™×¤×™
pytest tests/test_bot_handlers.py -v

# ×¢× coverage
pytest --cov=. --cov-report=html
\`\`\`

### ×¢×‘×•×“×” ×‘-tmp ×‘×œ×‘×“
\`\`\`python
def test_file_operations(tmp_path):
    # âœ… × ×›×•×Ÿ - ×¢×•×‘×“ ×‘-tmp_path
    test_file = tmp_path / "test.py"
    test_file.write_text("print('hello')")
    
    # âŒ ×œ× × ×›×•×Ÿ - ×¢×•×‘×“ ×‘root
    # Path("test.py").write_text("print('hello')")
\`\`\`

## ğŸ“Š CI - ×¡×˜×˜×•×¡×™× × ×“×¨×©×™×

×—×™×™×‘×™× ×œ×¢×‘×•×¨:
- âœ… ğŸ” Code Quality & Security
- âœ… Unit Tests (3.11)
- âœ… Unit Tests (3.12)

## ğŸ—ºï¸ × ×™×•×•×˜ ×‘××¢×¨×›×ª

\`\`\`
handlers/        â†’ Telegram handlers
services/        â†’ Business logic
database/        â†’ MongoDB models
webapp/          â†’ Flask web app
tests/          â†’ All tests
\`\`\`

## ğŸ“š ×§×™×©×•×¨×™× ×—×©×•×‘×™×

- [××¨×›×™×˜×§×˜×•×¨×”](architecture.html) - ××¤×ª ×”××¢×¨×›×ª
- [Database Schema](database-schema.html) - ××‘× ×” × ×ª×•× ×™×
- [×”× ×—×™×•×ª ××œ××•×ª](ai-guidelines.html) - ×›×œ×œ×™× ××¤×•×¨×˜×™×
- [××“×™× ×™×•×ª](https://amirbiron.github.io/CodeBot/) - Project Docs
```

**××™×§×•× ××•×¦×¢:** 
- `docs/quickstart.rst` (×œ××¤×ª×—×™×)
- `docs/quickstart-ai.rst` (×œ×¡×•×›× ×™ AI)
- **×œ×©×™× ×§×™×©×•×¨×™× ×‘×•×œ×˜×™× ×œ-2 ×”×“×¤×™× ×”××œ×” ×‘×¨××© `docs/index.rst`**

---

### 2. ğŸ¤– ×¢××•×“ "×”× ×—×™×•×ª ×œ×¡×•×›× ×™ AI" ××¤×•×¨×˜ (×—×“×© - ×§×¨×™×˜×™!)

**×œ××” ×–×” ×§×¨×™×˜×™:**
- **×¡×•×›× ×™ AI ×¦×¨×™×›×™× ×›×œ×œ×™× ×‘×¨×•×¨×™×** - ××—×¨×ª ×”× ×¢×œ×•×œ×™× ×œ×¤×’×•×¢
- **×× ×™×¢×ª ×ª×§×œ×•×ª** - ×©×’×™××•×ª × ×¤×•×¦×•×ª ×©×¡×•×›× ×™× ×¢×•×©×™×
- **××›×™×¤×”** - ××” ××•×ª×¨ ×•××” ××¡×•×¨

**××” ×œ×”×•×¡×™×£:**

```markdown
# ğŸ¤– ×”× ×—×™×•×ª ×œ×¡×•×›× ×™ AI - ××“×¨×™×š ××œ×

## ğŸš¨ ××’×‘×œ×•×ª ×§×¨×™×˜×™×•×ª

### ×”×¨×¦×ª ×¤×§×•×“×•×ª

**××¡×•×¨ ×‘×”×—×œ×˜:**
```bash
# âŒ sudo - ××£ ×¤×¢×
sudo apt install something

# âŒ ×ª×”×œ×™×›×™× ××¨×•×›×™-×—×™×™×
npm run dev
python manage.py runserver
watch -n 1 "pytest"

# âŒ ×¤×§×•×“×•×ª ××™× ×˜×¨××§×˜×™×‘×™×•×ª
git rebase -i
git add -i
nano file.txt

# âŒ ×©×™× ×•×™ git config
git config user.email "..."
git config --global ...

# âŒ ×¤×¢×•×œ×•×ª git ××¡×•×›× ×•×ª (××œ× ×× × ×ª×‘×§×© ××¤×•×¨×©×•×ª)
git push
git push --force
git clean -fdx
git reset --hard
```

**××•×ª×¨ ×•××•××œ×¥:**
```bash
# âœ… ×˜×¡×˜×™×
pytest
pytest tests/test_file.py -v

# âœ… linting
black --check .
mypy .

# âœ… ×‘×“×™×§×•×ª
python -c "import sys; print(sys.version)"
```

---

### ×›×œ×™ ×§×‘×¦×™× ×××•×©×¨×™×

**×”×©×ª××© ×‘×›×œ×™× ×”××•×‘× ×™×:**
```python
# âœ… ×§×¨×™××”
Read(path="file.py")

# âœ… ×¨×©×™××ª ×§×‘×¦×™×
LS(target_directory=".")

# âœ… ×—×™×¤×•×© ×‘×§×‘×¦×™×
Grep(pattern="def.*hello", type="py")

# âœ… ××¦×™××ª ×§×‘×¦×™×
Glob(glob_pattern="*.py")
```

**××œ ×ª×©×ª××© ×‘×¤×§×•×“×•×ª ×’×•×œ××™×•×ª:**
```bash
# âŒ ××œ ×ª×©×ª××©
cat file.py
ls -la
find . -name "*.py"
grep -r "pattern" .
head -n 10 file.py
tail -f log.txt
```

---

## ğŸ“ ×¢×¨×™×›×ª ×§×•×“

### ×¢×§×¨×•× ×•×ª

1. **×¢×¨×™×›×•×ª × ×§×•×“×ª×™×•×ª** - ×©× ×” ×¨×§ ××” ×©×¦×¨×™×š
2. **×©××•×¨ ×¡×’× ×•×Ÿ** - ×”×¡×ª×›×œ ×¢×œ ×”×§×•×“ ×”×§×™×™× ×•×”××©×š ××ª ××•×ª×• ×¡×’× ×•×Ÿ
3. **×œ×œ× ×”×¢×¨×•×ª ××™×•×ª×¨×•×ª** - ××œ ×ª×•×¡×™×£ `# TODO: implement later`
4. **guard clauses** - ××•×ª×¨ ×œ×”×¢×“×™×£ ×¢×œ ×¤× ×™ if-else ××§×•× × ×™×
5. **×œ×œ× try/except ××™×•×ª×¨** - ×¨×§ ×× ×‘×××ª ×¦×¨×™×š ×œ×˜×¤×œ ×‘×©×’×™××”

### ×“×•×’××” - ×¢×¨×™×›×” ×˜×•×‘×”

**×œ×¤× ×™:**
```python
def process_file(filename):
    data = read_file(filename)
    result = process_data(data)
    return result
```

**×¢×¨×™×›×” ×˜×•×‘×”:**
```python
def process_file(filename):
    """Process a file and return results.
    
    Args:
        filename: Path to file
        
    Returns:
        Processed data
    """
    data = read_file(filename)
    result = process_data(data)
    return result
```

**×¢×¨×™×›×” ×¨×¢×”:**
```python
def process_file(filename):
    # TODO: add validation
    # TODO: add error handling
    # FIXME: this is slow
    try:  # ××™×•×ª×¨!
        data = read_file(filename)  # ×§×•×¨××™× ××ª ×”×§×•×‘×¥
        result = process_data(data)  # ××¢×‘×“×™× ××ª ×”×“××˜×”
        return result  # ××—×–×™×¨×™× ×ª×•×¦××”
    except Exception as e:
        # TODO: handle this better
        raise  # ×œ××” try/except ×× ×¨×§ raise?
```

---

## ğŸ« ×§×•××™×˜×™× ×•-Pull Requests

### ×¤×•×¨××˜ ×§×•××™×˜

**×ª××™×“ ×”×©×ª××© ×‘-HEREDOC:**
```bash
git commit -m "$(cat <<'EOF'
feat: add user authentication

- Implement JWT token generation
- Add login/logout endpoints  
- Update database schema
- Add integration tests

Related: #123
EOF
)"
```

**××œ ×ª×©×ª××©:**
```bash
# âŒ ×¨×¢ - ×‘×¢×™×•×ª ×¢× ×©×•×¨×•×ª ×—×“×©×•×ª
git commit -m "feat: add user authentication
- Implement JWT tokens
- Add endpoints"
```

### Conventional Commits

| Type | ×ª×™××•×¨ | ×“×•×’××” |
|------|--------|--------|
| `feat` | ×¤×™×¦'×¨ ×—×“×© | `feat: add bookmarks feature` |
| `fix` | ×ª×™×§×•×Ÿ ×‘××’ | `fix: resolve memory leak in cache` |
| `docs` | ×ª×™×¢×•×“ | `docs: update API reference` |
| `test` | ×˜×¡×˜×™× | `test: add tests for auth flow` |
| `refactor` | ×¨×¤×§×˜×•×¨ | `refactor: simplify error handling` |
| `chore` | ×ª×—×–×•×§×” | `chore: update dependencies` |
| `perf` | ×‘×™×¦×•×¢×™× | `perf: optimize database queries` |

### ×œ×¤× ×™ ×§×•××™×˜ - checklist

```bash
# ×‘×“×•×§ ×¡×•×“×•×ª
git diff | grep -i "token\|password\|secret\|api_key"

# ×‘×“×•×§ PII
git diff | grep -i "email\|phone\|address"

# ×”×¨×¥ ×˜×¡×˜×™×
pytest

# ×‘×“×•×§ linting
black --check .
```

### ×ª×‘× ×™×ª PR

```markdown
## What
×ª×™××•×¨ ×§×¦×¨ ×©×œ ×”×©×™× ×•×™

## Why
×œ××” ×¦×¨×™×š ××ª ×–×”?

## Tests
- [ ] Unit tests ×¢×•×‘×¨×™×
- [ ] Integration tests ×¢×•×‘×¨×™×
- [ ] ×‘×“×§×ª×™ ×™×“× ×™×ª

## Rollback Plan
××™×š ×œ×—×–×•×¨ ××—×•×¨×” ×× ××©×”×• × ×©×‘×¨?

## Docs
- [ ] ×¢×“×›× ×ª×™ ×ª×™×¢×•×“
- [ ] ×§×¨××ª×™ ××ª [CodeBot Docs](https://amirbiron.github.io/CodeBot/)
```

---

## ğŸ“Š ×¤×•×¨××˜×™ ×¦×™×˜×•×˜ ×§×•×“

### ×§×•×“ ×§×™×™× ×‘××¢×¨×›×ª

×”×©×ª××© ×‘-**CODE REFERENCE** ×¢× ××¡×¤×¨×™ ×©×•×¨×•×ª:

\`\`\`12:15:app/components/Todo.tsx
export const Todo = () => {
  return <div>Todo</div>;
};
\`\`\`

**×¤×•×¨××˜:** \`\`\`startLine:endLine:filepath

### ×§×•×“ ×—×“×©/××•×¦×¢

×”×©×ª××© ×‘-Markdown code block ×¨×’×™×œ:

\`\`\`python
def new_function():
    """New function to implement."""
    pass
\`\`\`

---

## ğŸ§ª ×¢×‘×•×“×” ×¢× ×˜×¡×˜×™×

### ×¢×‘×•×“×” ×¨×§ ×‘-tmp

**×—×•×‘×”:**
```python
import pytest
from pathlib import Path

def test_file_operations(tmp_path):
    # âœ… × ×›×•×Ÿ - ×›×œ IO ×‘-tmp_path
    test_file = tmp_path / "test.py"
    test_file.write_text("code")
    
    result = process_file(test_file)
    
    assert result == expected
```

**××¡×•×¨:**
```python
def test_file_operations():
    # âŒ ×œ× × ×›×•×Ÿ - ×™×•×¦×¨ ×§×‘×¦×™× ×‘root!
    Path("test.py").write_text("code")
    result = process_file("test.py")
    Path("test.py").unlink()  # ××¡×•×›×Ÿ!
```

### ××—×™×§×” ×‘×˜×•×—×”

```python
from pathlib import Path
import shutil

def safe_rmtree(path: Path, allow_under: Path) -> None:
    """Delete directory safely - only under allowed path."""
    p = path.resolve()
    base = allow_under.resolve()
    
    # Block dangerous paths
    dangerous = [Path('/'), base.parent, Path.cwd()]
    if p in dangerous:
        raise RuntimeError(f"Refusing to delete: {p}")
    
    # Block paths outside allowlist
    if not str(p).startswith(str(base)):
        raise RuntimeError(f"Path {p} not under {base}")
    
    shutil.rmtree(p)

# ×©×™××•×©
safe_rmtree(Path("/tmp/test-data"), allow_under=Path("/tmp"))
```

---

## ğŸš« ××“×™× ×™×•×ª CI

### ×—×•×§×™× ×§×©×™×—×™×

1. **××™×Ÿ git clean/reset ×‘-CI** - ××¡×•×›×Ÿ ×œ××¢×¨×›×ª
2. **×¢×‘×•×“×” ×¨×§ ×¢×œ tmp** - ×œ× ×‘-workspace
3. **××™×Ÿ sudo ×‘-CI** - ××£ ×¤×¢×
4. **×‘×™×“×•×“ ×˜×¡×˜×™×** - ×›×œ ×˜×¡×˜ ×‘-tmp_path × ×¤×¨×“

### ×¡×˜×˜×•×¡×™× × ×“×¨×©×™×

×—×™×™×‘ ×œ×¢×‘×•×¨ **×‘×“×™×•×§ 3**:
- âœ… ğŸ” Code Quality & Security
- âœ… Unit Tests (3.11)
- âœ… Unit Tests (3.12)

×× ××—×“ × ×›×©×œ - **×”-PR ×œ× ×™×¢×‘×•×¨**.

---

## ğŸ“± Telegram Bot - ×ª×§×œ×•×ª × ×¤×•×¦×•×ª

### "Message is not modified"

**×”×‘×¢×™×”:** × ×™×¡×™×•×Ÿ ×œ×¢×¨×•×š ×”×•×“×¢×” ×¢× ××•×ª×• ×ª×•×›×Ÿ

**×”×¤×ª×¨×•×Ÿ:**
```python
import telegram.error

async def safe_edit(query, text, reply_markup=None, parse_mode=None):
    """Edit message safely - ignore 'not modified' error."""
    try:
        await query.edit_message_text(
            text=text,
            reply_markup=reply_markup,
            parse_mode=parse_mode
        )
    except telegram.error.BadRequest as e:
        if "message is not modified" in str(e).lower():
            return  # Ignore - message unchanged
        raise  # Re-raise other errors
```

**×—×•×‘×” ×œ×¤× ×™ ×¢×¨×™×›×”:**
```python
await query.answer()  # ×ª××™×“ ×§×•×“×!
await safe_edit(query, text, markup)
```

---

## ğŸ”’ ×¡×•×“×•×ª ×•×¤×¨×˜×™×•×ª

### ××œ ×ª×¨×©×•× ×‘×œ×•×’×™×

```python
# âŒ ×¨×¢
logger.info(f"User token: {token}")
logger.debug(f"Password: {password}")
logger.info(f"Email: {user.email}")

# âœ… ×˜×•×‘
logger.info("User authenticated")
logger.debug("Credentials validated")
logger.info(f"User ID: {user.id}")
```

### ××œ ×ª×§×•××™×˜

```python
# âŒ ××œ ×ª×§×•××™×˜
BOT_TOKEN = "123456:ABC-DEF..."
API_KEY = "sk-proj-..."
PASSWORD = "mypassword"

# âœ… ×ª××™×“ ×-ENV
BOT_TOKEN = os.getenv("BOT_TOKEN")
API_KEY = os.getenv("API_KEY")
PASSWORD = os.getenv("PASSWORD")
```

---

## ğŸ“š ×§×™×©×•×¨×™× ××”×™×¨×™×

- [Quickstart ×œ××¤×ª×—×™×](quickstart.html)
- [××¨×›×™×˜×§×˜×•×¨×”](architecture.html)
- [Database Schema](database-schema.html)
- [Contributing](contributing.html)
- [Testing](testing.html)
- [××“×™× ×™×•×ª ××œ××”](https://amirbiron.github.io/CodeBot/)
```

**××™×§×•× ××•×¦×¢:** `docs/ai-guidelines.rst`

---

### 3. ğŸ¤ ××“×¨×™×š ×ª×¨×•××” ×œ××¤×ª×—×™× (CONTRIBUTING.md)

**×œ××” ×–×” ×—×©×•×‘:**
- ×¡×•×›× ×™ AI ×¦×¨×™×›×™× ×œ×”×‘×™×Ÿ ××ª ×ª×”×œ×™×š ×”×¤×™×ª×•×—
- ××¤×ª×—×™× ×—×“×©×™× ×¦×¨×™×›×™× × ×§×•×“×ª ×›× ×™×¡×” ×‘×¨×•×¨×”
- ×ª×§× ×™× ×¢×§×‘×™×™× ×œ×§×•×“

**××” ×œ×”×•×¡×™×£:**
- âœ… ×›×œ×œ×™ ×§×•×“ (code style, PEP 8, type hints)
- âœ… **×¡×’× ×•×Ÿ ×§×•×“:** ×¢×§×¨×•× ×•×ª ×©××•×ª, ××‘× ×™ ×§×‘×¦×™×, guard clauses
- âœ… ×ª×”×œ×™×š PR (branch naming, commit messages, review process)
- âœ… **Conventional Commits:** ×§×˜×’×•×¨×™×•×ª ×•×“×•×’×××•×ª
- âœ… ×”×¨×¦×ª ×˜×¡×˜×™× (pytest, coverage, linting)
- âœ… **× ×ª×™×‘×™ tmp:** ×—×•×‘×” ×œ×¢×‘×•×“ ×¨×§ ×‘-tmp ×‘×˜×¡×˜×™×
- âœ… ×”×’×“×¨×ª ×¡×‘×™×‘×ª ×¤×™×ª×•×— ××§×•××™×ª
- âœ… ×“×•×’×××•×ª ×œ×ª×¨×•××•×ª ×˜×•×‘×•×ª
- âœ… checklist ×œ×¤× ×™ ×©×œ×™×—×ª PR
- âœ… **.env.example ××œ×** - ×œ×œ× ×¢×¨×›×™× ×××™×ª×™×™×

**××™×§×•× ××•×¦×¢:** `docs/contributing.rst`

---

### 2. ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” ×•××‘× ×” ×”×¤×¨×•×™×§×˜ (ARCHITECTURE.md)

**×œ××” ×–×” ×—×©×•×‘:**
- ×”×‘× ×” ××”×™×¨×” ×©×œ ×”××¢×¨×›×ª ×›×•×œ×”
- ××¤×ª ×“×¨×›×™× ×œ××¦×™××ª ×§×•×“ ×¨×œ×•×•× ×˜×™
- ×”×—×œ×˜×•×ª ×¢×™×¦×•×‘ ×•×”×™×’×™×•×Ÿ
- **×§×¨×™×˜×™ ×œ×”×‘× ×ª ××™×š Bot ×•-WebApp ××ª×§×©×¨×™×**

**××” ×œ×”×•×¡×™×£:**
- âœ… ×ª×¨×©×™× ××¨×›×™×˜×§×˜×•×¨×” (Bot â†’ MongoDB â† WebApp)
- âœ… ×–×¨×™××ª × ×ª×•× ×™× (data flow)
- âœ… ×¨×›×™×‘×™× ×¢×™×§×¨×™×™× ×•×”××—×¨×™×•×ª ×©×œ×”×
- âœ… ×“×¤×•×¡×™ ×¢×™×¦×•×‘ ×‘×©×™××•×© (patterns)
- âœ… ×”×—×œ×˜×•×ª ×˜×›× ×™×•×ª ××¨×›×–×™×•×ª (×œ××” MongoDB? ×œ××” Telegram Bot API?)
- âœ… ××‘× ×” ×ª×™×§×™×•×ª ××¤×•×¨×˜ ×•×”×ª×¤×§×™×“ ×©×œ ×›×œ ××•×“×•×œ
- âœ… ×§×©×¨×™× ×‘×™×Ÿ ××•×“×•×œ×™×
- âœ… **××” ×”×§×©×¨ ×‘×™×Ÿ ×”×‘×•×˜ ×œ-WebApp** (×—×•×œ×§×™× MongoDB, ××™××•×ª ××©×•×ª×£)
- âœ… **××™×š ×”××¨×›×™×‘×™× ××ª×§×©×¨×™×** (handlers â†’ services â†’ database)

**×“×•×’××” ×œ××” ×©×¦×¨×™×š:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Telegram   â”‚              â”‚   WebApp     â”‚
â”‚     Bot      â”‚              â”‚  (Flask)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                             â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â””â”€â”€â”¤   Shared MongoDB       â”œâ”€â”˜
          â”‚   - code_snippets      â”‚
          â”‚   - users              â”‚
          â”‚   - bookmarks          â”‚
          â”‚   - sessions           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Bot Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Telegram  â”‚
â”‚   Updates   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Handlers   â”‚
â”‚ bot_handlersâ”‚
â”‚conversation â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Services   â”‚
â”‚ github,     â”‚
â”‚ backup,code â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database   â”‚
â”‚  Manager    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**××™×§×•× ××•×¦×¢:** `docs/architecture.rst`

---

### 3. ğŸ—„ï¸ ×ª×™×¢×•×“ Database Schema (×—×¡×¨ ×œ×’××¨×™!)

**×œ××” ×–×” ×—×©×•×‘:**
- **×§×¨×™×˜×™ ×œ×”×‘× ×ª ×”××¢×¨×›×ª** - ×œ×œ× ×–×” ×œ× ×™×•×“×¢×™× ××™×š ×”× ×ª×•× ×™× ×××•×—×¡× ×™×
- ××¤×ª×—×™× ×¦×¨×™×›×™× ×œ×“×¢×ª ××” ×™×© ×‘××¡×“ ×”× ×ª×•× ×™×
- ×¡×•×›× ×™ AI ×¦×¨×™×›×™× ×œ×”×‘×™×Ÿ ××ª ×”××‘× ×” ×›×“×™ ×œ×›×ª×•×‘ ×©××™×œ×ª×•×ª × ×›×•×Ÿ

**××” ×œ×”×•×¡×™×£:**

#### ××‘× ×” ×”×§×•×œ×§×¦×™×•×ª ×‘-MongoDB

**Collection: `code_snippets`**
```javascript
{
  _id: ObjectId("..."),
  user_id: 123456789,              // Telegram user ID
  file_name: "example.py",
  programming_language: "python",
  code: "def hello():\n    pass",
  note: "Example function",        // ×ª×™××•×¨/×”×¢×¨×”
  tags: ["python", "example"],
  created_at: ISODate("2025-10-10T10:30:00Z"),
  updated_at: ISODate("2025-10-10T10:30:00Z"),
  version: 1,
  is_deleted: false,
  file_size: 1234,                // bytes
  line_count: 10
}
```

**Collection: `users`**
```javascript
{
  _id: ObjectId("..."),
  user_id: 123456789,              // Telegram user ID (unique)
  username: "john_doe",
  first_name: "John",
  last_name: "Doe",
  created_at: ISODate("2025-01-01T00:00:00Z"),
  last_active: ISODate("2025-10-10T10:30:00Z"),
  settings: {
    language: "he",
    notifications: true
  },
  stats: {
    total_files: 156,
    total_searches: 45
  }
}
```

**Collection: `bookmarks`**
```javascript
{
  _id: ObjectId("..."),
  user_id: 123456789,
  file_id: ObjectId("..."),        // Reference to code_snippets
  bookmark_name: "Important code",
  created_at: ISODate("2025-10-10T10:30:00Z"),
  tags: ["important", "review"]
}
```

**Collection: `sessions` (WebApp)**
```javascript
{
  _id: "session_id_here",
  user_id: 123456789,
  created_at: ISODate("2025-10-10T10:30:00Z"),
  expires_at: ISODate("2025-10-11T10:30:00Z"),
  data: {
    // session data
  }
}
```

#### ××™× ×“×§×¡×™× × ×“×¨×©×™×

```javascript
// code_snippets
db.code_snippets.createIndex({ "user_id": 1, "created_at": -1 })
db.code_snippets.createIndex({ "programming_language": 1 })
db.code_snippets.createIndex({ "file_name": "text", "code": "text", "note": "text" })
db.code_snippets.createIndex({ "tags": 1 })
db.code_snippets.createIndex({ "is_deleted": 1 })

// users
db.users.createIndex({ "user_id": 1 }, { unique: true })
db.users.createIndex({ "username": 1 })

// bookmarks
db.bookmarks.createIndex({ "user_id": 1, "file_id": 1 })

// sessions
db.sessions.createIndex({ "expires_at": 1 }, { expireAfterSeconds: 0 })
```

#### ×§×©×¨×™× ×‘×™×Ÿ ×§×•×œ×§×¦×™×•×ª

```
users (user_id)
  â”œâ”€â†’ code_snippets (user_id)
  â””â”€â†’ bookmarks (user_id)
          â””â”€â†’ code_snippets (_id via file_id)
```

#### ×“×•×’×××•×ª ×œ×©××™×œ×ª×•×ª × ×¤×•×¦×•×ª

```javascript
// ×›×œ ×”×§×‘×¦×™× ×©×œ ××©×ª××©
db.code_snippets.find({ 
  user_id: 123456789, 
  is_deleted: false 
}).sort({ created_at: -1 })

// ×—×™×¤×•×© ×‘×§×•×“
db.code_snippets.find({
  user_id: 123456789,
  $text: { $search: "function" }
})

// ×§×‘×¦×™× ×œ×¤×™ ×©×¤×”
db.code_snippets.find({
  user_id: 123456789,
  programming_language: "python"
})

// ×¢× bookmarks
db.code_snippets.aggregate([
  { $match: { user_id: 123456789 } },
  { $lookup: {
      from: "bookmarks",
      localField: "_id",
      foreignField: "file_id",
      as: "bookmarks"
  }}
])
```

**××™×§×•× ××•×¦×¢:** `docs/database-schema.rst`

---

### 4. ğŸ”„ State Machine & Conversation Handlers (×—×¡×¨ ×œ×’××¨×™!)

**×œ××” ×–×” ×—×©×•×‘:**
- ×”×‘×•×˜ ××©×ª××© ×‘-ConversationHandlers ×¢× states ××•×¨×›×‘×™×
- ×‘×œ×™ ×ª×™×¢×•×“ ×©×œ ×”-states ××™ ××¤×©×¨ ×œ×”×‘×™×Ÿ ××ª ×”×–×¨×™××”
- ×§×¨×™×˜×™ ×œ×”×•×¡×¤×ª handlers ×—×“×©×™×

**××” ×œ×”×•×¡×™×£:**

#### ×¨×©×™××ª ×›×œ ×”-States

```python
# handlers/states.py
class States:
    # Save flow
    WAITING_FOR_CODE = 1
    WAITING_FOR_FILENAME = 2
    WAITING_FOR_NOTE = 3
    
    # Edit flow
    EDITING_CODE = 10
    EDITING_FILENAME = 11
    
    # GitHub flow
    GITHUB_MENU = 20
    GITHUB_REPO_SELECT = 21
    GITHUB_FILE_BROWSE = 22
    
    # Backup flow
    BACKUP_MENU = 30
    BACKUP_CONFIRM = 31
```

#### ×ª×¨×©×™× ConversationHandler - Save Flow

```mermaid
stateDiagram-v2
    [*] --> WAITING_FOR_FILENAME: /save
    WAITING_FOR_FILENAME --> WAITING_FOR_CODE: ×©× ×§×•×‘×¥ ×”×ª×§×‘×œ
    WAITING_FOR_CODE --> WAITING_FOR_NOTE: ×§×•×“ ×”×ª×§×‘×œ
    WAITING_FOR_NOTE --> [*]: ×”×¢×¨×” ×”×ª×§×‘×œ×” / ×“×™×œ×•×’
    
    WAITING_FOR_FILENAME --> [*]: /cancel
    WAITING_FOR_CODE --> [*]: /cancel
    WAITING_FOR_NOTE --> [*]: /cancel
```

#### ×ª×¨×©×™× ConversationHandler - GitHub Flow

```mermaid
stateDiagram-v2
    [*] --> GITHUB_MENU: /github
    GITHUB_MENU --> GITHUB_REPO_SELECT: "×‘×—×¨ ×¨×™×¤×•"
    GITHUB_REPO_SELECT --> GITHUB_FILE_BROWSE: ×¨×™×¤×• × ×‘×—×¨
    GITHUB_FILE_BROWSE --> GITHUB_FILE_BROWSE: × ×™×•×•×˜ ×‘×ª×™×§×™×•×ª
    GITHUB_FILE_BROWSE --> [*]: ×§×•×‘×¥ × ×©××¨
    
    GITHUB_MENU --> [*]: ×—×–×¨×”
    GITHUB_REPO_SELECT --> GITHUB_MENU: ×—×–×¨×”
    GITHUB_FILE_BROWSE --> GITHUB_REPO_SELECT: ×—×–×¨×”
```

#### ××™×š ×œ× ×”×œ States ××•×¨×›×‘×™×

```python
# ×“×•×’××”: conversation handler ×¢× ××¡×¤×¨ states
save_conversation = ConversationHandler(
    entry_points=[CommandHandler('save', start_save)],
    states={
        WAITING_FOR_FILENAME: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, receive_filename)
        ],
        WAITING_FOR_CODE: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, receive_code)
        ],
        WAITING_FOR_NOTE: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, receive_note),
            CallbackQueryHandler(skip_note, pattern='^skip_note$')
        ],
    },
    fallbacks=[CommandHandler('cancel', cancel)],
    name="save_conversation",
    persistent=True  # ×©××™×¨×ª state ×‘×™×Ÿ ×”×¤×¢×œ×•×ª
)
```

#### Context Data Management

```python
# ×©××™×¨×ª ××™×“×¢ ×‘×™×Ÿ states
async def receive_filename(update, context):
    filename = update.message.text
    context.user_data['filename'] = filename
    context.user_data['start_time'] = datetime.now()
    return WAITING_FOR_CODE

# ×©×™××•×© ×‘××™×“×¢ ×‘-state ×”×‘×
async def receive_code(update, context):
    code = update.message.text
    filename = context.user_data.get('filename')
    # ...
```

**××™×§×•× ××•×¦×¢:** `docs/conversation-handlers.rst`

---

### 5. ğŸ§ª ××“×¨×™×š ×”×¨×¦×ª ×˜×¡×˜×™× ×•-CI/CD

**×œ××” ×–×” ×—×©×•×‘:**
- ×¡×•×›× ×™ AI ×¦×¨×™×›×™× ×œ×“×¢×ª ××™×š ×œ×•×•×“× ×©×”×§×•×“ ×©×œ×”× ×¢×•×‘×“
- ××¤×ª×—×™× ×¦×¨×™×›×™× ×œ×”×¨×™×¥ ×˜×¡×˜×™× ×œ×¤× ×™ PR

**××” ×œ×”×•×¡×™×£:**

#### ×. ×”×¨×¦×ª ×˜×¡×˜×™× ××§×•××™×ª
```bash
# ×”×¨×¦×ª ×›×œ ×”×˜×¡×˜×™×
pytest

# ×”×¨×¦×ª ×˜×¡×˜ ×¡×¤×¦×™×¤×™
pytest tests/test_bot_handlers.py

# ×¢× coverage
pytest --cov=. --cov-report=html

# ×”×¨×¦×ª linting
flake8 .
mypy .
black --check .
```

#### ×‘. ×”×¡×‘×¨ ×¢×œ CI/CD Pipeline
- GitHub Actions workflows
- ×¡×˜×˜×•×¡×™ ×‘×“×™×§×” × ×“×¨×©×™×:
  - ğŸ” Code Quality & Security
  - Unit Tests (3.11)
  - Unit Tests (3.12)
- ××™×š ×œ×“×‘×’ ×›×©×œ×•× ×•×ª ×‘-CI

#### ×’. ×›×œ×œ×™×
- Coverage ××™× ×™××œ×™: 80%
- ×›×œ PR ×—×™×™×‘ ×œ×¢×‘×•×¨ linting
- ×˜×¡×˜×™× ×—×™×™×‘×™× ×œ×¢×‘×•×¨ ×‘-2 ×’×¨×¡××•×ª Python

#### ×“. ××™×š ×œ×›×ª×•×‘ ×˜×¡×˜×™× ×—×“×©×™×
```python
# ×“×•×’××” ×œ×˜×¡×˜ handler
import pytest
from unittest.mock import AsyncMock, patch

@pytest.mark.asyncio
async def test_save_command():
    """Test the /save command handler."""
    update = create_mock_update()
    context = create_mock_context()
    
    result = await save_command(update, context)
    
    assert result == ConversationStates.WAITING_FOR_CODE
    assert context.bot.send_message.called
```

#### ×”. Mocking ×©×œ Telegram API (×—×©×•×‘!)

**×œ××” ×¦×¨×™×š mocking:**
- ×œ× ×¨×•×¦×™× ×œ×©×œ×•×— ×”×•×“×¢×•×ª ×××™×ª×™×•×ª ×‘×˜×¡×˜×™×
- ××”×™×¨ ×™×•×ª×¨ ××§×¨×™××•×ª API ×××™×ª×™×•×ª
- ×œ× ×ª×œ×•×™ ×‘×¨×©×ª

**×“×•×’×××•×ª ×œ××•×§×™×:**
```python
from unittest.mock import AsyncMock, MagicMock
from telegram import Update, Message, User, Chat

def create_mock_update(text="test", user_id=123):
    """Create a mock Telegram Update."""
    update = MagicMock(spec=Update)
    update.effective_user = User(id=user_id, first_name="Test", is_bot=False)
    update.effective_chat = Chat(id=user_id, type="private")
    update.message = MagicMock(spec=Message)
    update.message.text = text
    update.message.reply_text = AsyncMock()
    return update

def create_mock_context():
    """Create a mock Context."""
    context = MagicMock()
    context.bot = MagicMock()
    context.bot.send_message = AsyncMock()
    context.user_data = {}
    context.chat_data = {}
    return context

# ×©×™××•×© ×‘×˜×¡×˜×™×
@pytest.mark.asyncio
async def test_start_command():
    update = create_mock_update(text="/start")
    context = create_mock_context()
    
    await start_command(update, context)
    
    # ×‘×“×™×§×” ×©× ×©×œ×—×” ×”×•×“×¢×”
    update.message.reply_text.assert_called_once()
    args = update.message.reply_text.call_args
    assert "×‘×¨×•×š ×”×‘×" in args[0][0]
```

**××•×§ ×©×œ MongoDB ×‘×˜×¡×˜×™×:**
```python
import pytest
from mongomock import MongoClient

@pytest.fixture
def mock_db():
    """Create a mock MongoDB for tests."""
    client = MongoClient()
    db = client['test_db']
    yield db
    client.close()

async def test_save_to_database(mock_db):
    collection = mock_db['code_snippets']
    
    # ×©××™×¨×ª ××¡××š
    result = collection.insert_one({
        "user_id": 123,
        "file_name": "test.py",
        "code": "print('hello')"
    })
    
    # ×‘×“×™×§×”
    assert result.inserted_id is not None
    doc = collection.find_one({"user_id": 123})
    assert doc["file_name"] == "test.py"
```

**××™×§×•× ××•×¦×¢:** `docs/testing.rst` + `docs/ci-cd.rst`

---

### 4. ğŸŒ API Reference ×œWebApp

**×œ××” ×–×” ×—×©×•×‘:**
- ×”×ª×™×¢×•×“ ×”×§×™×™× ××ª××§×“ ×‘×‘×•×˜, ×œ× ×‘-webapp
- endpoints, authentication, response formats ×—×¡×¨×™×

**××” ×œ×”×•×¡×™×£:**

#### ×˜×‘×œ×ª Endpoints ××œ××”

| Endpoint | Method | ×ª×™××•×¨ | ×“×•×¨×© ××™××•×ª | Request Body | Response |
|----------|--------|-------|-------------|--------------|----------|
| `/` | GET | ×“×£ ×”×‘×™×ª | âŒ | - | HTML |
| `/login` | GET | ×“×£ ×”×ª×—×‘×¨×•×ª | âŒ | - | HTML |
| `/auth/telegram` | POST | ××™××•×ª Telegram | âŒ | `{id, first_name, ...}` | `{success: true}` |
| `/logout` | GET | ×”×ª× ×ª×§×•×ª | âœ… | - | Redirect |
| `/dashboard` | GET | ×“×©×‘×•×¨×“ | âœ… | - | HTML |
| `/files` | GET | ×¨×©×™××ª ×§×‘×¦×™× | âœ… | Query: `?search=...&lang=...` | HTML |
| `/file/<id>` | GET | ×¦×¤×™×™×” ×‘×§×•×‘×¥ | âœ… | - | HTML |
| `/download/<id>` | GET | ×”×•×¨×“×ª ×§×•×‘×¥ | âœ… | - | File Download |
| `/html/<id>` | GET | ×ª×¦×•×’×ª HTML ×‘×˜×•×—×” | âœ… | - | HTML (iframe) |
| `/md/<id>` | GET | ×ª×¦×•×’×ª Markdown | âœ… | - | HTML (rendered) |
| `/api/stats` | GET | ×¡×˜×˜×™×¡×˜×™×§×•×ª | âœ… | - | JSON |

#### Authentication Flow
```mermaid
sequenceDiagram
    User->>WebApp: GET /login
    WebApp->>User: Login page with Telegram Widget
    User->>Telegram: Click "Login"
    Telegram->>WebApp: POST /auth/telegram (user data + hash)
    WebApp->>WebApp: Verify hash with BOT_TOKEN
    WebApp->>User: Set session cookie
    User->>WebApp: GET /dashboard
    WebApp->>User: Dashboard (authenticated)
```

#### Response Schemas
```json
// GET /api/stats
{
  "total_files": 156,
  "languages": {
    "python": 45,
    "javascript": 32,
    "java": 20
  },
  "recent_files": [
    {
      "id": "507f1f77bcf86cd799439011",
      "file_name": "example.py",
      "language": "python",
      "created_at": "2025-10-10T10:30:00Z"
    }
  ]
}
```

#### Error Handling
```json
// 401 Unauthorized
{
  "error": "Authentication required",
  "redirect": "/login"
}

// 404 Not Found
{
  "error": "File not found",
  "file_id": "507f1f77bcf86cd799439011"
}

// 500 Internal Server Error
{
  "error": "Database connection failed",
  "details": "..."
}
```

**××™×§×•× ××•×¦×¢:** `docs/webapp/api-reference.rst`

---

### 5. ğŸ”§ Environment Variables Reference ××œ×

**×œ××” ×–×” ×—×©×•×‘:**
- ×™×© ××©×ª× ×™ ×¡×‘×™×‘×” ×¤×–×•×¨×™× ×‘××¡××›×™× ×©×•× ×™×
- ×¦×¨×™×š ××§×•×¨ ××—×“ ×•××§×™×£

**××” ×œ×”×•×¡×™×£:**

#### ×˜×‘×œ×” ××¨×›×–×™×ª

| ××©×ª× ×” | ×ª×™××•×¨ | ×—×•×‘×” | ×‘×¨×™×¨×ª ××—×“×œ | ×“×•×’××” | ×¨×›×™×‘ |
|-------|--------|------|-------------|--------|------|
| `BOT_TOKEN` | ×˜×•×§×Ÿ ×”×‘×•×˜ ×-BotFather | âœ… | - | `123456:ABC-DEF...` | Bot |
| `MONGODB_URL` | ×—×™×‘×•×¨ ×œ-MongoDB | âœ… | - | `mongodb://localhost:27017` | Both |
| `DATABASE_NAME` | ×©× DB | âŒ | `code_keeper_bot` | `my_db` | Both |
| `SECRET_KEY` | ××¤×ª×— ×”×¦×¤× ×” Flask | âœ… (WebApp) | - | `supersecretkey123` | WebApp |
| `BOT_USERNAME` | ×©× ××©×ª××© ×”×‘×•×˜ | âŒ | `my_code_keeper_bot` | `@MyBot` | Both |
| `GITHUB_TOKEN` | ×˜×•×§×Ÿ GitHub | âŒ | - | `ghp_xxx...` | Bot |
| `WEBAPP_URL` | ×›×ª×•×‘×ª WebApp | âŒ | `https://...onrender.com` | `https://my.app` | WebApp |
| `REDIS_URL` | ×—×™×‘×•×¨ ×œ-Redis (cache) | âŒ | - | `redis://localhost:6379` | Bot |
| `LOG_LEVEL` | ×¨××ª logging | âŒ | `INFO` | `DEBUG` | Both |
| `ENCRYPTION_KEY` | ××¤×ª×— ×”×¦×¤× ×” × ×ª×•× ×™× | âŒ | - | `32-byte-key` | Both |
| `RATE_LIMIT_ENABLED` | ×”×¤×¢×œ×ª rate limiting | âŒ | `false` | `true` | Bot |
| `MAX_FILES_PER_USER` | ××§×¡×™××•× ×§×‘×¦×™× | âŒ | `1000` | `5000` | Bot |
| `BACKUP_ENABLED` | ×”×¤×¢×œ×ª ×’×™×‘×•×™×™× | âŒ | `false` | `true` | Bot |
| `UPTIME_PROVIDER` | ×¡×¤×§ uptime monitoring | âŒ | - | `betteruptime` | WebApp |

#### ×“×•×’×××•×ª ×œ×§×•× ×¤×™×’×•×¨×¦×™×•×ª

**Development (××§×•××™):**
```env
BOT_TOKEN=your_bot_token_here
MONGODB_URL=mongodb://localhost:27017
DATABASE_NAME=code_keeper_dev
LOG_LEVEL=DEBUG
```

**Staging:**
```env
BOT_TOKEN=staging_bot_token
MONGODB_URL=mongodb+srv://user:pass@cluster.mongodb.net
DATABASE_NAME=code_keeper_staging
LOG_LEVEL=INFO
REDIS_URL=redis://staging-redis:6379
```

**Production:**
```env
BOT_TOKEN=prod_bot_token
MONGODB_URL=mongodb+srv://user:pass@prod-cluster.mongodb.net
DATABASE_NAME=code_keeper_prod
LOG_LEVEL=WARNING
REDIS_URL=redis://prod-redis:6379
ENCRYPTION_KEY=your-32-byte-encryption-key
RATE_LIMIT_ENABLED=true
BACKUP_ENABLED=true
```

**××™×§×•× ××•×¦×¢:** `docs/environment-variables.rst`

---

## ğŸ”§ ×—×¡×¨×™× ×—×©×•×‘×™× (×¢×“×™×¤×•×ª ×‘×™× ×•× ×™×ª)

### 6. ğŸ› ï¸ Troubleshooting Guide ××¤×•×¨×˜

**××” ×œ×”×•×¡×™×£:**

#### ×©×’×™××•×ª × ×¤×•×¦×•×ª ×•×¤×ª×¨×•× ×•×ª

**×©×’×™××”:** `ModuleNotFoundError: No module named 'telegram'`
```bash
# ×¤×ª×¨×•×Ÿ:
pip install -r requirements.txt
# ××• ×¡×¤×¦×™×¤×™×ª:
pip install python-telegram-bot
```

**×©×’×™××”:** `ServerSelectionTimeoutError: No servers available`
```bash
# ×¤×ª×¨×•×Ÿ:
# 1. ×‘×“×•×§ ×©-MongoDB ×¨×¥:
systemctl status mongodb
# 2. ×‘×“×•×§ ××ª ×”-MONGODB_URL ×‘-.env
# 3. ×× Atlas - ×‘×“×•×§ Network Access (IP whitelist)
```

**×©×’×™××”:** `Telegram API Error: Conflict: terminated by other getUpdates`
```bash
# ×¤×ª×¨×•×Ÿ:
# ×™×© instance ××—×¨ ×©×œ ×”×‘×•×˜ ×©×¨×¥
pkill -f "python main.py"
# ×—×›×” 30 ×©× ×™×•×ª ×•× ×¡×” ×©×•×‘
```

**×©×’×™××”:** `Message is not modified`
```python
# ×¤×ª×¨×•×Ÿ: ×”×©×ª××© ×‘-wrapper ×‘×˜×•×—
async def safe_edit(query, text, reply_markup=None):
    try:
        await query.edit_message_text(text=text, reply_markup=reply_markup)
    except telegram.error.BadRequest as e:
        if "message is not modified" in str(e).lower():
            return  # ×”×ª×¢×œ× ××”×©×’×™××”
        raise
```

#### ×“×™×‘×•×’

**×”×¤×¢×œ×ª debug mode:**
```bash
LOG_LEVEL=DEBUG python main.py
```

**×¦×¤×™×™×” ×‘×œ×•×’×™×:**
```bash
# ×‘-Render:
# Dashboard â†’ Service â†’ Logs â†’ Live Logs

# ××§×•××™:
tail -f bot.log
```

**×‘×“×™×§×ª ×—×™×‘×•×¨ MongoDB:**
```python
python -c "from database.manager import DatabaseManager; db = DatabaseManager(); print('Connected!' if db.test_connection() else 'Failed')"
```

#### ×‘×¢×™×•×ª Deployment ×‘-Render

**×”×‘×•×˜ × ×¨×“× (sleep mode):**
- Free plan: ×”×‘×•×˜ × ×¨×“× ××—×¨×™ 15 ×“×§×•×ª ×—×•×¡×¨ ×¤×¢×™×œ×•×ª
- ×¤×ª×¨×•×Ÿ 1: ×©×“×¨×’ ×œ-Starter Plan ($7/month)
- ×¤×ª×¨×•×Ÿ 2: ×©×™××•×© ×‘-cron job ×œping ×›×œ 10 ×“×§×•×ª

**×‘×¢×™×•×ª ×–×™×›×¨×•×Ÿ:**
- Free plan: 512MB RAM
- ×‘×“×™×§×ª ×©×™××•×© ×–×™×›×¨×•×Ÿ:
```python
import psutil
print(f"RAM: {psutil.virtual_memory().percent}%")
```

**××™×§×•× ××•×¦×¢:** `docs/troubleshooting.rst`

---

### 7. ğŸ”„ ××“×¨×™×š Migration/Upgrade

**××” ×œ×”×•×¡×™×£:**
- ××™×š ×œ×©×“×¨×’ ×‘×™×Ÿ ×’×¨×¡××•×ª
- breaking changes ×‘×›×œ ×’×¨×¡×”
- database migrations (×× ×™×©)
- backup ×œ×¤× ×™ ×©×“×¨×•×’
- rollback plan

**×“×•×’××”:**
```markdown
## Upgrade from v1.0 to v2.0

### Breaking Changes
- Changed database schema for `code_snippets` collection
- New required environment variable: `ENCRYPTION_KEY`

### Migration Steps
1. Backup your database:
   ```bash
   mongodump --uri="$MONGODB_URL" --out=./backup
   ```

2. Update code:
   ```bash
   git pull origin main
   pip install -r requirements.txt --upgrade
   ```

3. Run migration script:
   ```bash
   python scripts/migrate_v1_to_v2.py
   ```

4. Test:
   ```bash
   pytest tests/
   ```

5. Deploy
```

**××™×§×•× ××•×¦×¢:** `docs/migration.rst`

---

### 8. ğŸ”¨ Development Workflow

**××” ×œ×”×•×¡×™×£:**

#### ××™×š ×œ×”×•×¡×™×£ handler ×—×“×©

```python
# 1. ×¦×•×¨ ×§×•×‘×¥ ×—×“×©: handlers/my_feature.py
from telegram import Update
from telegram.ext import ContextTypes

async def my_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Handle /mycommand."""
    await update.message.reply_text("Hello!")

# 2. ×”×•×¡×£ ×œ-main.py:
from handlers.my_feature import my_command

app.add_handler(CommandHandler("mycommand", my_command))

# 3. ×›×ª×•×‘ ×˜×¡×˜: tests/test_my_feature.py
@pytest.mark.asyncio
async def test_my_command():
    # ...
```

#### ××™×š ×œ×”×•×¡×™×£ endpoint ×œ-WebApp

```python
# 1. ×‘-webapp/app.py:
@app.route('/my-endpoint')
@login_required
def my_endpoint():
    return render_template('my_page.html')

# 2. ×¦×•×¨ template: webapp/templates/my_page.html
{% extends "base.html" %}
{% block content %}
  <h1>My Page</h1>
{% endblock %}

# 3. ×¢×“×›×Ÿ ×ª×™×¢×•×“ API
```

#### ××™×š ×œ×¢×“×›×Ÿ database schema

```python
# 1. ×¢×“×›×Ÿ model: database/models.py
class CodeSnippet:
    def __init__(self, new_field=None):
        self.new_field = new_field  # NEW

# 2. ×¦×•×¨ migration script
def migrate_add_new_field():
    db.code_snippets.update_many(
        {"new_field": {"$exists": False}},
        {"$set": {"new_field": None}}
    )

# 3. ×¢×“×›×Ÿ ×˜×¡×˜×™×
```

**××™×§×•× ××•×¦×¢:** `docs/development.rst`

---

### 9. ğŸ”’ Security Best Practices

**××” ×œ×”×•×¡×™×£:**
- ××™×š ×œ×˜×¤×œ ×‘×˜×•×§× ×™× (×”×¦×¤× ×”, ××—×¡×•×Ÿ)
- encryption ×©×œ × ×ª×•× ×™× ×¨×’×™×©×™×
- rate limiting
- input validation
- **CSRF protection ×‘-WebApp** (×—×©×•×‘!)
- ×”×¨×©××•×ª ××©×ª××©
- OWASP Top 10 considerations

**×“×•×’×××•×ª:**

#### Encryption ×©×œ ×˜×•×§× ×™×
```python
from cryptography.fernet import Fernet

def encrypt_token(token: str, key: bytes) -> str:
    f = Fernet(key)
    return f.encrypt(token.encode()).decode()

def decrypt_token(encrypted_token: str, key: bytes) -> str:
    f = Fernet(key)
    return f.decrypt(encrypted_token.encode()).decode()
```

#### Input Validation
```python
def validate_filename(filename: str) -> bool:
    if not filename or len(filename) > 255:
        return False
    # Block path traversal
    if '..' in filename or '/' in filename:
        return False
    # Block special characters
    if any(c in filename for c in ['<', '>', ':', '"', '|', '?', '*']):
        return False
    return True

def sanitize_code_input(code: str) -> str:
    """Remove potentially dangerous code patterns."""
    # Remove NULL bytes
    code = code.replace('\x00', '')
    # Limit size
    max_size = 1024 * 1024  # 1MB
    if len(code) > max_size:
        raise ValueError(f"Code too large: {len(code)} bytes")
    return code
```

#### Rate Limiting
```python
from functools import wraps
from time import time

def rate_limit(max_calls=10, period=60):
    calls = {}
    def decorator(func):
        @wraps(func)
        async def wrapper(update, context):
            user_id = update.effective_user.id
            now = time()
            if user_id not in calls:
                calls[user_id] = []
            calls[user_id] = [t for t in calls[user_id] if now - t < period]
            if len(calls[user_id]) >= max_calls:
                await update.message.reply_text("Too many requests!")
                return
            calls[user_id].append(now)
            return await func(update, context)
        return wrapper
    return decorator
```

#### CSRF Protection ×‘-WebApp (×—×©×•×‘!)

**×œ××” ×¦×¨×™×š CSRF protection:**
- ××•× ×¢ ×”×ª×§×¤×•×ª Cross-Site Request Forgery
- ×—×™×•× ×™ ×‘×˜×¤×¡×™× ×‘-WebApp
- ×“×¨×™×©×” ×‘×¡×™×¡×™×ª ×œ××‘×˜×—×ª web

**×”×˜××¢×” ×¢× Flask-WTF:**
```python
# webapp/app.py
from flask_wtf.csrf import CSRFProtect

app = Flask(__name__)
app.config['SECRET_KEY'] = os.getenv('SECRET_KEY')
csrf = CSRFProtect(app)

# ×‘×˜×¤×¡×™×
from flask_wtf import FlaskForm
from wtforms import StringField, TextAreaField
from wtforms.validators import DataRequired

class CodeForm(FlaskForm):
    filename = StringField('File Name', validators=[DataRequired()])
    code = TextAreaField('Code', validators=[DataRequired()])

# ×‘-template
<!-- templates/upload.html -->
<form method="POST">
    {{ form.csrf_token }}
    {{ form.filename.label }} {{ form.filename() }}
    {{ form.code.label }} {{ form.code() }}
    <button type="submit">Save</button>
</form>

# ×‘-route
@app.route('/upload', methods=['GET', 'POST'])
@login_required
def upload():
    form = CodeForm()
    if form.validate_on_submit():
        # CSRF verified automatically!
        save_code(form.filename.data, form.code.data)
    return render_template('upload.html', form=form)
```

**×”×’× ×” ×¢×œ API endpoints:**
```python
# For AJAX requests
@app.route('/api/save', methods=['POST'])
@login_required
def api_save():
    # Verify CSRF token from header
    token = request.headers.get('X-CSRF-Token')
    if not validate_csrf_token(token):
        abort(403)
    # Process request...
```

**JavaScript client:**
```javascript
// ×§×‘×œ×ª CSRF token
const csrfToken = document.querySelector('meta[name="csrf-token"]').content;

// ×©×™××•×© ×‘-AJAX
fetch('/api/save', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-CSRF-Token': csrfToken
    },
    body: JSON.stringify(data)
});
```

**××™×§×•× ××•×¦×¢:** `docs/security.rst`

---

### 10. âš¡ Performance & Optimization Guide

**××” ×œ×”×•×¡×™×£:**

#### MongoDB Indexing
```javascript
// Recommended indexes
db.code_snippets.createIndex({"user_id": 1, "created_at": -1})
db.code_snippets.createIndex({"programming_language": 1})
db.code_snippets.createIndex({"file_name": "text", "code": "text"})

// Check index usage
db.code_snippets.find({user_id: 123}).explain("executionStats")
```

#### Caching Strategies
```python
# Redis cache for frequent queries
import redis
from functools import wraps

redis_client = redis.from_url(os.getenv('REDIS_URL'))

def cache_result(ttl=300):
    def decorator(func):
        @wraps(func)
        async def wrapper(*args, **kwargs):
            key = f"{func.__name__}:{args}:{kwargs}"
            cached = redis_client.get(key)
            if cached:
                return json.loads(cached)
            result = await func(*args, **kwargs)
            redis_client.setex(key, ttl, json.dumps(result))
            return result
        return wrapper
    return decorator
```

#### Batch Processing
```python
# Process multiple files at once
async def save_multiple_files(files: list):
    # Instead of N database calls:
    # for file in files:
    #     db.insert_one(file)
    
    # Do one bulk insert:
    db.insert_many(files)
```

#### Memory Optimization
```python
# Don't load all files into memory
# BAD:
files = list(db.find({}))  # Loads everything!

# GOOD:
for file in db.find({}).batch_size(100):  # Streams in batches
    process_file(file)
```

**××™×§×•× ××•×¦×¢:** `docs/performance.rst`

---

## ğŸ”§ ×—×¡×¨×™× ×—×©×•×‘×™× × ×•×¡×¤×™× (×¢×“×™×¤×•×ª ×‘×™× ×•× ×™×ª-×’×‘×•×”×”)

### 11. ğŸ”— ×ª×™×¢×•×“ ××™× ×˜×’×¨×¦×™×•×ª ××¤×•×¨×˜

**×œ××” ×–×” ×—×©×•×‘:**
- ×”×‘×•×˜ ××©×ª×œ×‘ ×¢× GitHub, Google Drive, Telegram
- ×¦×¨×™×š ×”×¡×‘×¨ ××œ× ×¢×œ OAuth flows ×•×”×’×“×¨×•×ª API

#### GitHub API

**××” ×œ×”×•×¡×™×£:**
- ××™×š ×œ×™×¦×•×¨ Personal Access Token
- ×”×¨×©××•×ª × ×“×¨×©×•×ª (scopes)
- ×“×•×’×××•×ª ×œ×›×œ ×¤×¢×•×œ×” (gist, repo browsing, file download)
- Rate limiting ×©×œ GitHub

```python
# ×“×•×’××”: ×™×¦×™×¨×ª Gist
from github import Github

g = Github(github_token)
user = g.get_user()

gist = user.create_gist(
    public=False,
    files={
        "example.py": InputFileContent("print('hello')")
    },
    description="Code snippet from bot"
)

print(f"Gist URL: {gist.html_url}")
```

#### Google Drive API - OAuth Flow ××œ×

**×œ××” ×–×” ×—×©×•×‘:**
- OAuth2 ××•×¨×›×‘ ×•×“×•×¨×© ×”×¡×‘×¨ ×¦×¢×“ ××—×¨×™ ×¦×¢×“
- ×¦×¨×™×š ×”×’×“×¨×” ×‘-Google Cloud Console

**××” ×œ×”×•×¡×™×£:**

**×©×œ×‘ 1: ×”×’×“×¨×ª Google Cloud Project**
```
1. ×¢×‘×•×¨ ×œ-Google Cloud Console
2. ×¦×•×¨ ×¤×¨×•×™×§×˜ ×—×“×©
3. ×”×¤×¢×œ ××ª Google Drive API
4. ×¦×•×¨ OAuth 2.0 credentials
5. ×”×•×¡×£ redirect URI: http://localhost:5000/oauth2callback
6. ×©××•×¨ ××ª CLIENT_ID ×•-CLIENT_SECRET
```

**×©×œ×‘ 2: OAuth Flow**
```python
from google_auth_oauthlib.flow import Flow
from googleapiclient.discovery import build

# 1. Initialize flow
flow = Flow.from_client_secrets_file(
    'credentials.json',
    scopes=['https://www.googleapis.com/auth/drive.file'],
    redirect_uri='http://localhost:5000/oauth2callback'
)

# 2. Generate authorization URL
authorization_url, state = flow.authorization_url(
    access_type='offline',
    include_granted_scopes='true'
)

# 3. Redirect user to authorization_url
# User authorizes and gets redirected back with code

# 4. Exchange code for credentials
flow.fetch_token(code=authorization_code)
credentials = flow.credentials

# 5. Use credentials
drive_service = build('drive', 'v3', credentials=credentials)

# 6. Upload file
file_metadata = {'name': 'code.py'}
media = MediaFileUpload('code.py', mimetype='text/plain')
file = drive_service.files().create(
    body=file_metadata,
    media_body=media,
    fields='id, webViewLink'
).execute()

print(f"File uploaded: {file.get('webViewLink')}")
```

**×©×œ×‘ 3: ×©××™×¨×ª Credentials**
```python
# ×©××™×¨×” ××•×¦×¤× ×ª
from cryptography.fernet import Fernet

def save_credentials(user_id, credentials):
    encrypted = encrypt_token(
        credentials.to_json(),
        ENCRYPTION_KEY
    )
    db.users.update_one(
        {"user_id": user_id},
        {"$set": {"google_credentials": encrypted}}
    )

def load_credentials(user_id):
    user = db.users.find_one({"user_id": user_id})
    if user and 'google_credentials' in user:
        decrypted = decrypt_token(
            user['google_credentials'],
            ENCRYPTION_KEY
        )
        return Credentials.from_authorized_user_info(
            json.loads(decrypted)
        )
    return None
```

#### Telegram Bot API - Webhooks vs Polling

**×œ××” ×–×” ×—×©×•×‘:**
- ×©×ª×™ ×“×¨×›×™× ×œ×§×‘×œ ×¢×“×›×•× ×™× ××˜×œ×’×¨×
- ×¦×¨×™×š ×œ×”×‘×™×Ÿ ××ª×™ ×œ×”×©×ª××© ×‘×›×œ ××—×ª

**Polling (×‘×¨×™×¨×ª ××—×“×œ):**
```python
# main.py
from telegram.ext import Application

app = Application.builder().token(BOT_TOKEN).build()

# Add handlers...

# Start polling
app.run_polling()
```

**×™×ª×¨×•× ×•×ª:**
- âœ… ×¤×©×•×˜ ×œ×”×’×“×¨×”
- âœ… ×¢×•×‘×“ ××›×œ ×¡×‘×™×‘×” (×’× ×œ×œ× IP ×¦×™×‘×•×¨×™)
- âœ… ××ª××™× ×œ×¤×™×ª×•×— ××§×•××™

**×—×¡×¨×•× ×•×ª:**
- âŒ ×¤×—×•×ª ×™×¢×™×œ (×©××™×œ×ª×•×ª ×ª×›×•×¤×•×ª)
- âŒ ×¢×œ×•×ª ×¨×©×ª ×’×‘×•×”×” ×™×•×ª×¨
- âŒ ×œ× ××•××œ×¥ ×œ-production ×‘×§× ×” ××™×“×” ×’×“×•×œ

**Webhooks (××•××œ×¥ ×œ-production):**
```python
# main.py
from telegram.ext import Application

app = Application.builder().token(BOT_TOKEN).build()

# Add handlers...

# Start webhook
app.run_webhook(
    listen="0.0.0.0",
    port=8443,
    url_path="/webhook",
    webhook_url=f"https://your-domain.com/webhook"
)
```

**×”×’×“×¨×ª Webhook ×‘-Telegram:**
```bash
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/setWebhook" \
     -d "url=https://your-domain.com/webhook" \
     -d "max_connections=100" \
     -d "allowed_updates=[\"message\",\"callback_query\"]"

# ×‘×“×™×§×ª ×¡×˜×˜×•×¡
curl "https://api.telegram.org/bot<BOT_TOKEN>/getWebhookInfo"
```

**×™×ª×¨×•× ×•×ª:**
- âœ… ×™×¢×™×œ ×™×•×ª×¨ (×¢×“×›×•× ×™× ××™×™×“×™×™×)
- âœ… ×¤×—×•×ª ×¢×•××¡ ×¢×œ ×”×¨×©×ª
- âœ… ××•××œ×¥ ×œ-production

**×—×¡×¨×•× ×•×ª:**
- âŒ ×“×•×¨×© HTTPS ×•-IP ×¦×™×‘×•×¨×™
- âŒ ××•×¨×›×‘ ×™×•×ª×¨ ×œ×”×’×“×¨×”
- âŒ ×œ× ××ª××™× ×œ×¤×™×ª×•×— ××§×•××™

**××™×§×•× ××•×¦×¢:** `docs/integrations.rst`

---

## ğŸ“ ×¨×¦×•×™ ×œ×”×•×¡×™×£ (×¢×“×™×¤×•×ª × ××•×›×”)

### 12. ğŸš€ Quick Start Guide (×¢××•×“ ××—×“)

**×œ××” ×–×” ×—×©×•×‘:**
- ××¤×ª×—×™× ×—×“×©×™× ×¨×•×¦×™× ×œ×”×ª×—×™×œ ××”×¨
- ×¢××•×“ ××—×“ ×¢× ×”×›×œ = ××™×Ÿ ×ª×™×¨×•×¦×™×

**×ª×•×›×Ÿ ××•×¦×¢:**
```markdown
# Quick Start - CodeBot

## ×”×ª×§× ×” ××”×™×¨×” (5 ×“×§×•×ª)

### 1. Clone & Install
```bash
git clone https://github.com/amirbiron/CodeBot.git
cd CodeBot
pip install -r requirements.txt
```

### 2. ×”×’×“×¨×ª .env
```bash
cp .env.example .env
nano .env  # ×”×•×¡×£ BOT_TOKEN ×•-MONGODB_URL
```

### 3. ×”×¨×¦×”
```bash
python main.py
```

## ×˜×¡×˜×™× ××”×™×¨×™×
```bash
pytest tests/
```

## ×‘×¢×™×•×ª × ×¤×•×¦×•×ª
- MongoDB ×œ× ×¢×•×‘×“? â†’ `systemctl start mongodb`
- ×˜×•×§×Ÿ ×œ× ×ª×§×™×Ÿ? â†’ ×‘×“×•×§ ×‘-BotFather

## ××” ×”×œ××”?
- [××“×¨×™×š ×ª×¨×•××”](contributing.html)
- [××¨×›×™×˜×§×˜×•×¨×”](architecture.html)
- [API Reference](api/index.html)
```

**××™×§×•× ××•×¦×¢:** `docs/quickstart.rst`

---

### 13. ğŸ“¡ Swagger/OpenAPI ×œ××¤×¨×˜ WebApp

**×œ××” ×–×” ×—×©×•×‘:**
- ×ª×™×¢×•×“ ××™× ×˜×¨××§×˜×™×‘×™ ×©×œ ×”-API
- ××¤×©×¨ ×œ×‘×“×•×§ endpoints ×™×©×™×¨×•×ª ××”×“×¤×“×¤×Ÿ
- ×™×¦×™×¨×” ××•×˜×•××˜×™×ª ×©×œ SDK clients

**×”×•×¡×¤×ª Swagger ×œFlask:**
```python
# webapp/app.py
from flask_swagger_ui import get_swaggerui_blueprint

# Swagger UI
SWAGGER_URL = '/api/docs'
API_URL = '/static/swagger.json'

swaggerui_blueprint = get_swaggerui_blueprint(
    SWAGGER_URL,
    API_URL,
    config={'app_name': "CodeBot WebApp API"}
)

app.register_blueprint(swaggerui_blueprint, url_prefix=SWAGGER_URL)
```

**×§×•×‘×¥ swagger.json:**
```json
{
  "openapi": "3.0.0",
  "info": {
    "title": "CodeBot WebApp API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/stats": {
      "get": {
        "summary": "Get user statistics",
        "security": [{"cookieAuth": []}],
        "responses": {
          "200": {
            "description": "Statistics object",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total_files": {"type": "integer"},
                    "languages": {"type": "object"}
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
```

**××•×˜×•××¦×™×” ×¢× flask-swagger:**
```python
from flask_swagger import swagger

@app.route('/api/swagger.json')
def swagger_spec():
    swag = swagger(app)
    swag['info']['version'] = "1.0.0"
    swag['info']['title'] = "CodeBot API"
    return jsonify(swag)
```

**××™×§×•× ××•×¦×¢:** `docs/swagger-setup.rst`

---

### 14. ğŸ“® Postman Collection

**×œ××” ×–×” ×—×©×•×‘:**
- ×“×•×’×××•×ª ××•×›× ×•×ª ×œ×©×™××•×©
- ×§×œ ×œ×‘×“×•×§ API ×‘×œ×™ ×œ×›×ª×•×‘ ×§×•×“
- ×©×™×ª×•×£ ×¢× ×¦×•×•×ª

**×™×¦×™×¨×ª Collection:**
```json
{
  "info": {
    "name": "CodeBot WebApp API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login with Telegram",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 123456789,\n  \"first_name\": \"John\",\n  \"hash\": \"...\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/telegram",
              "host": ["{{base_url}}"],
              "path": ["auth", "telegram"]
            }
          }
        }
      ]
    },
    {
      "name": "Files",
      "item": [
        {
          "name": "Get Statistics",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/stats",
              "host": ["{{base_url}}"],
              "path": ["api", "stats"]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000"
    }
  ]
}
```

**××™×§×•×:** `docs/postman/CodeBot_API.postman_collection.json`

---

### 15. â“ FAQ ×œ××¤×ª×—×™×

**×©××œ×•×ª × ×¤×•×¦×•×ª:**
- ×œ××” × ×‘×—×¨×” MongoDB?
- ××™×š ×¢×•×‘×“ ×”-state management ×‘-ConversationHandler?
- ×œ××” ×™×© ×’× bot ×•×’× webapp?
- ××™×š ×œ×ª×¨×•× ×ª×¨×’×•× ×œ×©×¤×” ×—×“×©×”?
- ××™×š ×œ×”×•×¡×™×£ ×©×¤×ª ×ª×›× ×•×ª ×—×“×©×” ×œ×”×“×’×©×ª syntax?

---

### 12. ğŸ“œ Code of Conduct

**×ª×•×›×Ÿ:**
- ×”×ª× ×”×’×•×ª ××¦×•×¤×”
- ×”×ª× ×”×’×•×ª ××¡×•×¨×”
- ×ª×”×œ×™×š ×“×™×•×•×— ×¢×œ ×‘×¢×™×•×ª
- enforcement

---

### 13. ğŸ“… Changelog ××¤×•×¨×˜

**×¤×•×¨××˜:**
```markdown
## [2.0.0] - 2025-10-10

### Added
- WebApp with Telegram Login
- Markdown preview with KaTeX support
- Bookmarks feature

### Changed
- Improved database schema
- Updated to python-telegram-bot v20

### Fixed
- Memory leak in file processing
- Rate limiting bug

### Security
- Added encryption for GitHub tokens
```

---

### 14. ğŸ—ºï¸ Roadmap ×¦×™×‘×•×¨×™

**××” ×œ×›×œ×•×œ:**
- ×¤×™×¦'×¨×™× ×‘×¤×™×ª×•×—
- ×¤×™×¦'×¨×™× ××ª×•×›× × ×™×
- ×¨×¢×™×•× ×•×ª ×¢×ª×™×“×™×™×
- timeline ××©×•×¢×¨

---

### 15. ğŸ“Š Sequence Diagrams ×œ×–×¨×™××•×ª ××¨×›×–×™×•×ª

**×“×•×’×××•×ª:**

**×©××™×¨×ª ×§×•×‘×¥:**
```mermaid
sequenceDiagram
    User->>Bot: /save file.py
    Bot->>Handler: save_command()
    Handler->>User: "×©×œ×— ××ª ×”×§×•×“"
    User->>Bot: <code content>
    Bot->>Handler: handle_code()
    Handler->>CodeProcessor: process_code()
    CodeProcessor->>Handler: {language, highlighted}
    Handler->>Database: save_snippet()
    Database->>Handler: {id, success}
    Handler->>User: "× ×©××¨ ×‘×”×¦×œ×—×”!"
```

**GitHub Integration:**
```mermaid
sequenceDiagram
    User->>Bot: /share file.py â†’ GitHub Gist
    Bot->>Handler: share_to_gist()
    Handler->>Database: get_file()
    Database->>Handler: file_data
    Handler->>GitHub API: create_gist()
    GitHub API->>Handler: gist_url
    Handler->>User: "×©×•×ª×£ ×‘-Gist: <url>"
```

---

## ğŸ¯ ×”××œ×¦×•×ª ×™×™×©×•× ××™×™×“×™×•×ª

### ×©×œ×‘ 1: ×™×¦×™×¨×ª ×“×¤×™× ×—×“×©×™× ×‘-`docs/`

```
docs/
â”œâ”€â”€ contributing.rst         # NEW - ××“×¨×™×š ×ª×¨×•××”
â”œâ”€â”€ architecture.rst         # NEW - ××¨×›×™×˜×§×˜×•×¨×”
â”œâ”€â”€ testing.rst             # NEW - ×˜×¡×˜×™×
â”œâ”€â”€ ci-cd.rst              # NEW - CI/CD
â”œâ”€â”€ troubleshooting.rst    # NEW - ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª
â”œâ”€â”€ development.rst        # NEW - ×ª×”×œ×™×š ×¤×™×ª×•×—
â”œâ”€â”€ security.rst           # NEW - ××‘×˜×—×”
â”œâ”€â”€ performance.rst        # NEW - ×‘×™×¦×•×¢×™×
â”œâ”€â”€ environment-variables.rst  # NEW - ××©×ª× ×™ ×¡×‘×™×‘×”
â”œâ”€â”€ migration.rst          # NEW - ×©×“×¨×•×’×™×
â””â”€â”€ webapp/
    â””â”€â”€ api-reference.rst  # NEW - API ×©×œ webapp
```

### ×©×œ×‘ 2: ×¢×“×›×•×Ÿ `docs/index.rst`

×”×•×¡×£ ××ª ×”×“×¤×™× ×”×—×“×©×™× ×œ-toctree:

```rst
.. Code Keeper Bot documentation master file

Code Keeper Bot - ×ª×™×¢×•×“ API
============================

.. toctree::
   :maxdepth: 2
   :caption: ××“×¨×™×›×™× ×‘×¡×™×¡×™×™×:

   installation
   configuration
   environment-variables

.. toctree::
   :maxdepth: 2
   :caption: ×œ××¤×ª×—×™×:
   
   contributing
   architecture
   development
   testing
   ci-cd
   troubleshooting
   security
   performance
   migration

.. toctree::
   :maxdepth: 2
   :caption: API Reference:
   
   api/index
   modules/index
   handlers/index
   services/index
   database/index

.. toctree::
   :maxdepth: 2
   :caption: WebApp:
   
   webapp/overview
   webapp/api-reference

.. toctree::
   :maxdepth: 2
   :caption: ×¢×–×¨×” ×•×“×•×’×××•×ª:
   
   examples
   user/share_code
   user/github_browse
   user/download_repo
```

### ×©×œ×‘ 3: ×§×™×©×•×¨ ×-README.md

×”×•×¡×£ ×¡×¢×™×£ ×‘×•×œ×˜ ×‘-README:

```markdown
## ğŸ“– ×ª×™×¢×•×“ ×œ××¤×ª×—×™×

××ª×›× ×Ÿ ×œ×ª×¨×•× ×œ×¤×¨×•×™×§×˜? ×”×ª×—×œ ×›××Ÿ:

- **[××“×¨×™×š ×ª×¨×•××”](https://amirbiron.github.io/CodeBot/contributing.html)** - ××™×š ×œ×ª×¨×•× ×§×•×“
- **[××¨×›×™×˜×§×˜×•×¨×”](https://amirbiron.github.io/CodeBot/architecture.html)** - ×”×‘× ×ª ×”××¢×¨×›×ª
- **[××“×¨×™×š ×¤×™×ª×•×—](https://amirbiron.github.io/CodeBot/development.html)** - workflow ×™×•××™×•××™
- **[×˜×¡×˜×™×](https://amirbiron.github.io/CodeBot/testing.html)** - ××™×š ×œ×”×¨×™×¥ ×•×œ×›×ª×•×‘ ×˜×¡×˜×™×
- **[API Reference](https://amirbiron.github.io/CodeBot/api/index.html)** - ×ª×™×¢×•×“ API ××œ×
```

### ×©×œ×‘ 4: ×™×¦×™×¨×ª Templates

×¦×•×¨ ×ª×‘× ×™×•×ª ×¡×˜× ×“×¨×˜×™×•×ª:

**`docs/_templates/module_template.rst`:**
```rst
Module Name
===========

×ª×™××•×¨ ×›×œ×œ×™ ×©×œ ×”××•×“×•×œ.

Overview
--------

××” ×”××•×“×•×œ ×¢×•×©×”?

Usage
-----

.. code-block:: python

   from module import MyClass
   
   obj = MyClass()
   obj.do_something()

API Reference
-------------

.. automodule:: module
   :members:
   :undoc-members:
   :show-inheritance:

Examples
--------

×“×•×’×××•×ª ××¢×©×™×•×ª.

See Also
--------

- :mod:`related_module`
- :doc:`../guides/related_guide`
```

---

## ğŸ’¡ ×˜×™×¤ ×—×©×•×‘ ×œ×¡×•×›× ×™ AI

### ×¦×•×¨ ×§×•×‘×¥ `docs/ai-developer-guide.rst`

**×ª×•×›×Ÿ ××•×¦×¢:**

```rst
××“×¨×™×š ××”×™×¨ ×œ×¡×•×›× ×™ AI ×•××¤×ª×—×™×
==============================

××¡××š ×–×” ××¡×¤×§ ×¡×§×™×¨×” ××”×™×¨×” ×œ××¦×™××ª ××™×“×¢ ×‘×¤×¨×•×™×§×˜.

××™×¤×” ×œ××¦×•× ××”?
---------------

**×¨×•×¦×” ×œ×”×•×¡×™×£ ×¤×™×¦'×¨ ×—×“×©?**
â†’ ×§×¨×: :doc:`development` â†’ "Adding a new feature"

**×¨×•×¦×” ×œ×ª×§×Ÿ ×‘××’?**
â†’ ×§×¨×: :doc:`troubleshooting` â†’ ××¦× ××ª ×”×©×’×™××”

**×¨×•×¦×” ×œ×”×‘×™×Ÿ ××ª ×”××¨×›×™×˜×§×˜×•×¨×”?**
â†’ ×§×¨×: :doc:`architecture` â†’ ×ª×¨×©×™××™× ×•×–×¨×™××•×ª

**×¨×•×¦×” ×œ×”×¨×™×¥ ×˜×¡×˜×™×?**
â†’ ×§×¨×: :doc:`testing` â†’ Quick Start

**×¨×•×¦×” ×œ×¤×¨×•×¡?**
â†’ ×§×¨×: :doc:`installation` â†’ Deployment Options

××•×¡×›××•×ª ×”×¤×¨×•×™×§×˜
-----------------

Naming Conventions
~~~~~~~~~~~~~~~~~~

- Files: ``snake_case.py``
- Classes: ``PascalCase``
- Functions: ``snake_case()``
- Constants: ``UPPER_CASE``
- Private: ``_leading_underscore()``

Code Style
~~~~~~~~~~

- Follow PEP 8
- Use type hints
- Docstrings: Google style
- Max line length: 100
- Use Black for formatting

Structure
~~~~~~~~~

::

   handlers/        # Telegram handlers
   services/        # Business logic
   database/        # Database models & managers
   webapp/          # Flask web app
   tests/          # All tests
   docs/           # Documentation

×“×•×’×××•×ª ×œ×©×™× ×•×™×™× × ×¤×•×¦×™×
-------------------------

×”×•×¡×¤×ª ×¤×§×•×“×” ×—×“×©×” ×œ×‘×•×˜
~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # 1. handlers/my_handler.py
   async def my_command(update, context):
       await update.message.reply_text("Hello!")
   
   # 2. main.py
   from handlers.my_handler import my_command
   app.add_handler(CommandHandler("mycommand", my_command))
   
   # 3. tests/test_my_handler.py
   @pytest.mark.asyncio
   async def test_my_command():
       # test implementation

×”×•×¡×¤×ª endpoint ×œ-WebApp
~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # webapp/app.py
   @app.route('/my-endpoint')
   @login_required
   def my_endpoint():
       return render_template('my_template.html')

Checklist ×œ×¤× ×™ PR
------------------

- [ ] ×”×§×•×“ ×¢×•×‘×¨ ``pytest``
- [ ] ×”×§×•×“ ×¢×•×‘×¨ ``black --check .``
- [ ] ×”×§×•×“ ×¢×•×‘×¨ ``mypy .``
- [ ] Coverage > 80%
- [ ] ×¢×“×›× ×ª×™ docstrings
- [ ] ×¢×“×›× ×ª×™ ``CHANGELOG.md``
- [ ] ×‘×“×§×ª×™ ×©-CI ×¢×•×‘×¨
- [ ] ×‘×™×¦×¢×ª×™ self-review
- [ ] ×ª×™×¢×“×ª×™ breaking changes (×× ×™×©)
```

---

## ğŸ“Š ×¡×™×›×•× ×¢×“×™×¤×•×™×•×ª ××¢×•×“×›×Ÿ

### ğŸ”´ ×¢×“×™×¤×•×ª ×’×‘×•×”×” - ×§×¨×™×˜×™ (×—×¡×¨ ×œ×’××¨×™!)

| # | ××¡××š | ×–××Ÿ ××©×•×¢×¨ | ×”×©×¤×¢×” | ×”×¢×¨×•×ª |
|---|------|-----------|--------|-------|
| 1 | **Quickstart ×›×¤×•×œ (××¤×ª×—×™× + AI)** | 3 ×©×¢×•×ª | â­â­â­â­â­ | **v3!** × ×§×•×“×ª ×›× ×™×¡×” ××”×™×¨×” |
| 2 | **×”× ×—×™×•×ª ××œ××•×ª ×œ×¡×•×›× ×™ AI** | 5 ×©×¢×•×ª | â­â­â­â­â­ | **v3!** ×× ×™×¢×ª ×ª×§×œ×•×ª |
| 3 | Contributing Guide + .env.example | 5 ×©×¢×•×ª | â­â­â­â­â­ | ×›×•×œ×œ × ×ª×™×‘×™ tmp, ×¡×’× ×•×Ÿ |
| 4 | Architecture + Botâ†”WebApp | 6 ×©×¢×•×ª | â­â­â­â­â­ | ×”×‘× ×ª ×”××¢×¨×›×ª ×›×•×œ×” |
| 5 | **Database Schema** | 5 ×©×¢×•×ª | â­â­â­â­â­ | **v2!** ×—×¡×¨ ×œ×’××¨×™ |
| 6 | **Conversation Handlers/States** | 4 ×©×¢×•×ª | â­â­â­â­â­ | **v2!** ×—×¡×¨ ×œ×’××¨×™ |
| 7 | Testing + Mocking + safe_rmtree | 5 ×©×¢×•×ª | â­â­â­â­â­ | ×›×•×œ×œ ×¢×‘×•×“×” ×‘-tmp |
| 8 | WebApp API Reference | 4 ×©×¢×•×ª | â­â­â­â­ | Endpoints + schemas |
| 9 | Environment Variables + .env.example | 3 ×©×¢×•×ª | â­â­â­â­ | ××§×•×¨ ××§×™×£ + ×˜××¤×œ×˜ |

**×¡×™×›×•× ××©× ×™:** ~40 ×©×¢×•×ª | **×ª×•×¢×œ×ª:** ×§×¨×™×˜×™ ×œ×¢×‘×•×“×” ×‘×¡×™×¡×™×ª ×¢×œ ×”×¤×¨×•×™×§×˜

---

### ğŸŸ¡ ×¢×“×™×¤×•×ª ×‘×™× ×•× ×™×ª-×’×‘×•×”×” - ×—×©×•×‘ ×××•×“

| # | ××¡××š | ×–××Ÿ ××©×•×¢×¨ | ×”×©×¤×¢×” | ×”×¢×¨×•×ª |
|---|------|-----------|--------|-------|
| 8 | Troubleshooting | 3 ×©×¢×•×ª | â­â­â­â­ | ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª × ×¤×•×¦×•×ª |
| 9 | Development Workflow | 3 ×©×¢×•×ª | â­â­â­ | ××™×š ×œ×”×•×¡×™×£ ×¤×™×¦'×¨×™× |
| 10 | Security + CSRF | 5 ×©×¢×•×ª | â­â­â­â­ | **××•×¨×—×‘!** ×›×•×œ×œ CSRF |
| 11 | Performance Guide | 3 ×©×¢×•×ª | â­â­â­ | ××•×¤×˜×™××™×–×¦×™×•×ª |
| 12 | Migration Guide | 2 ×©×¢×•×ª | â­â­ | ×©×“×¨×•×’×™ ×’×¨×¡××•×ª |
| 13 | **Integrations ××¤×•×¨×˜** | 6 ×©×¢×•×ª | â­â­â­â­ | **×—×“×©!** OAuth, Webhooks vs Polling |

**×¡×™×›×•× ××©× ×™:** ~22 ×©×¢×•×ª | **×ª×•×¢×œ×ª:** ×©×™×¤×•×¨ ××©××¢×•×ª×™ ×‘×—×•×•×™×™×ª ×”××¤×ª×—

---

### ğŸŸ¢ ×¢×“×™×¤×•×ª × ××•×›×” - ×›×œ×™× ××¢×©×™×™×

| # | ××¡××š | ×–××Ÿ ××©×•×¢×¨ | ×”×©×¤×¢×” | ×”×¢×¨×•×ª |
|---|------|-----------|--------|-------|
| 14 | **Quick Start (×¢××•×“ ××—×“)** | 2 ×©×¢×•×ª | â­â­â­â­ | **×—×“×©!** ×›× ×™×¡×” ××”×™×¨×” |
| 15 | **Swagger/OpenAPI** | 4 ×©×¢×•×ª | â­â­â­ | **×—×“×©!** ×ª×™×¢×•×“ ××™× ×˜×¨××§×˜×™×‘×™ |
| 16 | **Postman Collection** | 2 ×©×¢×•×ª | â­â­â­ | **×—×“×©!** ×“×•×’×××•×ª ××•×›× ×•×ª |
| 17 | FAQ | 2 ×©×¢×•×ª | â­â­ | ×©××œ×•×ª × ×¤×•×¦×•×ª |
| 18 | Code of Conduct | 1 ×©×¢×” | â­â­ | ×”×ª× ×”×’×•×ª ×§×”×™×œ×” |
| 19 | Changelog | 1 ×©×¢×” | â­â­ | ×”×™×¡×˜×•×¨×™×™×ª ×’×¨×¡××•×ª |
| 20 | Roadmap | 2 ×©×¢×•×ª | â­â­ | ×ª×›× ×•×Ÿ ×¢×ª×™×“×™ |
| 21 | AI Developer Guide | 3 ×©×¢×•×ª | â­â­â­â­ | ××“×¨×™×š ××”×™×¨ ×œAI |
| 22 | Video Tutorials | 8 ×©×¢×•×ª | â­â­â­ | ×¡×¨×˜×•× ×™ ×”×“×¨×›×” |
| 23 | Sequence Diagrams | 3 ×©×¢×•×ª | â­â­â­ | ×ª×¨×©×™××™ ×–×¨×™××” |

**×¡×™×›×•× ××©× ×™:** ~28 ×©×¢×•×ª | **×ª×•×¢×œ×ª:** × ×•×—×•×ª ×•× ×’×™×©×•×ª

---

## ğŸ“ˆ ×¡×™×›×•× ×›×œ×œ×™

| ×§×˜×’×•×¨×™×” | ××¡×¤×¨ ××¡××›×™× | ×–××Ÿ ×›×•×œ×œ | ×¢×“×™×¤×•×ª |
|----------|-------------|----------|---------|
| ğŸ”´ ×§×¨×™×˜×™ | 9 | ~40 ×©×¢×•×ª | **×”×ª×—×œ ×›××Ÿ!** |
| ğŸŸ¡ ×—×©×•×‘ | 6 | ~22 ×©×¢×•×ª | ×œ××—×¨ ×”×§×¨×™×˜×™×™× |
| ğŸŸ¢ × ×•×¡×£ | 10 | ~28 ×©×¢×•×ª | ×‘×”×“×¨×’×” |
| **×¡×”"×›** | **25** | **~90 ×©×¢×•×ª** | |

---

## ğŸ¯ ×ª×›× ×™×ª ×¤×¢×•×œ×” ××•××œ×¦×ª

### ×©×œ×‘ 1: × ×§×•×“×ª ×›× ×™×¡×” (×©×‘×•×¢ 1) - **×”×ª×—×œ ×›××Ÿ!**
1. âœ… **Quickstart ×›×¤×•×œ** (××¤×ª×—×™× + AI) â† **×”×›×™ ×—×©×•×‘!**
2. âœ… **×”× ×—×™×•×ª ×œ×¡×•×›× ×™ AI** â† **×§×¨×™×˜×™ ×œ×× ×™×¢×ª ×ª×§×œ×•×ª!**
3. âœ… Architecture + Botâ†”WebApp

**×ª×•×¦××”:** ×›×œ ××—×“ ×™×›×•×œ ×œ×”×ª×—×™×œ ×œ×¢×‘×•×“ ××™×™×“×™×ª ×œ×œ× ×ª×§×œ×•×ª

### ×©×œ×‘ 2: ×™×¡×•×“×•×ª (×©×‘×•×¢ 2-3)
4. âœ… Database Schema
5. âœ… Conversation Handlers/States
6. âœ… Environment Variables + .env.example
7. âœ… Contributing Guide

**×ª×•×¦××”:** ××¤×ª×—×™× ××‘×™× ×™× ××ª ×”××¢×¨×›×ª ×•×™×•×“×¢×™× ×œ×ª×¨×•×

### ×©×œ×‘ 3: ×‘×“×™×§×•×ª ×•××™×›×•×ª (×©×‘×•×¢ 4)
8. âœ… Testing + Mocking + safe_rmtree
9. âœ… Development Workflow
10. âœ… WebApp API Reference

**×ª×•×¦××”:** ×§×•×“ ××™×›×•×ª×™ ×¢× ×˜×¡×˜×™×

### ×©×œ×‘ 3: ××™× ×˜×’×¨×¦×™×•×ª (×©×‘×•×¢ 5)
9. âœ… Integrations (OAuth, Webhooks)
10. âœ… WebApp API Reference
11. âœ… Security + CSRF

**×ª×•×¦××”:** ×¤×™×ª×•×— ×××•×‘×˜×— ×•××©×•×œ×‘

### ×©×œ×‘ 4: ×›×œ×™× ×•× ×™×˜×•×— (×©×‘×•×¢ 6-7)
12. âœ… Swagger/OpenAPI
13. âœ… Postman Collection
14. âœ… Troubleshooting
15. âœ… Performance Guide
16. âœ… AI Developer Guide

**×ª×•×¦××”:** ×—×•×•×™×™×ª ××¤×ª×— ××¢×•×œ×”

### ×©×œ×‘ 5: ×ª×—×–×•×§×” (××ª××©×š)
17. âœ… FAQ
18. âœ… Changelog
19. âœ… Migration Guide
20. âœ… ×›×œ ×”×©××¨...

**×ª×•×¦××”:** ×ª×™×¢×•×“ ×©××•×¨ ×•××¢×•×“×›×Ÿ

---

## ğŸ’¡ ×¢×¦×•×ª ×™×™×©×•×

1. **×”×ª×—×œ ×§×˜×Ÿ:** ×›×ª×•×‘ ×’×¨×¡×” ×‘×¡×™×¡×™×ª ×§×•×“×, ×©×¤×¨ ××—×¨ ×›×š
2. **×”×¢×ª×§ ××”×§×•×“:** ×§×— ×“×•×’×××•×ª ×××™×ª×™×•×ª ××”×¤×¨×•×™×§×˜
3. **×‘×§×© feedback:** ×©×ª×£ ×¢× ××¤×ª×—×™× ×•×¡×•×›× ×™ AI
4. **×¢×“×›×Ÿ ×›×œ PR:** ×›×œ ×¤×™×¦'×¨ ×—×“×© = ×¢×“×›×•×Ÿ ×ª×™×¢×•×“
5. **××•×˜×•××˜:** CI ×©×‘×•×“×§ ×©×”×ª×™×¢×•×“ × ×‘× ×” ×‘×”×¦×œ×—×”

**×”××œ×¦×”:** ×”×ª×—×œ ××”××¡××›×™× ×”××¡×•×× ×™× ×‘×¢×“×™×¤×•×ª ×’×‘×•×”×”, ×”× ×™×ª× ×• ××ª ×”×¢×¨×š ×”×’×“×•×œ ×‘×™×•×ª×¨ ××™×“!

---

## ğŸš€ ×¦×¢×“×™× ×”×‘××™×

1. **×ª×¢×“×•×£:** ×§×‘×¢ ××™×œ×• ××¡××›×™× ×”×›×™ ×§×¨×™×˜×™×™× ×œ×¦×¨×›×™× ×©×œ×š
2. **×”×§×¦××”:** ×”×§×¦×” ×–××Ÿ ×•××©××‘×™× ×œ×™×¦×™×¨×ª ×”××¡××›×™×
3. **×™×¦×™×¨×”:** ×¦×•×¨ ××ª ×”××¡××›×™× ×‘×”×“×¨×’×” (××¤×©×¨ ×œ×”×ª×—×™×œ ×¢× ×’×¨×¡××•×ª ×‘×¡×™×¡×™×•×ª)
4. **×¡×§×™×¨×”:** ×‘×§×© feedback ×××¤×ª×—×™× ×•××©×ª××©×™ AI
5. **×©×™×¤×•×¨:** ×¢×“×›×Ÿ ×•×©×¤×¨ ××ª ×”××¡××›×™× ×‘×”×ª×× ×œ×¦×•×¨×š
6. **×ª×—×–×•×§×”:** ×§×‘×¢ ×ª×”×œ×™×š ×œ×¢×“×›×•×Ÿ ×”×ª×™×¢×•×“ ×¢× ×›×œ ×©×™× ×•×™ ××©××¢×•×ª×™

---

## ğŸ“ ×™×¦×™×¨×ª ×§×©×¨

×©××œ×•×ª ×¢×œ ×”××¡××š ×”×–×” ××• ×¢×œ ×”×ª×™×¢×•×“?
- ×¤×ª×— Issue ×‘-GitHub
- ×¦×•×¨ ×§×©×¨ ×“×¨×š ×”×‘×•×˜
- ×§×‘×•×¦×ª Telegram: [https://t.me/+nh9skKRgTEVkZmJk](https://t.me/+nh9skKRgTEVkZmJk)

---

## âœ¨ ××” ×”×ª×•×•×¡×£ - ×”×™×¡×˜×•×¨×™×™×ª ×’×¨×¡××•×ª

### ğŸ‰ ×’×¨×¡×” 3.0 (2025-10-10) - ×“×’×© ×¢×œ ×¡×•×›× ×™ AI

**×ª×•×¡×¤×•×ª ××”×™×¨×•×ª ×¢×‘×•×“×” ×•×–×™×¨×•×– ×¤×™×ª×•×—:**

#### ğŸ†• ×¡×¢×™×¤×™× ×—×“×©×™× ×§×¨×™×˜×™×™×

1. **ğŸš€ Quickstart ×›×¤×•×œ (×¡×¢×™×£ 1)** - **×”×›×™ ×—×©×•×‘!**
   - Quickstart ×œ××¤×ª×—×™× (3 ×¦×¢×“×™×)
   - **Quickstart ×œ×¡×•×›× ×™ AI** (×—×“×©!) - ×¢×§×¨×•× ×•×ª ×¢×‘×•×“×” ×§×¨×™×˜×™×™×
   - ××” ××¡×•×¨ ×•××” ××•×ª×¨
   - ×¤×•×¨××˜×™ ×¦×™×˜×•×˜ ×§×•×“
   
2. **ğŸ¤– ×”× ×—×™×•×ª ××œ××•×ª ×œ×¡×•×›× ×™ AI (×¡×¢×™×£ 2)** - **×§×¨×™×˜×™ ×œ×× ×™×¢×ª ×ª×§×œ×•×ª!**
   - ××’×‘×œ×•×ª ×”×¨×¦×” (sudo, ×ª×”×œ×™×›×™× ××¨×•×›×™×, ××™× ×˜×¨××§×˜×™×‘×™)
   - ×›×œ×™ ×§×‘×¦×™× ×××•×©×¨×™× (Read, LS, Grep, Glob)
   - ×¢×§×¨×•× ×•×ª ×¢×¨×™×›×ª ×§×•×“ (guard clauses, ×œ×œ× try/except ××™×•×ª×¨)
   - ×¤×•×¨××˜×™ ×¦×™×˜×•×˜ (CODE REFERENCE vs. code blocks)
   - ×§×•××™×˜×™× (HEREDOC, Conventional Commits)
   - ×¢×‘×•×“×” ×¢× ×˜×¡×˜×™× (tmp_path ×‘×œ×‘×“!)
   - **safe_rmtree** - ××—×™×§×” ×‘×˜×•×—×”
   - **safe_edit** - ×¢×¨×™×›×ª ×”×•×“×¢×•×ª ×˜×œ×’×¨× ×‘×˜×•×—×”
   - ××“×™× ×™×•×ª CI ×§×©×™×—×”
   - ×¡×•×“×•×ª ×•×¤×¨×˜×™×•×ª

#### ğŸ”§ ×”×¨×—×‘×•×ª ××©××¢×•×ª×™×•×ª

3. **Contributing Guide** - ×”×•×¨×—×‘ ×¢×:
   - ×¡×’× ×•×Ÿ ×§×•×“ (×©××•×ª, guard clauses)
   - × ×ª×™×‘×™ tmp ×—×•×‘×”
   - .env.example ××œ×
   
4. **Testing** - ×”×•×¨×—×‘ ×¢×:
   - safe_rmtree ×‘×¤×™×¨×•×˜
   - ×—×•×‘×ª ×¢×‘×•×“×” ×‘-tmp_path
   - ×“×•×’×××•×ª × ×•×¡×¤×•×ª

#### ğŸ“Š ×¢×“×›×•× ×™×

- âœ… **25 ××¡××›×™×** (×”×™×• 23)
- âœ… **~90 ×©×¢×•×ª** (×”×™×• ~79)
- âœ… ×ª×›× ×™×ª ×¤×¢×•×œ×” ××¢×•×“×›× ×ª: 5 ×©×œ×‘×™× ×¢× ×“×’×© ×¢×œ AI
- âœ… ×˜×‘×œ××•×ª ×¢×“×™×¤×•×™×•×ª ××¢×•×“×›× ×•×ª

---

### ğŸ ×’×¨×¡×” 2.0 (2025-10-10) - ××‘× ×” ×•××™× ×˜×’×¨×¦×™×•×ª

**×ª×•×¡×¤×•×ª ××”×¡×™×›×•× ×”×©× ×™:**

#### ğŸ†• ×¡×¢×™×¤×™× ×—×“×©×™×

1. **ğŸ—„ï¸ Database Schema** - ×§×¨×™×˜×™!
   - ××‘× ×” ×›×œ ×”×§×•×œ×§×¦×™×•×ª ×‘-MongoDB
   - ××™× ×“×§×¡×™× × ×“×¨×©×™×
   - ×§×©×¨×™× ×‘×™×Ÿ ×§×•×œ×§×¦×™×•×ª
   - ×“×•×’×××•×ª ×©××™×œ×ª×•×ª
   
2. **ğŸ”„ State Machine & Conversation Handlers** - ×§×¨×™×˜×™!
   - ×¨×©×™××ª ×›×œ ×”-states
   - ×ª×¨×©×™××™ ××¦×‘×™×
   - × ×™×”×•×œ context data
   
3. **ğŸ”— ×ª×™×¢×•×“ ××™× ×˜×’×¨×¦×™×•×ª ××¤×•×¨×˜**
   - OAuth Flow ××œ× ×œGoogle Drive
   - Webhooks vs Polling (×˜×œ×’×¨×)
   - GitHub API ×¤×™×¨×•×˜

4. **ğŸš€ Quick Start Guide**
   - ×¢××•×“ ××—×“ ×œ×”×ª×—×œ×” ××”×™×¨×”
   
5. **ğŸ“¡ Swagger/OpenAPI**
   - ×ª×™×¢×•×“ ××™× ×˜×¨××§×˜×™×‘×™
   
6. **ğŸ“® Postman Collection**
   - ×“×•×’×××•×ª ××•×›× ×•×ª ×œ×©×™××•×©

#### ğŸ”§ ×”×¨×—×‘×•×ª

7. **Testing** + Mocking Telegram API
8. **Security** + CSRF Protection
9. **Architecture** + ×”×“×’×©×ª Botâ†”WebApp

---

### ğŸ“ ×’×¨×¡×” 1.0 (2025-10-10) - ×’×¨×¡×” ×¨××©×•× ×™×ª

15 ××¡××›×™× ×‘×¡×™×¡×™×™×, ~45 ×©×¢×•×ª

---

## ğŸ¯ ×¡×™×›×•× ×”×©×™× ×•×™×™× ×‘×™×Ÿ ×’×¨×¡××•×ª

| ×’×¨×¡×” | ××¡××›×™× | ×©×¢×•×ª | ×—×™×“×•×©×™× ×¢×™×§×¨×™×™× |
|------|---------|------|------------------|
| 1.0 | 15 | ~45 | ×‘×¡×™×¡ ×”×ª×™×¢×•×“ |
| 2.0 | 23 | ~79 | Database, States, Integrations |
| **3.0** | **25** | **~90** | **ğŸ¤– Quickstart AI, ×”× ×—×™×•×ª AI, safe_* utils** |

**ğŸ“Œ ×”×”×‘×“×œ ×”××¨×›×–×™ ×‘v3.0:** ×“×’×© ×—×–×§ ×¢×œ **×¡×•×›× ×™ AI** - ××™×š ×”× ×¦×¨×™×›×™× ×œ×¢×‘×•×“ × ×›×•×Ÿ, ××” ××¡×•×¨, ××” ××•×ª×¨, ×¤×•×¨××˜×™×, ×›×œ×™× ×××•×©×¨×™×.

---

**ğŸ“ ×¢×“×›×•×Ÿ ××—×¨×•×Ÿ:** 2025-10-10  
**ğŸ”„ ×’×¨×¡×”:** 3.0 (×“×’×© AI + ×–×™×¨×•×– ×¢×‘×•×“×”)  
**âœï¸ × ×•×¦×¨ ×¢×‘×•×¨:** CodeBot & WebApp  
**ğŸ¯ ××˜×¨×”:** ×©×™×¤×•×¨ ×”×ª×™×¢×•×“ ×œ××¤×ª×—×™× ×•×¡×•×›× ×™ AI  
**ğŸ™ ×ª×•×“×•×ª:** ×œ-3 ×”×¡×™×›×•××™× ×©×”×¢×©×™×¨×• ××ª ×”××¡××š!
