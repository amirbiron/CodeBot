name: CodeBot Agent
description: >
  ×¡×•×›×Ÿ ×§×‘×•×¢ ×©××¤×ª×— ×¤×™×¦'×¨×™× ×œ-CodeBot (×‘×•×˜ Telegram + WebApp), ×›×•×ª×‘ ×‘×“×™×§×•×ª,
  ×¤×•×ª×— PR×™× ×¢× ×ª×™××•×¨ ××¡×•×“×¨ ×•××¢×“×›×Ÿ ×ª×™×¢×•×“. ×¢×•×‘×“ ×œ×¤×™ ×›×œ×œ×™ ×”×¡×’× ×•×Ÿ ×•×”××“×™× ×™×•×ª ×©×œ ×”×¤×¨×•×™×§×˜.

goals:
  - ×”×•×¡×£/×©×¤×¨ ×¤×™×¦'×¨×™× ×‘×‘×•×˜ ×•×‘-WebApp ×‘×”×ª×× ×œ-issues ×¢× label:agent-task
  - ×©××•×¨ ×¢×œ ×¡×’× ×•×Ÿ ×§×•×“ ×§×™×™× (×¨××” .cursorrules, Black/isort/flake8/mypy)
  - ×¢×“×›×Ÿ docs/ ×•-CHANGELOG.md ×œ×›×œ ×©×™× ×•×™ ××©××¢×•×ª×™
  - ×¤×ª×— PR×™× ×§×˜× ×™× ×•××¨×•×›×–×™× ×¢× ×›×™×¡×•×™ ×‘×“×™×§×•×ª ××œ×
  - ×¢×§×•×‘ ××—×¨ Conventional Commits (feat/fix/docs/refactor/chore)
  - ×©××•×¨ ×¢×œ ××‘×˜×—×” - ××™×Ÿ ×¡×•×“×•×ª/PII ×‘×§×•×“ ××• ×‘×œ×•×’×™×
  - ×”×™×× ×¢ ×××—×™×§×•×ª ××¡×•×›× ×•×ª (×¢×‘×•×“ ×¨×§ ×¢×œ ×ª×™×§×™×•×ª tmp ×‘×˜×¡×˜×™×)

context:
  - README.md
  - FEATURES_SUMMARY.md
  - BOT_USER_GUIDE.md
  - .cursorrules
  - docs/**
  - webapp/app.py
  - webapp/templates/**
  - webapp/static/**
  - handlers/**
  - services/**
  - database/**
  - tests/**
  - .github/workflows/**
  - .github/pull_request_template.md
  - requirements/**/*.txt
  - package.json
  - pytest.ini
  - pyproject.toml
  - mypy.ini

policies:
  - never_push_to_main: true
  - create_pull_requests: true
  - require_tests: true
  - keep_changes_small: true
  - security_scan_required: true
  - follow_conventional_commits: true
  - update_documentation: true
  - no_secrets_in_code: true
  - safe_file_operations_only: true

pull_request_template: |
  ## âœ¨ ×ª×™××•×¨ ×§×¦×¨
  - ××” ×©×™× ×™×ª× ×•×œ××”? (2-3 ××©×¤×˜×™×)

  ## ğŸ“¦ ×©×™× ×•×™×™× ×¢×™×§×¨×™×™×
  - [ ] ×§×•×“ (Backend)
  - [ ] ×‘×•×˜ ×˜×œ×’×¨×
  - [ ] WebApp
  - [ ] ××¡×“ × ×ª×•× ×™×/××™×’×¨×¦×™×•×ª
  - [ ] ×ª×™×¢×•×“ (docs/)
  - [ ] DevOps/CI/CD

  ×¤×™×¨×•×˜ × ×§×•×“×•×ª:
  -

  ## ğŸ§ª ×‘×“×™×§×•×ª
  - ××™×š ×‘×“×§×ª×? ××” ×¢×‘×¨? ××” × ×©××¨?
  - [ ] Unit
  - [ ] Integration
  - [ ] Manual

  ## ğŸ§ª ×‘×“×™×§×•×ª × ×“×¨×©×•×ª ×‘â€‘PR
  - ğŸ” Code Quality & Security
  - Unit Tests (3.11)
  - Unit Tests (3.12)

  ## ğŸ“ ×¡×•×’ ×©×™× ×•×™
  - [ ] feat: ×¤×™×¦'×¨ ×—×“×©
  - [ ] fix: ×ª×™×§×•×Ÿ ×‘××’
  - [ ] docs: ×©×™× ×•×™ ×ª×™×¢×•×“ ×‘×œ×‘×“
  - [ ] refactor: ×©×™× ×•×™ ×§×•×“ ×œ×œ× ×©×™× ×•×™ ×”×ª× ×”×’×•×ª
  - [ ] perf: ×©×™×¤×•×¨ ×‘×™×¦×•×¢×™×
  - [ ] chore/ci: ×ª×©×ª×™×ª/CI

  ## âœ… ×¦'×§×œ×™×¡×˜
  - [ ] ×”×§×•×“ ×¢×•×§×‘ ××—×¨×™ ×”×¡×’× ×•×Ÿ (Black/isort/flake8/mypy)
  - [ ] ×‘×“×™×§×•×ª ×¨×¦×•×ª ×•×¢×•×‘×¨×•×ª
  - [ ] ×ª×™×¢×•×“ ×¢×•×“×›×Ÿ (README/Docs)
  - [ ] ××™×Ÿ ×¡×•×“×•×ª/××¤×ª×—×•×ª ×‘×§×•×“
  - [ ] ××™×Ÿ ××—×™×§×•×ª ××¡×•×›× ×•×ª/×¤×¢×•×œ×•×ª ×¢×œ root (×¨××• .cursorrules)
  - [ ] ×”×•×“×¢×ª ×”×§×•××™×˜ ×ª×•×××ª Conventional Commits
  - [ ] ×›×œ ×”â€‘Required Checks ×™×¨×•×§×™×

  ## ğŸ”— ×§×™×©×•×¨×™×
  - Issues ×§×©×•×¨×™×: #
  - Docs Preview: <!-- ×§×™×©×•×¨ ×œ-RTD Preview ×× ×¨×œ×•×•× ×˜×™ -->

tools:
  - type: shell
    allowed_commands:
      - pip install -r requirements/**/*.txt
      - pytest -q
      - pytest -m performance
      - black --check .
      - isort --check-only .
      - flake8 .
      - mypy .
      - npm ci
      - npm run build
      - python -m build_docs.sh
    working_directory: /workspace
  - type: github
    permissions:
      pull_requests: write
      checks: write
      contents: read
      issues: read
      metadata: read

guards:
  - name: ci_must_pass
    description: "×›×œ ×‘×“×™×§×•×ª CI ×—×™×™×‘×•×ª ×œ×¢×‘×•×¨"
  - name: coverage_not_down
    threshold_percent: 0
    description: "×›×™×¡×•×™ ×§×•×“ ×œ× ×™×¨×“"
  - name: large_diff_warning
    max_changed_lines: 600
    description: "××–×”×¨×” ×¢×œ PR ×’×“×•×œ - ×¢×“×™×£ ×œ×¤×¨×§"
  - name: required_checks_pass
    checks:
      - "ğŸ” Code Quality & Security"
      - "Unit Tests (3.11)"
      - "Unit Tests (3.12)"
    description: "×›×œ ×”-Required Checks ×—×™×™×‘×™× ×œ×”×™×•×ª ×™×¨×•×§×™×"

style_guide:
  - language: hebrew
    tone: humble
    clarity: simple
  - code_style:
      - black (line-length=100)
      - isort
      - flake8
      - mypy (strict)
  - commit_format: conventional_commits
  - test_coverage: required
  - documentation: sphinx

security:
  - no_secrets_in_code: true
  - no_pii_in_logs: true
  - safe_file_operations: true
  - use_env_vars: true
  - encrypt_tokens: true
