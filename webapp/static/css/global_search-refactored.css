/**
 * global_search-refactored.css
 * Refactored Global Search Styles
 * Uses variables.css for theming and consistency.
 */

/* 
   Structural Fixes for Main Panel 
   Ensures full height, fixed position, and no legacy backgrounds.
*/
.search-panel {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0; /* RTL supported by direction */
  height: 100vh;
  z-index: 1050; /* Above most elements */
  background-image: none !important; /* Prevent legacy gradients */
  background-color: var(--bg-app); /* Fallback/Base */
  overflow-y: auto;
  padding: 1rem;
}

#searchSuggestions {
  max-height: 300px;
  overflow-y: auto;
  position: absolute; /* ×¢×™×’×•×Ÿ ×œ×ª×™×‘×ª ×”×§×œ×˜ ×›×“×™ ×©×œ× "×™×‘×¨×—" ×©×××œ×” */
  top: calc(100% + 6px);
  left: 0; 
  right: 0;
  z-index: 1000;
  background: var(--bg-card); /* Replaced #fff */
  border: 1px solid var(--glass-border); /* Replaced rgba(0,0,0,0.1) */
  border-radius: 8px;
  box-shadow: var(--shadow-card); /* Replaced 0 4px 12px ... */
}

/* --- ×ª×™×‘×•×ª ×—×™×¤×•×© ××¢×•×¦×‘×•×ª ×‘×¡×’× ×•×Ÿ "××•×¡×£ ×”×§×”×™×œ×”" --- */
.search-box-wrapper {
  position: relative;
  width: 100%;
}

.search-box {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 0.9rem; /* ××¨×—×‘ ×œ××™×™×§×•×Ÿ ××¦×“ ×™××™×Ÿ (RTL) ×•×œ×©×•×œ×™×™× ××©×××œ */
  border-radius: 10px; /* ×™×™×©×•×¨ ×œ×¢×™×¦×•×‘ ×©×œ ×ª×™×‘×ª ×”×—×™×¤×•×© ×”×ª×—×ª×•× ×” */
  border: 1px solid var(--glass-border);
  background: var(--glass-normal); /* Replaced var(--bg-tertiary) */
  color: var(--text-main); /* Replaced var(--text-primary) */
  font-size: 1rem;
  outline: none;
  transition: background .2s ease, border-color .2s ease, box-shadow .2s ease;
  box-sizing: border-box;
}

.search-box::placeholder { 
  color: var(--text-muted); 
}

.search-box:focus {
  background: var(--glass-strong); /* Replaced var(--bg-secondary) */
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--glass-subtle); /* Replaced var(--glass-hover) */
}

.search-icon {
  position: absolute;
  right: 12px; /* RTL: ××™×™×§×•×Ÿ ×‘×ª×—×™×œ×ª ×”×©×•×¨×” */
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  pointer-events: none;
}

.clear-search-btn {
  position: absolute;
  left: 10px; /* RTL: ×›×¤×ª×•×¨ × ×™×§×•×™ ×‘×§×¦×” ×©×××œ×™ */
  top: 50%;
  transform: translateY(-50%);
  width: 28px; 
  height: 28px;
  display: none; /* ××•×¦×’ ×¨×§ ×›×©×™×© ×˜×§×¡×˜ */
  align-items: center; 
  justify-content: center;
  border: none; 
  border-radius: 50%;
  background: var(--glass-normal); /* Replaced var(--glass) */
  color: var(--text-main); /* Replaced var(--text-primary) */
  cursor: pointer;
  transition: background .2s ease;
}

.clear-search-btn:hover { 
  background: var(--glass-subtle); /* Replaced var(--glass-hover) */
}

/* ×¨×©×™××ª ×ª×•×¦××•×ª */
.global-search-results {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
  width: 100%;
  padding: 0;
}

.results-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
}

/* ×›×¨×˜×™×¡ ×ª×•×¦××ª ×—×™×¤×•×© */
.search-result-card {
  width: 100%;
  margin: 0 auto;
  padding: 1.5rem;
  border-radius: 18px;
  border: 1px solid var(--glass-border); /* Replaced var(--search-card-border) */
  background: var(--bg-card); /* Replaced var(--search-card-bg) */
  box-shadow: var(--shadow-card); /* Replaced var(--search-card-shadow) */
  backdrop-filter: blur(24px);
  color: var(--text-main); /* Replaced var(--text-primary) */
  transition: border-color .2s ease, box-shadow .2s ease, transform .2s ease;
  overflow: hidden;
}

.search-result-card:hover {
  border-color: var(--primary); /* Replaced var(--search-card-hover-border) */
  box-shadow: var(--shadow-overlay); /* Replaced var(--search-card-shadow-hover) */
  transform: translateY(-2px);
}

.result-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 1.15rem;
  flex-wrap: wrap;
}

.file-info {
  display: flex;
  align-items: center;
  gap: 0.85rem;
  min-width: 0;
  flex: 1;
}

.file-icon {
  font-size: 1.75rem;
  flex-shrink: 0;
}

.file-name {
  color: var(--text-main); /* Replaced var(--text-primary) */
  font-weight: 600;
  font-size: 1.15rem;
  text-decoration: none;
  overflow-wrap: break-word;
  word-break: break-word;
  max-width: 100%;
}

.file-name:hover,
.file-name:focus {
  color: var(--primary);
}

.search-result-card .global-search-lang-badge {
  flex-shrink: 0;
  order: 1;
}

.result-card-header .file-info {
  order: 2;
  text-align: left;
}

.result-card-snippet {
  background: var(--code-bg); /* Replaced var(--search-code-bg) */
  border: 1px solid var(--glass-border); /* Replaced var(--search-code-border) */
  border-radius: 12px;
  padding: 1rem 1.15rem;
  margin-bottom: 1.15rem;
  overflow: auto;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
}

.result-card-snippet pre {
  margin: 0;
  font-family: 'Fira Code', Consolas, Monaco, 'Courier New', monospace;
  font-size: 0.95rem;
  line-height: 1.55;
  color: var(--code-text); /* Replaced var(--search-code-text) */
  direction: ltr;
  text-align: left;
  white-space: pre-wrap;
  word-break: break-word;
}

.result-card-snippet code {
  background: none;
  color: inherit;
  padding: 0;
  font-family: inherit;
}

/* Syntax Highlighting using global variables */
.result-card-snippet .keyword { color: var(--syntax-keyword); }
.result-card-snippet .string { color: var(--syntax-string); }
.result-card-snippet .function { color: var(--syntax-function); }
.result-card-snippet .comment { color: var(--syntax-comment); }
.result-card-snippet .number { color: var(--syntax-number); }
.result-card-snippet .operator { color: var(--syntax-operator); }
.result-card-snippet .variable { color: var(--syntax-variable); }

.result-card-footer {
  display: flex;
  flex-wrap: wrap;
  gap: 0.85rem 1.5rem;
  border-top: 1px solid var(--glass-border); /* Replaced var(--search-card-border) */
  padding-top: 0.9rem;
  font-size: 0.9rem;
  color: var(--text-muted); /* Replaced var(--search-meta-text) */
  direction: ltr;
  justify-content: flex-start;
  text-align: left;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
}

.meta-item svg {
  width: 16px;
  height: 16px;
  opacity: 0.78; /* Replaced var(--search-meta-icon-opacity) */
}

.result-card-snippet ::-webkit-scrollbar {
  height: 8px;
}
.result-card-snippet ::-webkit-scrollbar-track {
  background: color-mix(in srgb, var(--glass-border) 35%, transparent); /* Replaced var(--search-code-border) */
  border-radius: 4px;
}
.result-card-snippet ::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--code-text) 25%, transparent); /* Replaced var(--search-code-text) */
  border-radius: 4px;
}

.global-search-highlight {
  background: color-mix(in srgb, var(--primary) 40%, transparent); /* Replaced var(--search-highlight-bg) - using primary with opacity */
  color: var(--text-main); /* Replaced var(--search-highlight-text) */
  padding: 0 2px;
  border-radius: 3px;
  font-weight: 600;
  box-shadow: 0 0 6px color-mix(in srgb, var(--primary) 50%, transparent); /* Replaced var(--search-highlight-glow) */
}

/* ××™×›×œ ×¨××©×™ ×œ×—×™×¤×•×© ×•×¤×™×œ×˜×¨×™× */
.search-and-filters {
  width: 100%;
  max-width: 1400px;
  margin: 0 auto 1rem auto;
  padding: 1rem;
  box-sizing: border-box;
}

/* ×¡×œ×§×˜×™× ×‘×—×™×¤×•×© ×”×’×œ×•×‘×œ×™ â€“ ×¢×™×¦×•×‘ ×–×”×” ×œ×¡×œ×§×˜×™× ××ª×—×ª "×©××¨ ×§×‘×¦×™×" */
.search-and-filters select.form-control {
  padding: 0.75rem;
  border-radius: 10px;
  border: 1px solid var(--glass-border);
  background: var(--glass-normal); /* Replaced var(--bg-tertiary) */
  color: var(--text-main); /* Replaced var(--text-primary) */
  font-size: 1rem;
  height: auto;
  /* ×× ×™×¢×ª ×’×œ×™×©×” ×©×œ ×”×¡×œ×§×˜ ××—×•×¥ ×œ×›×¨×˜×™×¡ */
  width: min(180px, 100%);
  max-width: 100%;
  box-sizing: border-box;
}
.search-and-filters select.form-control option { 
  background: var(--bg-card); /* Replaced var(--card-bg) */
  color: var(--text-main); /* Replaced var(--text-primary) */
}

/* ×™×™×¦×•×‘ ×¤×¨×™×¡×ª ×‘×§×¨×™ ×”×—×™×¤×•×© */
.search-and-filters .filters-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 1rem;
  width: 100%;
  /* ×‘×œ×™××” ×©×œ ×’×œ×™×œ×” ××•×¤×§×™×ª ×‘××§×¨×™ ×§×¦×” */
  overflow-x: hidden;
}

/* ×¢×™×’×•×Ÿ ×”×¡×•×’×¡×˜×™×•×ª ×œ××™×–×•×¨ ×ª×™×‘×ª ×”×—×™×¤×•×© */
.search-and-filters .col-lg-8,
.search-and-filters .col-md-8 {
  position: relative; /* ×›×“×™ ×©×”-#searchSuggestions ×™×ª××§× ×‘×™×—×¡ ×œ×¢××•×“×” */
  flex: 1 1 65%;
  min-width: 300px;
  max-width: 100%;
}
/* ×’× ×¢×‘×•×¨ ××‘× ×” col-md-12 ×©×‘×• ××©×ª××©×™× ×‘×¤×•×¢×œ */
.search-and-filters .col-md-12 { position: relative; }

.search-and-filters .col-lg-4,
.search-and-filters .col-md-4 {
  flex: 1 1 30%;
  min-width: 220px; /* ×××¤×©×¨ ×©×‘×™×¨×” ××•×§×“××ª ××¢×˜ ×™×•×ª×¨ ×›×“×™ ×œ×× ×•×¢ ×—×¨×™×’×” */
  max-width: 100%;
  min-inline-size: 0; /* ×××¤×©×¨ ×œ×”×ª×›×•×•×¥ ×‘×ª×•×š flex */
}

.search-and-filters .input-group {
  display: flex;
  gap: 0.75rem; /* ×™×•×ª×¨ ××¨×•×•×— ×‘×™×Ÿ ×”×ª×™×‘×” ×œ×›×¤×ª×•×¨ ×—×¤×© */
  align-items: center;
  width: 100%;
  margin-bottom: 0.5rem; /* ×¨×•×•×— ×× ×›×™ ×§×˜×Ÿ ××ª×—×ª ×œ×ª×™×‘×ª ×”×—×™×¤×•×© */
}

/* ×”×•×¤×š ××ª ×”-wrapper ×œ×™×œ×“ ×”-flex ×”×¨××©×™ ×›×š ×©×”×ª×™×‘×” ××™×œ××” ××ª ×”×¨×•×—×‘ */
.search-and-filters .input-group .search-box-wrapper {
  flex: 1 1 auto;
  min-width: 200px;
  max-width: 100%;
}

#globalSearchInput {
  flex: 1;
  min-width: 200px;
  max-width: 100%;
}

#searchBtn {
  white-space: nowrap;
  flex-shrink: 0;
}

/* ×§×•× ×˜×™×™× ×¨ ×”×¤×™×œ×˜×¨×™× ×”×™×× ×™: ×¨×•×•×—×™× × ×•×—×™× ×™×•×ª×¨ ×‘×™×Ÿ ×¡×œ×§×˜×™× ×•×©×•×¨×•×ª */
.filter-container {
  display: flex;
  gap: 0.75rem; /* ×¨×•×•×— ×’×“×•×œ ×™×•×ª×¨ ×‘×™×Ÿ "×ª×•×›×Ÿ" / "××¡×¤×¨ ×ª×•×¦××•×ª" / "×¨×œ×•×•× ×˜×™×•×ª" */
  row-gap: 1rem; /* ×¨×•×•×— ×× ×›×™ ×‘×™×Ÿ ×©×•×¨×•×ª ×›×©×”×¤×¨×™×˜×™× × ×©×‘×¨×™× ×œ×©×•×¨×” × ×•×¡×¤×ª (×›×•×œ×œ "×©×¤×”") */
  min-width: 0; /* ×××¤×©×¨ ×œ×™×œ×“×™× ×œ×”×ª×›×•×•×¥ ×•×œ× ×œ×¤×¨×•×¥ ×’×‘×•×œ×•×ª */
}

/* ×¢×–×•×¨ ×œ×‘×§×¨×™× ×œ× "×œ×‘×¨×•×—" ×©×××œ×” ×‘××¡×›×™× ×¦×¨×™× */
@media (max-width: 768px){
  .search-and-filters .filters-row { flex-direction: column; align-items: stretch; }
  .search-and-filters .col-lg-8,
  .search-and-filters .col-lg-4,
  .search-and-filters .col-md-8,
  .search-and-filters .col-md-4 { flex: 1 1 100%; width: 100%; max-width: 100%; min-width: 0; }
  .search-and-filters .input-group { flex-wrap: nowrap; }
  #globalSearchInput { min-width: 0; }
  .search-and-filters .input-group .search-box-wrapper { min-width: 0; }
  .filter-container { justify-content: center; margin-top: 0.5rem; }
  /* ×ª×¤×¨×™×˜ ×©×¤×•×ª: ×œ×”×ª××™× ×œ×¨×•×—×‘ ×”×–××™×Ÿ ×‘××¡×›×™× ×§×˜× ×™× */
  .lang-dropdown { max-width: calc(100vw - 2rem) !important; }
  .search-result-card { padding: 1.25rem; }
  .result-card-header { flex-direction: column; align-items: flex-start; }
  .file-info { width: 100%; }
  .result-card-footer { flex-direction: column; align-items: flex-start; }
}

.command-shortcuts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}
.command-shortcut-card {
  padding: 1rem 1.25rem;
  border-radius: 12px;
  border: 1px solid var(--glass-border);
  background: var(--glass-strong); /* Replaced var(--bg-secondary) */
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  min-height: 180px;
}
.shortcut-topline {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.shortcut-name {
  font-weight: 600;
  font-size: 1.15rem;
  margin: 0;
  word-break: break-word;
  color: var(--text-main); /* Replaced var(--text-primary) */
}
.shortcut-description {
  margin: 0;
  color: var(--text-muted);
  line-height: 1.4;
}
.shortcut-arguments {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
  align-items: center;
  font-size: 0.9rem;
  color: var(--text-main); /* Replaced var(--text-primary) */
}
.shortcut-arguments-label {
  font-weight: 600;
  margin-left: 0.25rem;
}
.shortcut-arguments code {
  background: rgba(255,255,255,0.08);
  border-radius: 6px;
  padding: 0.1rem 0.4rem;
  font-size: 0.85rem;
  direction: ltr;
}
.shortcut-actions {
  margin-top: auto;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}
.command-shortcut-card .btn {
  min-width: 120px;
  justify-content: center;
}
/* ×”×ª×××•×ª ×œ×˜××‘×œ×˜ */
@media (min-width: 769px) and (max-width: 1024px){
  .search-and-filters { padding: 1rem 1.5rem; }
}

/* ============================================
   ğŸ“± Language Badge Colors (Global Variables)
   ============================================ */

.global-search-lang-badge {
  font-size: 0.75rem;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  line-height: 1;
  transition: background .2s ease, color .2s ease, border-color .2s ease;
}

.global-search-lang-badge:empty { display: none; }

.global-search-lang-badge.lang-js { background: color-mix(in srgb, var(--lang-js) 15%, transparent); color: var(--lang-js); border: 1px solid color-mix(in srgb, var(--lang-js) 30%, transparent); }
.global-search-lang-badge.lang-ts { background: color-mix(in srgb, var(--lang-ts) 15%, transparent); color: var(--lang-ts); border: 1px solid color-mix(in srgb, var(--lang-ts) 30%, transparent); }
.global-search-lang-badge.lang-python { background: color-mix(in srgb, var(--lang-python) 15%, transparent); color: var(--lang-python); border: 1px solid color-mix(in srgb, var(--lang-python) 30%, transparent); }
.global-search-lang-badge.lang-react { background: color-mix(in srgb, var(--lang-react) 15%, transparent); color: var(--lang-react); border: 1px solid color-mix(in srgb, var(--lang-react) 30%, transparent); }
.global-search-lang-badge.lang-vue { background: color-mix(in srgb, var(--lang-vue) 15%, transparent); color: var(--lang-vue); border: 1px solid color-mix(in srgb, var(--lang-vue) 30%, transparent); }
.global-search-lang-badge.lang-html { background: color-mix(in srgb, var(--lang-html) 15%, transparent); color: var(--lang-html); border: 1px solid color-mix(in srgb, var(--lang-html) 30%, transparent); }
.global-search-lang-badge.lang-css { background: color-mix(in srgb, var(--lang-css) 15%, transparent); color: var(--lang-css); border: 1px solid color-mix(in srgb, var(--lang-css) 30%, transparent); }
.global-search-lang-badge.lang-java { background: color-mix(in srgb, var(--lang-java) 15%, transparent); color: var(--lang-java); border: 1px solid color-mix(in srgb, var(--lang-java) 30%, transparent); }
.global-search-lang-badge.lang-csharp { background: color-mix(in srgb, var(--lang-csharp) 15%, transparent); color: var(--lang-csharp); border: 1px solid color-mix(in srgb, var(--lang-csharp) 30%, transparent); }
.global-search-lang-badge.lang-cpp { background: color-mix(in srgb, var(--lang-cpp) 15%, transparent); color: var(--lang-cpp); border: 1px solid color-mix(in srgb, var(--lang-cpp) 30%, transparent); }
.global-search-lang-badge.lang-go { background: color-mix(in srgb, var(--lang-go) 15%, transparent); color: var(--lang-go); border: 1px solid color-mix(in srgb, var(--lang-go) 30%, transparent); }
.global-search-lang-badge.lang-php { background: color-mix(in srgb, var(--lang-php) 15%, transparent); color: var(--lang-php); border: 1px solid color-mix(in srgb, var(--lang-php) 30%, transparent); }
.global-search-lang-badge.lang-ruby { background: color-mix(in srgb, var(--lang-ruby) 15%, transparent); color: var(--lang-ruby); border: 1px solid color-mix(in srgb, var(--lang-ruby) 30%, transparent); }
.global-search-lang-badge.lang-rust { background: color-mix(in srgb, var(--lang-rust) 15%, transparent); color: var(--lang-rust); border: 1px solid color-mix(in srgb, var(--lang-rust) 30%, transparent); }
.global-search-lang-badge.lang-json { background: color-mix(in srgb, var(--lang-json) 15%, transparent); color: var(--lang-json); border: 1px solid color-mix(in srgb, var(--lang-json) 30%, transparent); }
.global-search-lang-badge.lang-sql { background: color-mix(in srgb, var(--lang-sql) 15%, transparent); color: var(--lang-sql); border: 1px solid color-mix(in srgb, var(--lang-sql) 30%, transparent); }
.global-search-lang-badge.lang-yaml { background: color-mix(in srgb, var(--lang-yaml) 15%, transparent); color: var(--lang-yaml); border: 1px solid color-mix(in srgb, var(--lang-yaml) 30%, transparent); }
.global-search-lang-badge.lang-markdown { background: color-mix(in srgb, var(--lang-markdown) 15%, transparent); color: var(--lang-markdown); border: 1px solid color-mix(in srgb, var(--lang-markdown) 30%, transparent); }
.global-search-lang-badge.lang-shell { background: color-mix(in srgb, var(--lang-shell) 15%, transparent); color: var(--lang-shell); border: 1px solid color-mix(in srgb, var(--lang-shell) 30%, transparent); }
.global-search-lang-badge.lang-unknown {
  background: color-mix(in srgb, var(--text-muted) 15%, transparent);
  color: var(--text-muted);
  border: 1px solid color-mix(in srgb, var(--text-muted) 35%, transparent);
}
