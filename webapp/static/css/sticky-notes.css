/* Sticky Notes styles */
.sticky-note{
  position: fixed;
  z-index: 950;
  box-shadow: 0 8px 20px rgba(0,0,0,.25);
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,.12);
  background: #FFFFCC;
  overflow: hidden;
  backdrop-filter: blur(0.5px);
}
.sticky-note.is-pinned{
  position: absolute;
}
.sticky-note.is-floating{
  position: fixed;
}
.sticky-note.is-minimized .sticky-note-content{ display:none; }
.sticky-note.is-minimized{ height: 42px !important; }

.sticky-note-header{
  display:flex; align-items:center; justify-content:space-between;
  padding: 6px 8px; cursor: move; user-select:none;
  background: rgba(0,0,0,.06);
}
.sticky-note-drag{ width: 100%; height: 16px; cursor: move; touch-action: none; }
.sticky-note-actions{ display:flex; gap:6px; }
.sticky-note-btn{ border:none; background: transparent; cursor: pointer; font-size: 16px; transition: background-color .18s ease, color .18s ease; }
.sticky-note-pin{ opacity:.8; }
.sticky-note-pin:hover{ opacity:1; }
.sticky-note-pin.is-active{
  background: #fee2e2;
  color: #b91c1c;
  border-radius: 6px;
  opacity: 1;
}
.sticky-note-btn:hover{ color:#000; }

.sticky-note-content{
  width: 100%; height: calc(100% - 42px);
  border: 0; outline: none; resize: none;
  padding: 8px; font-size: 14px; line-height: 1.35;
  background: transparent; color: #222;
}
.sticky-note-resize{
  position: absolute; right: 6px; bottom: 6px;
  width: 14px; height: 14px;
  background: linear-gradient(135deg, rgba(0,0,0,.15) 0%, rgba(0,0,0,.05) 100%);
  border-radius: 3px; cursor: nwse-resize;
}

/* Floating action button */
.sticky-note-fab{
  position: fixed; bottom: 18px; left: 6px; z-index: 980;
  width: 46px; height: 46px; border-radius: 50%;
  border: 1px solid rgba(0,0,0,.15);
  background: radial-gradient(ellipse at top left, #ffffff, #f5f5f5);
  box-shadow: 0 8px 18px rgba(0,0,0,.2);
  color: #333; font-size: 22px; cursor: pointer;
}
.sticky-note-fab:hover{ transform: scale(1.05); }

@media (max-width: 480px){
  .sticky-note-drag{ height: 20px; }
  .sticky-note-fab{ left: 4px; bottom: 14px; }
}

@keyframes noteAppear {
  from { opacity: 0; transform: scale(0.9) translateY(8px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
.sticky-note {
  animation: noteAppear var(--duration-normal, 250ms) var(--ease-out-expo, cubic-bezier(0.16, 1, 0.3, 1));
}

/* ==============================================
   Sticky Notes Animations & UX Enhancements
   ============================================== */

/* Smooth position/size transitions during drag/resize */
.sticky-note {
  transition: box-shadow var(--duration-fast, 150ms) var(--ease-smooth, ease),
              border-color var(--duration-fast, 150ms) var(--ease-smooth, ease);
}

/* Dragging state */
.sticky-note.is-dragging {
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
  transform: rotate(1deg);
  z-index: 1000;
}

/* Resizing state */
.sticky-note.is-resizing {
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3);
}

/* Exit animation */
.sticky-note.note-exit {
  animation: noteDisappear var(--duration-fast, 150ms) var(--ease-smooth, ease) forwards;
}
@keyframes noteDisappear {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.9); }
}

/* Minimize animation */
.sticky-note.is-minimizing {
  animation: noteMinimize var(--duration-fast, 150ms) var(--ease-out-quart, ease) forwards;
}
@keyframes noteMinimize {
  from { opacity: 1; }
  to { opacity: 0.9; }
}

/* Expand animation */
.sticky-note.is-expanding {
  animation: noteExpand var(--duration-normal, 250ms) var(--ease-out-expo, ease) forwards;
}
@keyframes noteExpand {
  from { opacity: 0.9; }
  to { opacity: 1; }
}

/* Pin toggle animation */
.sticky-note-pin.is-toggling {
  animation: pinWiggle 0.4s var(--ease-spring, cubic-bezier(0.34, 1.56, 0.64, 1));
}
@keyframes pinWiggle {
  0% { transform: rotate(0); }
  25% { transform: rotate(-12deg); }
  75% { transform: rotate(8deg); }
  100% { transform: rotate(0); }
}

/* Button hover effects */
.sticky-note-btn {
  transition: background-color 0.15s var(--ease-smooth, ease),
              color 0.15s var(--ease-smooth, ease),
              transform 0.1s var(--ease-smooth, ease);
}
.sticky-note-btn:active {
  transform: scale(0.9);
}

/* FAB animations */
.sticky-note-fab {
  transition: transform var(--duration-fast, 150ms) var(--ease-spring, cubic-bezier(0.34, 1.56, 0.64, 1)),
              box-shadow var(--duration-fast, 150ms) var(--ease-smooth, ease);
}
.sticky-note-fab:hover {
  transform: scale(1.08);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
}
.sticky-note-fab:active {
  transform: scale(0.95);
}

/* FAB pulse when no notes exist */
.sticky-note-fab.is-empty-hint {
  animation: fabPulse 2s var(--ease-smooth, ease) infinite;
}
@keyframes fabPulse {
  0%, 100% { box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2); }
  50% { box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2), 0 0 0 8px rgba(255, 255, 100, 0.15); }
}

/* Content textarea focus state */
.sticky-note-content:focus {
  background: rgba(255, 255, 255, 0.1);
}

/* Resize handle hover */
.sticky-note-resize {
  transition: background var(--duration-fast, 150ms) var(--ease-smooth, ease),
              transform var(--duration-fast, 150ms) var(--ease-smooth, ease);
}
.sticky-note-resize:hover {
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0.1) 100%);
  transform: scale(1.1);
}

/* Note focus ring for accessibility */
.sticky-note:focus-within {
  outline: 2px solid rgba(99, 102, 241, 0.5);
  outline-offset: 2px;
}

/* Stagger animation for multiple notes */
.sticky-note:nth-of-type(1) { animation-delay: 0ms; }
.sticky-note:nth-of-type(2) { animation-delay: 50ms; }
.sticky-note:nth-of-type(3) { animation-delay: 100ms; }
.sticky-note:nth-of-type(n+4) { animation-delay: 150ms; }

/* Print: hide notes */
@media print {
  .sticky-note, .sticky-note-fab { display: none !important; }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .sticky-note,
  .sticky-note-btn,
  .sticky-note-fab,
  .sticky-note-resize,
  .sticky-note-pin {
    animation: none !important;
    transition-duration: 0.01ms !important;
  }
}
