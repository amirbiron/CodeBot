# הגדרת טוקן GitHub קבוע לאדמינים 🔐

## איך זה עובד?

המערכת מאפשרת למשתמשי אדמין לשמור טוקן GitHub באופן קבוע, כך שלא צריך להזין אותו כל פעם מחדש.

## הגדרות נדרשות

### 1. הגדרת משתמשי אדמין
הוסף את ה-User ID שלך ל-ENV:
```bash
ADMIN_USER_IDS=123456789,987654321
```

### 2. מפתח הצפנה
הגדר מפתח הצפנה חזק ב-ENV:
```bash
# יצירת מפתח חדש (Python):
from cryptography.fernet import Fernet
print(Fernet.generate_key().decode())

# הוסף ל-ENV:
ENCRYPTION_KEY=your_generated_key_here
```

**חשוב:** שמור את המפתח במקום בטוח! בלעדיו לא תוכל לפענח את הטוקנים.

## שימוש

### 1. התחבר לווב אפ
- גש ל: https://your-webapp-url.com/login
- התחבר עם Telegram

### 2. גש להגדרות
- לחץ על אייקון ההגילגל ⚙️ בתפריט העליון
- או גש ישירות ל: /settings

### 3. הוסף טוקן GitHub
אם אתה אדמין, תראה אזור מיוחד:
- הזן את ה-Personal Access Token שלך
- לחץ "שמור טוקן"
- הטוקן יוצפן וישמר במסד הנתונים

### 4. יצירת טוקן חדש ב-GitHub
1. גש ל: https://github.com/settings/tokens/new
2. תן שם לטוקן (לדוגמה: "Code Keeper Bot")
3. בחר הרשאות:
   - `repo` - גישה מלאה לריפוזיטוריז
   - `read:user` - קריאת פרטי משתמש
4. לחץ "Generate token"
5. העתק את הטוקן (מתחיל ב-`ghp_` או `github_pat_`)

## אבטחה 🔒

### מה נעשה לאבטחה:
1. **הצפנה חזקה** - AES-256 עם Fernet
2. **שמירה בצד שרת** - הטוקן לא נשמר בדפדפן
3. **הרשאות אדמין** - רק אדמינים יכולים לשמור טוקנים
4. **סשן מאובטח** - הטוקן המפוענח נשמר רק בסשן
5. **ללא חשיפה ב-JS** - אין גישה לטוקן מצד הלקוח

### מה לא לעשות:
- ❌ אל תשתף את מפתח ההצפנה
- ❌ אל תשמור טוקנים בקוד
- ❌ אל תשלח טוקנים בלוגים
- ❌ אל תיתן הרשאות מיותרות לטוקן

## בדיקה

### איך לבדוק שזה עובד:
1. התחבר כאדמין
2. גש להגדרות
3. אם יש טוקן - תראה "טוקן GitHub פעיל" ✅
4. אם אין - תוכל להוסיף אחד
5. לאחר שמירה, הטוקן יטען אוטומטית בכל התחברות

### בעיות נפוצות:

**"אין הרשאות אדמין"**
- וודא שה-User ID שלך ב-ADMIN_USER_IDS

**"לא ניתן לפענח טוקן"**
- בדוק שה-ENCRYPTION_KEY זהה לזה ששימש להצפנה
- אם המפתח אבד, תצטרך למחוק ולהזין טוקן חדש

**"פורמט טוקן לא תקין"**
- וודא שהטוקן מתחיל ב-`ghp_` או `github_pat_`
- בדוק שהעתקת את כל הטוקן

## יתרונות

✅ **נוחות** - לא צריך להזין טוקן כל פעם
✅ **אבטחה** - הטוקן מוצפן ומאובטח
✅ **גמישות** - אפשר לעדכן או למחוק בכל עת
✅ **שקיפות** - רואים מתי הטוקן עודכן

## הערות

- הטוקן נשאר פעיל בין התחברויות
- אפשר למחוק את הטוקן בכל עת מההגדרות
- הטוקן משמש רק לפעולות GitHub API
- מומלץ ליצור טוקן ייעודי לבוט (לא להשתמש בטוקן אישי ראשי)