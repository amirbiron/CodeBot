{% extends "base.html" %}

{% block title %}×›×œ×™ ×§×•×“ - Code Keeper Bot{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/code-tools.css') }}?v={{ static_version }}">
{% endblock %}

{% block content %}
<div class="code-tools-container">
  <div class="tools-header">
    <h1><span class="icon">ğŸ› ï¸</span> ×›×œ×™ ×§×•×“</h1>
    <p class="subtitle">Playground  ×œ×¢×™×¦×•×‘, ×‘×“×™×§×ª ××™×›×•×ª, ×ª×™×§×•×Ÿ ××•×˜×•××˜×™ ×•×”×¨×¦×ª ×§×•×“ (Python)</p>
  </div>

  <div class="tools-toolbar">
    <div class="toolbar-group primary-actions">
      <button id="btn-format" class="btn btn-primary" title="×¢×™×¦×•×‘ (Ctrl+Shift+F)">âœ¨ ×¢×™×¦×•×‘</button>
      <button id="btn-lint" class="btn btn-secondary" title="×‘×“×™×§×ª ××™×›×•×ª (Ctrl+Shift+L)">ğŸ” Lint</button>
      <button id="btn-run" class="btn btn-success" style="display:none;" title="×”×¨×¥ (Ctrl+Enter)">â–¶ï¸ ×”×¨×¥</button>
      <div class="dropdown">
        <button id="btn-fix" class="btn btn-secondary">ğŸ”§ ×ª×™×§×•×Ÿ</button>
        <div class="dropdown-menu">
          <button class="dropdown-item" data-level="safe">ğŸ›¡ï¸ ×‘×˜×•×— <small>whitespace</small></button>
          <button class="dropdown-item" data-level="cautious">âš ï¸ ×–×”×™×¨ <small>+imports</small></button>
          <button class="dropdown-item" data-level="aggressive">ğŸ”¥ ××’×¨×¡×™×‘×™ <small>××œ×</small></button>
        </div>
      </div>
      <button id="btn-apply" class="btn btn-primary" disabled title="×”×—×œ ×©×™× ×•×™×™× (××¢×ª×™×§ ××ª ×”×ª×•×¦××” ×œ×§×•×“ ×”××§×•×¨)">×”×—×œ ×©×™× ×•×™×™×</button>
    </div>

    <div class="toolbar-group options">
      <select id="format-tool" class="form-select" title="×›×œ×™ ×¢×™×¦×•×‘">
        <option value="black">Black</option>
        <option value="autopep8">autopep8</option>
        <option value="isort">isort</option>
      </select>
      <label class="option-label">
        <input type="number" id="line-length" value="88" min="40" max="200">
        <span>××•×¨×š ×©×•×¨×”</span>
      </label>
    </div>
  </div>

  <div class="tools-content">
    <div class="panel input-panel">
      <div class="panel-header">
        <span class="panel-title">×§×•×“ ××§×•×¨</span>
        <span class="panel-meta">Python</span>
      </div>
      <div class="panel-body">
        <div id="input-editor" style="height:100%;"></div>
      </div>
      <div class="panel-footer">
        <span id="input-stats"></span>
        <span class="split-toolbar-hint">Ctrl+Shift+F / Ctrl+Shift+L</span>
      </div>
    </div>

    <div class="panel output-panel">
      <div class="panel-header">
        <span class="panel-title">×ª×•×¦××”</span>
        <div class="panel-header-actions">
          <button id="btn-copy-output" class="btn btn-sm btn-outline" title="×”×¢×ª×§ ×ª×•×¦××”">
            <span class="copy-icon">ğŸ“‹</span>
            <span class="copy-text">×”×¢×ª×§</span>
          </button>
        </div>
        <div class="view-toggle">
          <button class="view-btn active" data-view="code">×§×•×“</button>
          <button class="view-btn" data-view="diff">Diff</button>
          <button class="view-btn" data-view="issues">×‘×¢×™×•×ª</button>
          <button class="view-btn" data-view="output">×¤×œ×˜</button>
        </div>
      </div>
      <div class="panel-body">
        <div id="code-view" class="view-content active">
          <div id="output-editor" style="height:100%;"></div>
        </div>
        <div id="diff-view" class="view-content">
          <div id="diff-merge" style="height:100%;"></div>
        </div>
        <div id="issues-view" class="view-content">
          <div id="issues-list"></div>
        </div>
        <div id="output-view" class="view-content">
          <div id="run-output" class="run-console"></div>
        </div>
      </div>
      <div class="panel-footer">
        <div id="lint-score"></div>
        <div id="tools-info"></div>
      </div>
    </div>
  </div>

  <div id="status-bar" class="status-bar hidden" aria-live="polite">
    <span class="status-message"></span>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/code-tools-page.js') }}?v={{ static_version }}"></script>
{% endblock %}

