{# ×¨×›×™×‘×™ ×¢×•×¨×š ××©×•×ª×¤×™× ×œ-Upload/Edit #}

{% macro code_tools_toolbar(user_is_admin=False) %}
{# Code Tools toolbar - Format, Lint, Fix, Playground #}
<div class="code-tools-group" data-show-for-language="python">
  <button
    type="button"
    class="btn btn-sm btn-outline"
    data-action="format"
    title="×¢×™×¦×•×‘ ×§×•×“ (Ctrl+Shift+F)"
  >
    <i class="fas fa-magic"></i>
    ×¢×™×¦×•×‘
  </button>
  <button
    type="button"
    class="btn btn-sm btn-outline"
    data-action="lint"
    title="×‘×“×™×§×ª ××™×›×•×ª (Ctrl+Shift+L)"
  >
    <i class="fas fa-check-circle"></i>
    Lint
  </button>
  <div class="dropdown">
    <button type="button" class="btn btn-sm btn-outline dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-action="fix-menu" id="btn-auto-fix">
      <i class="fas fa-wrench"></i>
      ×ª×™×§×•×Ÿ
    </button>
    <ul class="dropdown-menu" aria-labelledby="btn-auto-fix">
      <li><button class="dropdown-item" type="button" data-action="fix-level" data-level="safe">ğŸ›¡ï¸ ×‘×˜×•×— (whitespace)</button></li>
      <li><button class="dropdown-item" type="button" data-action="fix-level" data-level="cautious">âš ï¸ ×–×”×™×¨ (+imports)</button></li>
      <li><button class="dropdown-item" type="button" data-action="fix-level" data-level="aggressive">ğŸ”¥ ××’×¨×¡×™×‘×™ (××œ×)</button></li>
    </ul>
  </div>
  <button
    type="button"
    class="btn btn-sm btn-outline-secondary"
    data-action="apply-fix"
    disabled
    title="×”×—×œ ×ª×™×§×•× ×™× ×©×—×•×©×‘×• (××—×¨×™ ×‘×—×™×¨×” ×‘'×ª×™×§×•×Ÿ')"
  >
    <i class="fas fa-check"></i>
    ×”×—×œ
  </button>
  <a
    href="/tools/code"
    target="_blank"
    rel="noopener noreferrer"
    class="btn btn-sm btn-outline-secondary"
    title="ğŸª„ Playground"
  >
    <i class="fas fa-external-link-alt"></i>
    Playground
  </a>
</div>
{% endmacro %}

{% macro code_tools_modal(user_is_admin=False) %}
{# Bootstrap Modals for Code Tools (results + fix options) #}
<div class="modal fade" id="codeToolsModal" tabindex="-1" aria-labelledby="codeToolsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="codeToolsModalLabel">Code Tools</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="×¡×’×•×¨"></button>
      </div>
      <div class="modal-body" id="codeToolsModalBody">
        {# ×ª×•×›×Ÿ ×“×™× ××™ ×™×•×–×¨×§ ×›××Ÿ #}
      </div>
      <div class="modal-footer" id="codeToolsModalFooter">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">×¡×’×•×¨</button>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro image_uploader(existing_images=[]) %}
<div
    id="image-upload-widget"
    class="glass-card"
    data-component="image-uploader"
    style="display: none; padding: 0.5rem; border: none; background: transparent;"
>
    <div class="image-uploader__error" data-role="image-error" role="alert"></div>

    <input type="file" name="md_images" hidden multiple accept="image/*" data-role="file-input">

    <div class="previews-container" data-role="previews">
        {% for img in existing_images %}
        <div class="image-preview" data-image-id="{{ img.id }}" data-origin="existing" data-image-name="{{ img.name }}">
            <img src="{{ img.url }}" alt="{{ img.name }}" loading="lazy">
            <button type="button" class="image-preview__delete" data-action="delete-image" aria-label="××—×§ ×ª××•× ×”">ğŸ—‘ï¸</button>
        </div>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro markdown_toolbar() %}
{# Markdown Toolbar - ×¡×¨×’×œ ×›×œ×™× ××”×™×¨ ×œ×”×–×¨×§×ª ×ª×‘× ×™×•×ª #}
<div class="md-toolbar-group" data-component="markdown-toolbar">
  <button
    type="button"
    class="md-toolbar-trigger"
    data-md-action="toggle-dropdown"
    title="×›×œ×™ Markdown"
    aria-expanded="false"
    aria-haspopup="true"
  >
    <i class="fas fa-pen-fancy"></i>
    <span>MD</span>
  </button>

  <div class="md-toolbar-dropdown" role="menu" aria-label="×›×œ×™ Markdown">
    {# ×˜×‘×œ×” #}
    <button type="button" class="md-toolbar-item" data-md-insert="table" role="menuitem">
      <span class="item-icon">ğŸ“Š</span>
      <span class="item-label">×˜×‘×œ×”</span>
      <span class="item-shortcut">Ctrl+Shift+T</span>
    </button>

    {# ×§×™×©×•×¨ ×—×›× #}
    <button type="button" class="md-toolbar-item" data-md-action="smart-link" role="menuitem">
      <span class="item-icon">ğŸ”—</span>
      <span class="item-label">×§×™×©×•×¨ ×—×›×</span>
      <span class="item-shortcut">Ctrl+K</span>
    </button>

    {# ×××¨×§×¨ #}
    <button type="button" class="md-toolbar-item" data-md-insert="highlight" role="menuitem">
      <span class="item-icon">ğŸ¨</span>
      <span class="item-label">×××¨×§×¨</span>
      <span class="item-shortcut">Ctrl+Shift+H</span>
    </button>

    {# ×§×™×¤×•×œ #}
    <button type="button" class="md-toolbar-item" data-md-insert="details" role="menuitem">
      <span class="item-icon">ğŸ“</span>
      <span class="item-label">×§×™×¤×•×œ</span>
      <span class="item-shortcut">Ctrl+Shift+D</span>
    </button>

    {# ×¨×©×™××ª ××©×™××•×ª #}
    <button type="button" class="md-toolbar-item" data-md-insert="taskList" role="menuitem">
      <span class="item-icon">âœ…</span>
      <span class="item-label">×¨×©×™××ª ××©×™××•×ª</span>
      <span class="item-shortcut">Ctrl+Shift+C</span>
    </button>

    <div class="md-toolbar-divider" role="separator"></div>

    {# ×ª×¤×¨×™×˜ ××©× ×” - ×”×ª×¨××•×ª #}
    <div class="md-toolbar-submenu-trigger">
      <button type="button" class="md-toolbar-item" role="menuitem" aria-haspopup="true">
        <span class="item-icon">ğŸ””</span>
        <span class="item-label">×”×ª×¨××•×ª (Alerts)</span>
      </button>
      <div class="md-toolbar-submenu" role="menu" aria-label="×¡×•×’×™ ×”×ª×¨××•×ª">
        <button type="button" class="md-toolbar-item" data-md-insert="alert:note" role="menuitem">
          <span class="item-icon">ğŸ§­</span>
          <span class="item-label">Note</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:tip" role="menuitem">
          <span class="item-icon">ğŸ’¡</span>
          <span class="item-label">Tip</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:warning" role="menuitem">
          <span class="item-icon">âš ï¸</span>
          <span class="item-label">Warning</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:danger" role="menuitem">
          <span class="item-icon">ğŸš¨</span>
          <span class="item-label">Danger</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:info" role="menuitem">
          <span class="item-icon">ğŸ“˜</span>
          <span class="item-label">Info</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:success" role="menuitem">
          <span class="item-icon">ğŸ¯</span>
          <span class="item-label">Success</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:question" role="menuitem">
          <span class="item-icon">â“</span>
          <span class="item-label">Question</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:example" role="menuitem">
          <span class="item-icon">ğŸ§©</span>
          <span class="item-label">Example</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:quote" role="menuitem">
          <span class="item-icon">ğŸ’¬</span>
          <span class="item-label">Quote</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:experimental" role="menuitem">
          <span class="item-icon">ğŸ§ª</span>
          <span class="item-label">Experimental</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:deprecated" role="menuitem">
          <span class="item-icon">ğŸš«</span>
          <span class="item-label">Deprecated</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:todo" role="menuitem">
          <span class="item-icon">ğŸ“</span>
          <span class="item-label">Todo</span>
        </button>
        <button type="button" class="md-toolbar-item" data-md-insert="alert:abstract" role="menuitem">
          <span class="item-icon">ğŸ“„</span>
          <span class="item-label">Abstract</span>
        </button>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

