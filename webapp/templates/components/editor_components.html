{# ×¨×›×™×‘×™ ×¢×•×¨×š ××©×•×ª×¤×™× ×œ-Upload/Edit #}

{% macro image_uploader(existing_images=[]) %}
<div id="image-upload-widget" class="glass-card" data-component="image-uploader" style="display: none;">
    <div class="image-uploader__header">
        <span class="image-uploader__label">×ª××•× ×•×ª (×œ×§×‘×¦×™ Markdown)</span>
        <span class="image-uploader__status" data-role="image-status"></span>
    </div>

    <div class="image-uploader__actions">
        <button type="button" class="btn btn-outline" data-action="add-image">ğŸ–¼ï¸ ×”×•×¡×£ ×ª××•× ×”</button>
        <small class="image-uploader__hint" data-role="image-hint">
            × ×™×ª×Ÿ ×œ×¦×¨×£ ×¢×“ 6 ×ª××•× ×•×ª (PNG/JPG/WEBP/GIF, ×¢×“ â€2MBâ€ ×œ×›×œ ×ª××•× ×”). ×”×¨×›×™×‘ ×¤×¢×™×œ ×œ×§×‘×¦×™ Markdown (×¡×™×•××ª â€.md/.markdownâ€ ××• ×‘×—×™×¨×ª "Markdown" ×‘×©×¤×”).
        </small>
        <div class="image-uploader__error" data-role="image-error" role="alert"></div>
    </div>

    <input type="file" name="md_images" hidden multiple accept="image/*" data-role="file-input">

    <div class="previews-container" data-role="previews">
        {% for img in existing_images %}
        <div class="image-preview" data-image-id="{{ img.id }}" data-origin="existing" data-image-name="{{ img.name }}">
            <img src="{{ img.url }}" alt="{{ img.name }}" loading="lazy">
            <button type="button" class="image-preview__delete" data-action="delete-image" aria-label="××—×§ ×ª××•× ×”">ğŸ—‘ï¸</button>
        </div>
        {% endfor %}
    </div>
</div>
{% endmacro %}

