# 🌟 רעיונות ממוקדים לשדרוג WebApp – דצמבר 2025

תאריך: 29.11.2025  
מטרה: להציע שיפורי UX ותפעול שלא תועדו עד היום ולחזק את מה שכבר קיים בקוד.  
הקפדתי לעבור על `webapp/templates/dashboard.html`, `webapp/templates/files.html`, `webapp/templates/md_preview.html`, סקריפטי ה-JS העיקריים (`static/js/global_search.js`, `card-preview.js`, `bulk-actions.js`, `sticky-notes.js`, `collections.js`, `editor-manager.js`), על `reminders/*`, `services/backup_service.py`, ועל כל קבצי `webapp/FEATURE_SUGGESTIONS` כדי לוודא שאין כפילויות.

---

## הצעות חדשות (לא קיימות במסמכים הקיימים)

### 1. Flow Recipes – מתכוני פעולה רב-שלביים
**מה**: תן למשתמש להקליט/להרכיב "מתכון" לפעולות שחוזרות על עצמן (למשל: בחירה מרובה → הוסף תגית → צור תזכורת → שתף לינק). בלחיצה אחת כל השלבים מתבצעים בסדר הנכון.

**למה עכשיו**: ב-`files.html` כבר קיימים bulk actions, אבל משתמשים עדיין צריכים להריץ אותם אחד-אחד. המתכונים חוסכים זמן ומונעים טעויות אנוש.

**איך**:
- UI חדש בסרגל הבחירה (`bulk-actions.js`) שמאפשר להקליט רצף פעולות ולתת לו שם.
- אחסון ההגדרות במונגו (collections ייעודית) וקריאה מה-API של `collections_api.py` כדי לשמור תאימות.
- hooks מוכנים לכל פעולה קיימת (`addToFavorites`, `showTagDialog`, יצירת ZIP, קריאה ל-`reminders` או `push_api`).
- תצוגת quick actions קטנה על כל כרטיס קובץ למתכונים שמוגדרים כ"חד שלבי".

**מאמץ**: בינוני (1.5–2 ספרינטים) עם ROI גבוה במיוחד למשתמשים כבדים.

---

### 2. Personal Ops Board – לוח משימות אישי בדשבורד
**מה**: כרטיס חדש ב-`dashboard.html` שמרכז במבט אחד: סימניות פתוחות עם הערות (`bookmarks_api.py`), פתקים עם תזכורות (`sticky_notes_api.py`), ותזכורות מהבוט (`reminders/*`). כל פריט מוצג ככרטיס drag & drop בין שלושה עמודות ("לבדיקה", "בטיפול", "הסתיים").

**למה עכשיו**: הנתונים קיימים, אבל מפוזרים: timeline, notes snapshot, push card. לוח אחיד מחליף רשימות חיצוניות שהמשתמש מנהל בנפרד.

**איך**:
- API מאוחד שירנדר JSON משולב (bookmarks + sticky_notes + reminders) עם שדה status.
- קומפוננטת front-end קטנה (Grid / flex) עם drag & drop (ספרייה קלת משקל או HTML5) בתוך `dashboard.html`.
- פעולה מהירה מכל כרטיס: קפיצה לשורה (`view_file.html`) או שינוי סטטוס (עדכון bookmark/sticky-note/reminder).
- פילטר "מועדף" שמציג רק פריטים עם badge מיוחד (נמשכים מסימניות צבעוניות).

**מאמץ**: בינוני, בלי השפעה על APIs קיימים.

---

### 3. Config Drift Lab – מעבדה לשינויים בקבצי קונפיג
**מה**: מצב צפייה מיוחד לקבצי הקונפיג (`config/*.yml`, `.env`, `docker-compose.yml`), שמציג Diff מול snapshot אחרון, מריץ בדיקות מהירות (YAML/JSON validation, בדיקת מפתחות חובה) ומדגיש שדות רגישים לפני שיתוף או הורדה.

**למה עכשיו**: ב-`view_file.html` כבר יש קוד להזרקת CSS, חיפוש, העתקה. קבצי קונפיג עדיין נבדקים מחוץ למערכת ועשויים להכיל טעויות קטנות שלא נלכדות בזמן.

**איך**:
- זיהוי סוג הקובץ בצד השרת (כבר קיים `detect_language_from_filename`). אם זו קונפיג → מפעילים את מצב המעבדה.
- חלונית צד שמציגה Diff מול snapshot שנשמר אוטומטית ב-`backup_service.py` או מול גרסה שנבחרה.
- הפעלה קצרת טווח של ולידטורים (מודול פייתון קטן תחת `scripts/` או `services/`) עם תוצאות שמוצגות ליד הקובץ.
- כפתור "העתק את מה שהשתנה" שמייצא רק את הבלוקים שהשתנו, כדי לשתף בצורה בטוחה יותר.

**מאמץ**: בינוני-גבוה (שילוב front/back), אך מונע תקלות הפצה.

---

### 4. Workspace Snapshots – צילום מצב של סשן עבודה
**מה**: שמירת סטייט שלם של הסשן (קובץ פתוח, שורת גלילה, חיפוש פעיל ב-`global_search.js`, כרטיסים שפתוחים ב-`card-preview.js`, סימניות מסומנות, מצב `multiSelect`). ניתן לפתוח Snapshot מהרכיב "שולחן עבודה" שכבר קיים ב-UI, לשתף אותו או להמשיך בדיוק מאותה נקודה.

**למה עכשיו**: משתמשים עוברים בין דפדפן ללחיצות בבוט ומאבדים את המיקוד. Snapshot אחד מחזיר אותם לאותו הקשר תוך שניות.

**איך**:
- טופס Save Snapshot שמופיע ליד כפתור "שולחן עבודה" (כבר יש `navigateToWorkspace()` ב-`files.html`).
- שמירת הנתונים באוסף חדש (fields: filters, scroll positions, selected file ids, applied recipes). אפשר למחזר את תשתית `collections.js` להצגת הרשימה.
- בזמן פתיחת snapshot: קריאה ל-API שמחזיר את הסטייט, ואז הפעלת JS hooks (למשל `cardPreview.expand`, `multiSelect.restoreState`, `performGlobalSearch` עם query שמור).
- אינטגרציה עם `dashboard` – כרטיס "המשך מאיפה שהפסקת" שמציג את שני ה-Snapshots האחרונים.

**מאמץ**: בינוני, לא דורש ספריות חדשות.

---

### 5. Markdown Action Blocks – בלוקים אינטראקטיביים בתוך מסמכי Markdown
**מה**: רכיבים ייעודיים שאפשר להוסיף ב-Markdown (תחביר פשוט כמו `:::action {type="checklist"}`) ומוצגים ב-`md_preview.html` כטפסים קטנים, מתגי סטטוס או טיימר לספרינט. הנתונים נשמרים בלוקאל סטרג' או בסשן, בלי לשנות את טקסט המקור.

**למה עכשיו**: `md_preview` כבר תומך בצבעי רקע, חיפוש, Sticky Notes. משתמשים עדיין צריכים לצאת למסמכים אחרים כדי לסמן התקדמות.

**איך**:
- הרחבת הפיענוח בצד הלקוח (אותו pipeline שמטעין את markdown-it) עם plugin קטן שמזהה בלוקים מסוג action.
- קומפוננטות קלילות שמתחברות לאותו Event Bus כמו `sticky-notes.js`, כך שאפשר לפתוח פדיון "סמן כסגור" מהדף עצמו.
- אפשרות להצמיד reminder לבלוק (קריאה ל-`/api/sticky-notes/.../reminder`).
- שמירת מצב בלוק במפתח `md-action:<file_id>:<block_id>` כדי להישאר מנותק מהתוכן המקורי.

**מאמץ**: בינוני (רובו front-end), ערך גבוה ללומדים ולכותבי runbooks.

---

### 6. Script Monitor & Quick Run – הרצה בטוחה של סקריפטים מוכרים
**מה**: דף אדמין קטן (בלשונית ההגדרות) שמציג את סקריפטי התחזוקה שקיימים בתיקיית `scripts/` ואת מצב הריצה האחרון שלהם. ניתן להריץ מחדש (עם confirm כפול), לראות לוגים קצרים, ולהגדיר תזמון פשוט.

**למה עכשיו**: יש כבר סקריפטים (`cleanup_repo_tags.py`, `migrate_workspace_collections.py` ועוד), אבל הם רצים ידנית דרך CLI. ממשק וובי חוסך קפיצה לשרת ומאפשר תיעוד ביצוע.

**איך**:
- שירות backend קטן (Flask Blueprint) שממפה שם סקריפט לפקודה מאושרת מראש (whitelist בלבד, רץ בתיקיית tmp בהתאם לכללי המחיקה הבטוחה).
- UI ב-`settings.html` (כרטיס "כלי אדמין") שמציג סטטוס, כפתור run, וצ'יפ "ריצה אחרונה".
- שמירת לוג קצר ב-Redis/Mongo להצגה ולניטור (הרחבה עתידית למערכת monitoring/observability שכבר קיימת).
- Guardrails: הצגת הקומנדה המדויקת לפני אישור, חיווי ברור אם הריצה נכשלה.

**מאמץ**: בינוני-נמוך, חוסך זמן לצוות התפעול.

---

## הצעת סדר עבודה (למי שרוצה להרים מהר)
1. להתחיל ב-Flow Recipes ו-Workspace Snapshots – מבוסס בעיקר על UI קיים ומביא וואו-פקטור מיידי.
2. להמשיך ב-Personal Ops Board ו-Markdown Action Blocks – שדרוג חוויית המשתמש היום-יומית.
3. לסגור עם Config Drift Lab ו-Script Monitor – נותן שכבת ביטחון תפעולית וניטורית.

כל סעיף כאן נשען על רכיבים שכבר קיימים במאגר הקוד, כדי לצמצם סיכונים ולהוציא ערך בזמן קצר בלי להמציא תשתיות חדשות.