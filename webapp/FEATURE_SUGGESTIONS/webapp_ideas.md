# 🌿 רעיונות יעילים ל-WebApp – דצמבר 2025

**תאריך:** 11.12.2025  
**מטרה:** להציע שדרוגים ממוקדי ערך לממשק ה-Web, בלי לחזור על רעיונות שמופיעים במסמכים הקיימים.  
**אופן סריקה:** עברתי על רוב הקבצים תחת `webapp/`, עם דגש על `static/js/editor-manager.js`, `static/js/live-preview.js`, `static/js/sticky-notes.js`, `static/js/global_search.js`, קבצי ה-bundling ב-`static_build/`, התבניות `templates/*.html` (כולל `dashboard.html`, `edit_file.html`, `md_preview.html`, `admin_observability.html`, `observability_replay.html`) וכן `config_radar.py` שקורא את קבצי `config/*.yml`.

---

## 🚀 רעיונות מרכזיים

### 1. מצב שחזור מלא לעורך (Session Resume)
- **למה עכשיו:** מעבר בין Codemirror לעורך הפשוט או רענון טאב מוחק מצב (Caret, בחירת פאנל Live Preview, טיוטות שלא נשמרו). זה מורגש במיוחד בעמוד `templates/edit_file.html` שעושה שימוש ב-`editor-manager.js` + `live-preview.js`.
- **מה לשנות:**
  - להוסיף מחלקת `sessionSnapshot` בתוך `static/js/editor-manager.js` ששומרת ל-`localStorage` את הטקסט, מיקום הסמן, השפה והאם `livePreview` פעיל.
  - להרחיב את `live-preview.js` כך שיזהה שחזור ויפעיל מחדש md/html preview, כולל syncing למצב הפאנלים.
  - להציג ב-UI (למשל מתחת לסרגל ההחלפה ב-`edit_file.html`) תגית קטנה שמתריעה מתי השחזור הופעל ואפשר למחוק אותו בלחיצה אחת.
- **תועלת:** פחות אובדן עבודה, ירידה בזמן חזרה לעריכה, שיפור בחוויית משתמשי מובייל שנופלים ל-reload.
- **מדדי הצלחה:**
  - 80% מהשחזורים מופעלים בתוך <2 שניות.
  - ירידה של 30% בדיווחים על "הקוד נעלם".

### 2. מגירת בלוקים חכמה ל-Markdown
- **למה עכשיו:** `md_preview.html` כבר מציג המון סקינים, ו-`static/js/sticky-notes.js` מוכיח שיש ערך לאינטראקציות נוספות. חסרה דרך מהירה להזריק בלוקים עשירים (admonitions, טבלאות, Mermaid) בלי לזכור תחביר.
- **מה לשנות:**
  - ב-`static/js/editor-manager.js` ליצור כפתור "+ בלוקים" שפותח מגירה צדדית (drawer) עם תצוגות חיות של בלוקים, תוך שימוש ב-renderers שמגיעים מ-`static_build/md-preview-entry.js`.
  - המגירה תבנה JSON של רכיבים (כותרת, תיאור, snippet) ותחזיר טקסט לתוך העורך במקום בו הסמן נמצא.
  - לחבר את זה ל-`sticky-notes` כך שלכל בלוק אפשר לצרף פתק הסבר קבוע, לטובת צוותים שחולקים תבניות.
- **תועלת:** כתיבה עקבית ומהירה יותר, Zero to Diagram מהדפדפן, פחות Copy/Paste מגיסטים.
- **מדדי הצלחה:**
  - 50% מהבלוקים הכבדים (Mermaid, admonition) מוכנסים דרך המגירה אחרי חודש.
  - ירידה של 20% בזמן ממוצע ליצירת מסמך תיעוד.

### 3. מצב Focus אישי בדשבורד
- **למה עכשיו:** `templates/dashboard.html` מציג כמות גדולה של קלפים (שפות, קבצים אחרונים, פתקים). משתמשים מבקשים "אני רוצה לראות רק את מה שמעניין אותי השבוע".
- **מה לשנות:**
  - להוסיף שכבת פילטרים נשמרים (Saved Views) בצד ימין של הדשבורד שמפעילה Query דרך API קיים (`/api/stats`, `/api/activity`), ומסתנכרנת עם `static/js/global_search.js` בשביל סימון שפות.
  - לשמור כל View ב-`localStorage` + פרופיל משתמש, כך שמי שנכנס לבוט במובייל יקבל את אותה פריסה.
  - להוסיף widget זעיר שמציג Timers (למשל "הקבצים שלא נגעתי בהם 14 ימים") תוך שימוש במידע שיש כבר בכרטיס Activity.
- **תועלת:** הדשבורד הופך לכלי אקטיבי, לא רק למידע. המשתמש מודע למה שדורש טיפול.
- **מדדי הצלחה:**
  - לפחות 60% מהמשתמשים מפעילים View שמור תוך שבועיים.
  - עליה של 25% בכניסות לעמודי קבצים מתוך הדשבורד.

### 4. Runbook Drilldown ב-Observability Replay
- **למה עכשיו:** יש כבר `admin_observability.html` וכן `observability_replay.html`, אבל הם מנותקים: אין חיבור בין גרף חריגה לבין שלבי הטיפול.
- **מה לשנות:**
  - ליצור קובץ JS ייעודי (למשל `static/js/observability_replay.js`) שמאזין לאירוע בחירה על קו הזמן ומביא JSON של runbook (אפשר להתחיל מקובץ YAML קטן ב-`config/observability_runbooks.yml`).
  - להציג בצד ימין "Runbook Player" שמדגיש כל שלב ומעלה כפתור "פתח קובץ רלוונטי" (לינק ל-`templates/view_file.html`).
  - חיבור אופציונלי לנתונים מהבוט (Push worker) כדי להדליק תזכורת follow-up.
- **תועלת:** קיצור זמן פתרון תקלות, העברת ידע מובנה למתנדבים שפותחים את הדשבורד לראשונה.
- **מדדי הצלחה:**
  - 100% מהאירועים הקריטיים כוללים Runbook משויך.
  - ירידה של 40% בזמן ממוצע בין איתור שגיאה לסגירתה באדמין.

### 5. Config Drift Heatmap עם Quick Fix
- **למה עכשיו:** `config_radar.py` כבר מאחד את `config/alerts.yml`, `config/error_signatures.yml`, `config/image_settings.yaml`, אבל אין UI שמראה מתי קובץ "הצהיב".
- **מה לשנות:**
  - ליצור מודול API קטן (`/api/config-radar`) שמריץ את `build_config_radar_snapshot` ומחזיר את ה-issues.
  - בעמוד חדש `templates/config_radar.html` להציג Heatmap (למשל בעזרת Chart.js) שמראה אילו שדות חורגים, עם כפתור "פתח בקובץ" שמפנה לעורך.
  - לייצר Quick Fixes פשוטים (לדוגמה: הצעה להגדיל `window_minutes`) שמזינים JSON עם הצעה שאפשר לכתוב לקובץ דרך PR ייעודי.
- **תועלת:** שקיפות סביב קבצי קונפיג ארוכים, מניעת תקלות production שנובעות מערכים חסרים.
- **מדדי הצלחה:**
  - 90% מהשינויים בקבצי config עוברים דרך הדשבורד החדש.
  - ירידה של 50% בבאגים שמקורם בקונפיג.

### 6. Asset Health Monitor ל-static_build & static/
- **למה עכשיו:** `static_build/build-cm.mjs` ו-`md-preview-entry.js` מייצרים קבצים כמו `static/js/codemirror.local.js` ו-`md_preview.bundle.js`, אבל אין ניטור מי משתמש בגרסה ישנה. תקלות CDN גורמות לנפילות שקטות.
- **מה לשנות:**
  - להוסיף Manifest (JSON) שנוצר בסוף כל build ומכיל checksum + build time לכל asset (JS/CSS) ב-`static/`.
  - בעמוד בסיס (`base.html`) לטעון `window.__assetManifest` ולהציג התראה אם יש פער בין הגרסה שמגיעה מהשרת לזו שנשמרה בלוקלי (cache bust).
  - להוסיף ל-`admin_observability` כרטיסון "Asset Health" שמראה כמה משתמשים עדיין על Bundle ישן.
- **תועלת:** גילוי מוקדם של asset שבור, במיוחד סביב העורך וה-Preview.
- **מדדי הצלחה:**
  - זיהוי אוטומטי של 100% מתקלות ה-CDN לפני תלונות משתמשים.
  - פחות מ-5% מהמשתמשים נשארים על גרסה ישנה אחרי Deployment.

---

## 🗺️ סדר עדיפויות מוצע
| פיצ'ר | מאמץ | השפעה | למה להתחיל כאן |
| --- | --- | --- | --- |
| מצב שחזור לעורך | בינוני | גבוה | נוגע לכל משתמש ותלוי רק ב-JS קיים |
| מגירת בלוקים | בינוני | בינוני-גבוה | מחזק את חוויית Markdown בזמן אמיתי |
| Focus Dashboard | בינוני | בינוני | שימוש חוזר ב-API וב-UI קיים, סיכון נמוך |
| Runbook Drilldown | גבוה | גבוה | משפר זמני תגובה בתקלות | 
| Config Heatmap | בינוני | בינוני-גבוה | מונע Drift ומספק UI חסר |
| Asset Monitor | בינוני | בינוני | מגן על deploys עתידיים |

---

## 📌 הערות נוספות
- הקפדתי להימנע מהצעות בתחום "שיתופי קהילה" או "סוכן AI" בהתאם לבקשה.
- כל רעיון נשען על קוד שכבר קיים ב-`webapp/` ולכן חלק מהתשתיות (API, CSS) נמצאות שם ואפשר להתחיל ב-MVP.
- אשמח להעמיק בכל אחד מהסעיפים או להכין Wireframe קצר אם זה יעזור.
