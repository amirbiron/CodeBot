# 🌐 רעיונות ממוקדי משתמש לשדרוג ה־WebApp (דצמבר 2025)

## איך אספתי את הרעיונות
- עברתי על `webapp/templates` (כולל `dashboard.html`, `collections.html`, `md_preview.html`, `html_preview.html`) כדי להבין את חוויית ה־UI הנוכחית.
- קראתי את הסקריפטים ב‑`webapp/static/js` כמו `bookmarks.js`, `collections.js`, `bulk-actions.js`, `sticky-notes.js`, `editor-manager.js` כדי לזהות את גבולות הפיצ'רים הקיימים.
- בדקתי את `config/alerts.yml`, `config/error_signatures.yml` ו־`config/image_settings.yaml` כדי לראות איזה קונפיגורציות חיות לגמרי מחוץ ל־UI.
- תיקיית `templates/static/js/Blueprint` לא קיימת בקוד הנוכחי – סימן שפיצ'ר תכנוני נעצר באמצע, ולכן לקחתי בחשבון שגם רעיון "Blueprint" חדש צריך להיות קל לאימוץ.

---

## 1. לוח "מסעות סימניות" – סקירה רוחבית של Bookmarkיים עם הערות
**למה עכשיו:**
`bookmarks.js` נותן חוויית סימון חזקה בתוך קובץ יחיד, אבל אין מקום אחד שמרכז את כל הסימניות וההערות (וגם הדשבורד לא מציג אותן). כשיש עשרות קבצים, קשה לזכור במה לטפל.

**מה מציעים:**
ליצור לוח חדש ב־`/dashboard` שמרכז "מסעות" – קבוצות של סימניות משותפות למטרה (למשל "לנקות TODOים בקובצי API"). כל מסע מציג:
- רשימת הקבצים והשורות הרלוונטיים + ההערות הקיימות.
- סטטוס קצר (בוצע/ממתין) לכל סימניה, עם אפשרות לסמן כטופל בלי לפתוח את הקובץ.
- קישורים מהירים לפתיחה במצב צפייה, Markdown או HTML Preview.

**איך מממשים (תמצית טכנית):**
- Backend: הרחבה ל־`bookmarks_api.py` שתאפשר לתייג סימניות ל"מסע" חדש (collection קטן בבסיס הנתונים או שדה חדש במסמך).
- UI: קומפוננטה חדשה ב־`dashboard.html` שמשתמשת בנתונים מ־`/api/bookmarks/journeys` וממחזרת את ה־UI של `bookmarksPanel`.
- אינטגרציה: כפתור "הוסף למסע" בתוך הפאנל שקיים כבר ב־`bookmarks.js`.

**מדד הצלחה:**
- לפחות 50% מהסימניות שנוספו בשבוע מסוים מקבלות שיוך למסע.
- ירידה של 30% בזמן המעבר בין קבצים (נמדד לפי קליקים בדשבורד לפני/אחרי).

---

## 2. מצב "פלייליסט" לאוספים – מעבר מרשימה סטטית למוד עבודה ממוקד
**למה עכשיו:**
ה־UI ב־`collections.html` מציג Sidebar + תכולה, אבל ברגע שמריצים סקירה גדולה (למשל 30 קבצים לפני דמו) אין רצף עבודה, אין Progress Bar ואין אינדיקציה למי שיתף קישור (`collection_shared.html`).

**מה מציעים:**
מצב חדש לכל אוסף שנקרא "Playlist Mode":
- חלוקה לשקופיות (Slide) עם תצוגת קוד, פתקים דביקים ופעולות לביצוע.
- Progress Bar שמתבסס על מספר הפריטים שסומנו כ"עברתי".
- תיעוד קצר לכל פריט (למשל "בדוק לוגיקה") שנשמר לשרת ומופיע גם בעמוד השיתוף.
- כפתור "שמור התקדמות" שמאפשר לחזור בדיוק לאותה נקודה.

**איך מממשים:**
- Frontend: הרחבת `collections.js` עם מצב צפייה חדש (toggle) שמרנדר כרטיס אחד בכל פעם וממחזר את קומפוננטת card-preview (`card-preview.js`).
- Backend: שדות חדשים בפריט אוסף (`checked`, `note`, `last_viewed_at`).
- שיתוף: `collection_shared.html` ירוויח מחלונית "Playlist" לקריאה בלבד, כך שמי שקיבל קישור יראה איפה עומדים.

**מדד הצלחה:**
- משתמשים שמפעילים Playlist מסיימים בממוצע 80% מהקבצים באותו סשן.
- ירידה של 40% בזמן שחזור ההקשר (מדידה: פחות קפיצות בין קבצים בדקות הראשונות).

---

## 3. קפסולת הקשר ל־Markdown – מרכז בקרה צף לתוכן עשיר
**למה עכשיו:**
`md_preview.html` עמוס בשיפורי עיצוב (צבעי רקע, חיפוש, Copy), וה־sticky notes חיים בקובץ `sticky-notes.js`. עדיין, אין מקום אחד שמרכז: חיפוש אחרון, סימניות כותרות, פתקים פתוחים, Task Lists אינטראקטיביים. המשתמש נאלץ לדלג בין כמה אזורים.

**מה מציעים:**
"קפסולת הקשר" צפה בצד המסך שמציגה:
- רשימת הכותרות האחרונות שהשתמשו בהן + קיצורי מקשים.
- פתקים פתוחים וסטטוס התזמונים שלהם (נשלח/ממתין).
- שאילתות חיפוש אחרונות ויכולת לקפוץ אליהן.
- Botton ל"יצוא לסיכום" – הופך sticky notes + highlights ל־Markdown קצר.

**איך מממשים:**
- קומפוננטה React/Vanilla שמוזרקת ל־`md_preview.html` ומתקשרת עם `sticky-notes.js` דרך events (למשל `window.dispatchEvent(new CustomEvent('sticky:list'))`).
- שימוש ב־`localStorage` כדי לסנכרן את רשימת החיפושים (`#md-search`).
- API קטן עבור "Summaries" שמחזיר Markdown מוכן לשיתוף.

**מדד הצלחה:**
- 70% מהשימושים ב־sticky notes יכללו פתיחה דרך הקפסולה ולא דרך הכפתור המרחף.
- פחות Alt+Tab בין הדפדפן לעורך חיצוני (אנקדוטת משתמשים בפרודקט). 

---

## 4. "Pulse" בדשבורד – בריאות מערכת בזמן אמת
**למה עכשיו:**
`dashboard.html` כבר מציג Activity Timeline, Push Card ו־Notes Snapshot, אבל הקונפיגורציות הקריטיות (`config/alerts.yml`, `config/error_signatures.yml`) עדיין מוסתרות ולא מתורגמות לחיווי ויזואלי. כשיש Spike בשגיאות או מחסור בגיבויים, המשתמש מגלה זאת רק דרך כלי חיצוני.

**מה מציעים:**
ווידג'ט חדש בשם "Pulse" שמושך את הגדרות ההתראות ומציג:
- Badges (ירוק/צהוב/אדום) לכל Alert המוגדר ב־`config/alerts.yml`.
- רשימת Error Signatures אחרונים לפי `config/error_signatures.yml` עם קפיצה לקובץ הרלוונטי.
- המלצה אוטומטית (CTA) – למשל "הפעל גיבוי מלא" אם לא הורץ ב־X שעות.

**איך מממשים:**
- שירות פנימי שמחשב את סטטוס ה־alerts אחת ל־N דקות ומאחסן אותו ב־Redis.
- תוספת קטנה ל־API שמשרת את הדשבורד (`/api/stats`) עם `alerts_summary`.
- Frontend: כרטיס חדש ב־`dashboard.html` שממחזר את סגנון ה־`push-card`.

**מדד הצלחה:**
- זמן תגובה לאירוע קריטי יורד לפחות מ־10 דקות (נמדד בלחיצות על CTA).
- 100% מה־alerts שמוגדרים בקבצי הקונפיג מוצגים ב־UI (אין "קונפיג סודי").

---

## 5. אולפן פעולות מרובות – תכנון סדר פעולות לפני ריצה
**למה עכשיו:**
`bulk-actions.js` מאפשר רק פעולה אחת בכל פעם (מועדפים, תגיות, ZIP וכו'), וה־progress bar הוא סימולציה מקומית. כשצריך לבצע כמה פעולות ברצף על אותם קבצים, צריך לבחור אותם שוב ושוב.

**מה מציעים:**
"אולפן" (Composer) שבו בוחרים קבצים פעם אחת ומרכיבים Pipeline:
1. הוסף תגיות →
2. שתף קישור זמני →
3. הורד ZIP.
המשתמש מסדר את השלבים ואז לוחץ RUN אחת. בנוסף, פאנל סטטוס אמיתי שמקבל עדכונים מהשרת (SSE/WebSocket) במקום Progress מזויף.

**איך מממשים:**
- Backend: endpoint חדש `/api/bulk/jobs` שיוצר Job ומחזיר מזהה. כל שלב הוא Task שנשמר בטבלה.
- Frontend: הרחבת ה־toolbar עם כפתור "בנה אולפן" שמפתח Drawer לוגי (drag & drop של פעולות).
- תצוגת סטטוס: שימוש ב־EventSource שמעדכן את ההתקדמות האמיתית (כמה קבצים הושלמו בכל שלב).

**מדד הצלחה:**
- לפחות 30% מהפעולות המרובות מרוצות דרך ה־Composer החדש בתוך חודש.
- ירידה של 50% בזמן הכולל לביצוע שלוש פעולות ברצף על אותו סט קבצים.

---

## 6. Sandbox Analyzer לתצוגת HTML
**למה עכשיו:**
`html_preview.html` מאפשר לעבור בין מצב ללא סקריפטים לבין מצב `allow-scripts`, אבל אין שום כלי לחקור למה הדף נראה שבור (אין Console, אין DOM Outline). משתמשים נאלצים לפתוח חלון נפרד ולוותר על השכבת Sandbox המאובטחת.

**מה מציעים:**
תפריט צדדי בשם "Sandbox Analyzer" שכולל:
- Console קטן (log, warn, error) שמגיע מה־iframe דרך `postMessage`.
- Outline של המבנה (H1/H2/div) עם קפיצה לשורות בקובץ המקורי.
- Snapshot של בקשות רשת אסורות (כי ה־sandbox חוסם אותן) כדי להבין מה נפל.

**איך מממשים:**
- הזרקת סקריפט לתוך ה־iframe (כבר עושים זאת עבור סימניות) שממאפס את `console` ושולח הודעות להורה.
- פאנל React/Vue קטן בצד ימין של `html_preview.html` שמאזין להודעות ומציגן.
- קישור חזרה לקוד המקורי דרך `/file/<id>#line=...` בהתאם לנתוני ה־Pygments.

**מדד הצלחה:**
- ירידה של 25% במספר הפעמים שמשתמש פותח את אותו הקובץ גם ב־"צפה בקוד" וגם ב־"HTML preview" באותו סשן (כלומר הוא מצליח לפתור מתוך הסנדבוקס).

---

## 7. "Config Radar" – חשיפת קבצי הקונפיג למנהלים
**למה עכשיו:**
הקבצים ב־`config/alerts.yml`, `config/error_signatures.yml`, `config/image_settings.yaml` קובעים התנהגות קריטית (למשל אילו שגיאות נחשבות קריטיות), אבל אין להם UI. אדמין צריך git access כדי להבין איזה Alert חי כרגע.

**מה מציעים:**
מסך חדש בתוך `settings.html` (זמין רק לאדמין) שמציג:
- Snapshot עדכני של כל קובץ קונפיג, כולל Diff לעומת Environment אחר (Production/Preview).
- כפתור "בדוק סכמה" שמריץ ולידציה (yaml schema) וכותב תוצאה לקובץ לוג.
- היסטוריה קצרה של שינויים (מבוסס git log) בלי צורך ב־CLI.

**איך מממשים:**
- Backend: קריאת הקבצים לתוך endpoint חדש `/api/config/radar` (רק לאדמין) + בדיקות סכמה.
- Frontend: שימוש ב־CodeMirror (כבר מוטמע דרך `editor-manager.js`) להצגת YAML read-only.
- אינטגרציה ל־alerts: אפשר ללחוץ על Alert ולראות את השורה בקובץ המקורי.

**מדד הצלחה:**
- 100% מהאדמינים לא צריכים לפתוח Git פעם ראשונה כדי לבדוק Alert.
- זיהוי מוקדם של בעיות סכמה לפני פריסה (לפחות 2 תקלות שנחסכו ברבעון).

---

## מה הלאה?
- לבדוק עם המשתמשים איזה מסע סימניות או Playlist הכי חסר להם ולהתחיל ב־MVP קטן.
- אם יש עניין, אפשר להרחיב את מסמך הרעיונות הזה לעמוד רשמי ב‑[CodeBot Docs](https://amirbiron.github.io/CodeBot/) כדי לשמור שקיפות לגבי כיוון המוצר.
