# 🌟 רעיונות ממוקדים לשדרוג WebApp – דצמבר 2025

תאריך: 29.11.2025  
מטרה: להציע שיפורי UX ותפעול שלא תועדו עד היום ולחזק את מה שכבר קיים בקוד.  
הקפדתי לעבור על `webapp/templates/dashboard.html`, `webapp/templates/files.html`, `webapp/templates/md_preview.html`, סקריפטי ה-JS העיקריים (`static/js/global_search.js`, `card-preview.js`, `bulk-actions.js`, `sticky-notes.js`, `collections.js`, `editor-manager.js`), על `reminders/*`, `services/backup_service.py`, ועל כל קבצי `webapp/FEATURE_SUGGESTIONS` כדי לוודא שאין כפילויות.

---

## הצעות חדשות (לא קיימות במסמכים הקיימים)

### 1. Flow Recipes – מתכוני פעולה רב-שלביים
**מה**: תן למשתמש להקליט/להרכיב "מתכון" לפעולות שחוזרות על עצמן (למשל: בחירה מרובה → הוסף תגית → צור תזכורת → שתף לינק). בלחיצה אחת כל השלבים מתבצעים בסדר הנכון.

**למה עכשיו**: ב-`files.html` כבר קיימים bulk actions, אבל משתמשים עדיין צריכים להריץ אותם אחד-אחד. המתכונים חוסכים זמן ומונעים טעויות אנוש.

**איך**:
- UI חדש בסרגל הבחירה (`bulk-actions.js`) שמאפשר להקליט רצף פעולות ולתת לו שם.
- אחסון ההגדרות במונגו (collections ייעודית) וקריאה מה-API של `collections_api.py` כדי לשמור תאימות.
- hooks מוכנים לכל פעולה קיימת (`addToFavorites`, `showTagDialog`, יצירת ZIP, קריאה ל-`reminders` או `push_api`).
- תצוגת quick actions קטנה על כל כרטיס קובץ למתכונים שמוגדרים כ"חד שלבי".

**מאמץ**: בינוני (1.5–2 ספרינטים) עם ROI גבוה במיוחד למשתמשים כבדים.

---

### 2. Personal Ops Board – לוח משימות אישי בדשבורד
**מה**: כרטיס חדש ב-`dashboard.html` שמרכז במבט אחד: סימניות פתוחות עם הערות (`bookmarks_api.py`), פתקים עם תזכורות (`sticky_notes_api.py`), ותזכורות מהבוט (`reminders/*`). כל פריט מוצג ככרטיס drag & drop בין שלושה עמודות ("לבדיקה", "בטיפול", "הסתיים").

**למה עכשיו**: הנתונים קיימים, אבל מפוזרים: timeline, notes snapshot, push card. לוח אחיד מחליף רשימות חיצוניות שהמשתמש מנהל בנפרד.

**איך**:
- API מאוחד שירנדר JSON משולב (bookmarks + sticky_notes + reminders) עם שדה status.
- קומפוננטת front-end קטנה (Grid / flex) עם drag & drop (ספרייה קלת משקל או HTML5) בתוך `dashboard.html`.
- פעולה מהירה מכל כרטיס: קפיצה לשורה (`view_file.html`) או שינוי סטטוס (עדכון bookmark/sticky-note/reminder).
- פילטר "מועדף" שמציג רק פריטים עם badge מיוחד (נמשכים מסימניות צבעוניות).

**מאמץ**: בינוני, בלי השפעה על APIs קיימים.

---

### 3. Config Drift Lab – מעבדה לשינויים בקבצי קונפיג
**מה**: מצב צפייה מיוחד לקבצי הקונפיג (`config/*.yml`, `.env`, `docker-compose.yml`), שמציג Diff מול snapshot אחרון, מריץ בדיקות מהירות (YAML/JSON validation, בדיקת מפתחות חובה) ומדגיש שדות רגישים לפני שיתוף או הורדה.

**למה עכשיו**: ב-`view_file.html` כבר יש קוד להזרקת CSS, חיפוש, העתקה. קבצי קונפיג עדיין נבדקים מחוץ למערכת ועשויים להכיל טעויות קטנות שלא נלכדות בזמן.

**איך**:
- זיהוי סוג הקובץ בצד השרת (כבר קיים `detect_language_from_filename`). אם זו קונפיג → מפעילים את מצב המעבדה.
- חלונית צד שמציגה Diff מול snapshot שנשמר אוטומטית ב-`backup_service.py` או מול גרסה שנבחרה.
- הפעלה קצרת טווח של ולידטורים (מודול פייתון קטן תחת `scripts/` או `services/`) עם תוצאות שמוצגות ליד הקובץ.
- כפתור "העתק את מה שהשתנה" שמייצא רק את הבלוקים שהשתנו, כדי לשתף בצורה בטוחה יותר.

**מאמץ**: בינוני-גבוה (שילוב front/back), אך מונע תקלות הפצה.

---

### 4. Workspace Snapshots – צילום מצב של סשן עבודה
**מה**: שמירת סטייט שלם של הסשן (קובץ פתוח, שורת גלילה, חיפוש פעיל ב-`global_search.js`, כרטיסים שפתוחים ב-`card-preview.js`, סימניות מסומנות, מצב `multiSelect`). ניתן לפתוח Snapshot מהרכיב "שולחן עבודה" שכבר קיים ב-UI, לשתף אותו או להמשיך בדיוק מאותה נקודה.

**למה עכשיו**: משתמשים עוברים בין דפדפן ללחיצות בבוט ומאבדים את המיקוד. Snapshot אחד מחזיר אותם לאותו הקשר תוך שניות.

**איך**:
- טופס Save Snapshot שמופיע ליד כפתור "שולחן עבודה" (כבר יש `navigateToWorkspace()` ב-`files.html`).
- שמירת הנתונים באוסף חדש (fields: filters, scroll positions, selected file ids, applied recipes). אפשר למחזר את תשתית `collections.js` להצגת הרשימה.
- בזמן פתיחת snapshot: קריאה ל-API שמחזיר את הסטייט, ואז הפעלת JS hooks (למשל `cardPreview.expand`, `multiSelect.restoreState`, `performGlobalSearch` עם query שמור).
- אינטגרציה עם `dashboard` – כרטיס "המשך מאיפה שהפסקת" שמציג את שני ה-Snapshots האחרונים.

**מאמץ**: בינוני, לא דורש ספריות חדשות.

---

### 5. Markdown Action Blocks – בלוקים אינטראקטיביים בתוך מסמכי Markdown
**מה**: רכיבים ייעודיים שאפשר להוסיף ב-Markdown (תחביר פשוט כמו `:::action {type="checklist"}`) ומוצגים ב-`md_preview.html` כטפסים קטנים, מתגי סטטוס או טיימר לספרינט. הנתונים נשמרים בלוקאל סטרג' או בסשן, בלי לשנות את טקסט המקור.

**למה עכשיו**: `md_preview` כבר תומך בצבעי רקע, חיפוש, Sticky Notes. משתמשים עדיין צריכים לצאת למסמכים אחרים כדי לסמן התקדמות.

**איך**:
- הרחבת הפיענוח בצד הלקוח (אותו pipeline שמטעין את markdown-it) עם plugin קטן שמזהה בלוקים מסוג action.
- קומפוננטות קלילות שמתחברות לאותו Event Bus כמו `sticky-notes.js`, כך שאפשר לפתוח פדיון "סמן כסגור" מהדף עצמו.
- אפשרות להצמיד reminder לבלוק (קריאה ל-`/api/sticky-notes/.../reminder`).
- שמירת מצב בלוק במפתח `md-action:<file_id>:<block_id>` כדי להישאר מנותק מהתוכן המקורי.

**מאמץ**: בינוני (רובו front-end), ערך גבוה ללומדים ולכותבי runbooks.

---

### 6. Script Monitor & Quick Run – הרצה בטוחה של סקריפטים מוכרים
**מה**: דף אדמין קטן (בלשונית ההגדרות) שמציג את סקריפטי התחזוקה שקיימים בתיקיית `scripts/` ואת מצב הריצה האחרון שלהם. ניתן להריץ מחדש (עם confirm כפול), לראות לוגים קצרים, ולהגדיר תזמון פשוט.

**למה עכשיו**: יש כבר סקריפטים (`cleanup_repo_tags.py`, `migrate_workspace_collections.py` ועוד), אבל הם רצים ידנית דרך CLI. ממשק וובי חוסך קפיצה לשרת ומאפשר תיעוד ביצוע.

**איך**:
- שירות backend קטן (Flask Blueprint) שממפה שם סקריפט לפקודה מאושרת מראש (whitelist בלבד, רץ בתיקיית tmp בהתאם לכללי המחיקה הבטוחה).
- UI ב-`settings.html` (כרטיס "כלי אדמין") שמציג סטטוס, כפתור run, וצ'יפ "ריצה אחרונה".
- שמירת לוג קצר ב-Redis/Mongo להצגה ולניטור (הרחבה עתידית למערכת monitoring/observability שכבר קיימת).
- Guardrails: הצגת הקומנדה המדויקת לפני אישור, חיווי ברור אם הריצה נכשלה.

**מאמץ**: בינוני-נמוך, חוסך זמן לצוות התפעול.

---

### 7. Context Capsules – קפסולות הקשר אישיות
**מה**: שמירת "קפסולה" קטנה שמכילה קטע קוד (מה-`card-preview` או `view_file`), החיפוש שהוביל אליו (`global_search.js`), סימניה רלוונטית ופתק מצורף. הקפסולה מוצגת במגירת צד ומאפשרת חזרה מיידית לאותו הקשר.

**למה עכשיו**: Workspace Snapshots שומרים סשן שלם, אבל לפעמים רוצים ללכוד רק יחידת ידע קטנה שאפשר לחזור אליה בדקות. קפסולות חוסכות פתיחת טאבים ושליפת חיפושים חוזרת.

**איך**:
- כפתור "שמור קפסולה" בכרטיס קובץ גורר את ה-snippet הנוכחי, query החיפוש והסימניות הפעילות לאובייקט יחיד.
- API ייעודי (אוסף קטן במונגו) שנחשף בלשונית הצד של `files.html` ומאפשר סינון לפי תגיות/שפות.
- הקפסולה יודעת להריץ אוטומטית את `cardPreview.expand`, לסמן את השורות ולהציג את הפתק כדי לחסוך קליקים.

**מאמץ**: בינוני, רובו בצד ה-UI ותשתית API פשוטה.

---

### 8. Auto-Resolve Reminders – סגירת תזכורות אוטומטית לפי פעילות
**מה**: קישור בין תזכורות (`reminders/*`) לבין קובץ/סימניה ספציפיים. כשהקובץ נערך או שסימניה מקבלת סטטוס "בוצע", התזכורת נסגרת או נדחפת אוטומטית.

**למה עכשיו**: משתמשים מנהלים TODO גם בסימניות, גם ב-Sticky Notes וגם בבוט. קישור ביניהם ימנע שכחת תזכורות ישנות אחרי שהעבודה בפועל הסתיימה.

**איך**:
- הוספת שדה `related_resource` ב-DB של התזכורות עם `file_id`/`bookmark_id`.
- Hook בצד השרת (`bookmarks_api.py`, `sticky_notes_api.py`) שמעדכן את ה-Reminder דרך `RemindersDB` כשסטטוס משתנה.
- UI קטן ב-`view_file.html` שמציג תזכורות פתוחות על הקובץ ומאפשר הזזת מועד/סגירה.

**מאמץ**: בינוני (עבודה על שני APIs ו-DB), ערך גבוה לניהול משימות.

---

### 9. Zero-Draft Sandbox – ארגז חול זמני לעריכה
**מה**: מצב חדש בעורך (`editor-manager.js`) שמאפשר לפתוח "טיוטה זמנית" לקובץ: עורכים ומריצים בדיקות (למשל דרך Code Playground או הרצת סקריפט) בלי לגעת בקובץ המקורי עד שמאשרים merge.

**למה עכשיו**: כיום כל עריכה מצריכה שמירה בסניפט או הורדה ידנית. טיוטה זמנית מאפשרת ניסויים בטוחים וכתיבה מרובת גרסאות בלי ספאם בקבצים.

**איך**:
- כפתור "פתח טיוטה" ב-`view_file.html` שפותח 탭 עורך חדש שמור ב-IndexedDB.
- אפשרות להריץ diff מהיר מול הקובץ המקורי ולהחיל רק חלק מהשינויים (mini patcher).
- כשמאשרים שמירה, הקריאה ל-API שולחת גם את diff וגם metadata (למשל טיוטה מי יצר) כדי לאפשר ביקורת.

**מאמץ**: בינוני-גבוה (עבודה ב-editor manager + endpoints חדשים), אך נותן ביטחון בשינויים.

---

### 10. Inline Data Guards – סימון שורות רגישות לפני שיתוף/הורדה
**מה**: יכולת לסמן שורות או בלוקים כ"רגישים" מתוך `view_file.html`/`files.html`. כאשר מישהו מנסה לשתף, להוריד או להוסיף את הקובץ ל-Flow Recipe – המערכת מציגה אזהרה או מחייבת טשטוש אוטומטי.

**למה עכשיו**: יש הרבה קבצים עם טוקנים/סודות. היום האחריות על המשתמש לזכור למחוק אותם. סימון קבוע מוריד סיכון לדליפה.

**איך**:
- אינטגרציה ל-UI של הסימניות: צבע מיוחד שמסמל "Guard" ויושב ב-DB.
- hook בנתיבי `/download/<id>` ו-`/share` שמבצע בדיקות לפני פעולה; אם guard קיים, מאפשר לבחור בין ביטול לטשטוש (Mask) בזמן אמת.
- Badge קטן בקבצים המוגנים ותיעוד בפאנל האדמין כדי לעדכן/לבטל בקלות.

**מאמץ**: בינוני, משתמש בתשתיות קיימות (סימניות/שיתוף) עם אזהרות צד שרת.

---

## הצעת סדר עבודה (למי שרוצה להרים מהר)
1. להתחיל ב-Flow Recipes ו-Workspace Snapshots – מבוסס בעיקר על UI קיים ומביא וואו-פקטור מיידי.
2. להמשיך ב-Personal Ops Board ו-Markdown Action Blocks – שדרוג חוויית המשתמש היום-יומית.
3. לשלב את Context Capsules ו-Auto-Resolve Reminders כדי לסגור פערי זיכרון וניהול משימות.
4. לסיים עם Config Drift Lab, Zero-Draft Sandbox, Inline Data Guards ו-Script Monitor – שכבות ביטחון וניהול תפעולי.

כל סעיף כאן נשען על רכיבים שכבר קיימים במאגר הקוד, כדי לצמצם סיכונים ולהוציא ערך בזמן קצר בלי להמציא תשתיות חדשות.