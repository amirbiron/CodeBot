Smooth Scrolling (WebApp) â€” ××“×¨×™×š ×ª××¦×™×ª×™ ×œ×¡×•×›× ×™ AI
===================================================

××“×¨×™×š ×–×” ××¡×‘×™×¨ ××ª ×™×›×•×œ×•×ª ×”×’×œ×™×œ×” ×”×—×œ×§×” ×©×”×•×˜××¢×• ×‘â€‘WebApp, ×›×™×¦×“ ×œ×”×©×ª××© ×‘×”×Ÿ ×‘××•×¤×Ÿ ×‘×˜×•×—, ×•××” ×”×“×’×©×™× ×œ×¡×•×›× ×™ AI ×›×“×™ ×œ×©××•×¨ ×¢×œ × ×’×™×©×•×ª ×•×‘×™×¦×•×¢×™×.

××” ×¤×¢×™×œ ×›×‘×¨
-----------
- ×˜×¢×™× ×” ×’×œ×•×‘×œ×™×ª ×©×œ ×¨×›×™×‘×™ ×”×’×œ×™×œ×”:
  - ``webapp/static/js/smooth-scroll.js`` (×× ×’× ×•×Ÿ JS)
  - ``webapp/static/css/smooth-scroll.css`` (×¡×’× ×•× ×•×ª ×‘×¡×™×¡ + × ×’×™×©×•×ª)
  - ××©×•×œ×‘ ××•×˜×•××˜×™×ª ×“×¨×š ``webapp/templates/base.html``
- ×ª××™×›×” ×‘×›× ×™×¡×•×ª ×§×œ×˜:
  - Wheel/Trackpad (×’×œ×’×œ×ª) ×¢× ×× ×™××¦×™×” ×—×œ×§×”
  - ××§×œ×“×ª: PageUp/Down, Home/End, ×—×™×¦×™×
  - ×§×™×©×•×¨×™ ×¢×•×’×Ÿ (Anchor Links) ×¢× ×’×œ×™×œ×” ×—×œ×§×”
- × ×’×™×©×•×ª:
  - ×›×™×‘×•×“ ``prefers-reduced-motion: reduce`` â€” ×× ×™××¦×™×•×ª ××§×•×¦×¨×•×ª/××›×•×‘×•×ª
  - Fallback ×©×œ ``scroll-behavior: smooth`` ×›××©×¨ JS ×œ× ×–××™×Ÿ
- ×× ×“×¨×•××™×“ (××•×¨×—×‘):
  - ×××–×™× ×™ ``touch`` ×‘â€‘``{passive: true}`` + ×“×’×™××ª ××”×™×¨×•×ª ×‘×–××Ÿ ×××ª
  - Momentum ××©×•×¤×¨ + ×‘×•×¡×˜×¨ ××™× ×¨×¦×™×” ×›××©×¨ ××™×Ÿ ××™× ×¨×¦×™×” × ×™×™×˜×™×‘×™×ª
  - ×”×–×¨×§×ª ××—×œ×§×•×ª ``android-optimized`` / ``android-no-bounce`` ×œ××™×¤×•×¡ overscroll
  - ×”×ª×××•×ª Samsung Internet (×× ×™×¢×ª ``scroll-behavior`` ×›×¤×•×œ)
  - × ×™×˜×•×¨ FPS ×©××§×¦×¨ ××©×š ×× ×™××¦×™×” ×‘×¢×ª ×¢×•××¡
  - ×›×¤×ª×•×¨ ğŸŒ€ ×œ×”×’×“×¨×•×ª ××”×™×¨×•×ª/××™× ×¨×¦×™×” (××•×¤×™×¢ ×‘××›×©×™×¨×™ Android ××• ×‘â€‘``smooth_debug=1``)

API ×œ×©×™××•×© ×§×œ×™×™× ×˜
------------------
- ×”×¤×¢×œ×”/×›×™×‘×•×™:

.. code-block:: js

   window.smoothScroll.enable();
   window.smoothScroll.disable();

- ×¢×“×›×•×Ÿ ×”×’×“×¨×•×ª ×‘×–××Ÿ ×¨×™×¦×”:

.. code-block:: js

   window.smoothScroll.updateConfig({
     duration: 300,              // ms
     easing: 'ease-out',         // 'linear' | 'ease-in' | 'ease-out' | 'ease-in-out'
     offset: 80,                 // px, ×œ××©×œ Sticky Header
     wheelSensitivity: 1.0,      // 0.1â€“3
     keyboardSensitivity: 1.5    // 0.5â€“3
   });

- ×’×œ×™×œ×” ×œ××œ×× ×˜/×¡×œ×§×˜×•×¨:

.. code-block:: js

   window.smoothScroll.smoothScrollTo('#section-2', {
     offset: 80,
     duration: 400,
     easing: 'ease-in-out'
   });

×©××™×¨×ª ×”×¢×“×¤×•×ª
-------------
- ×”×©××™×¨×” ××ª×‘×¦×¢×ª ×œâ€‘``localStorage`` ×ª×—×ª ``smoothScrollPrefs``.
- × ×™×¡×•×™ ×©×œ×™×—×” ×¢×“×™× ×” ×œ×©×¨×ª (×× ×§×™×™× API): ``POST /api/ui_prefs`` ×¢× ``{ smooth_scroll: {...} }``.
- ×›×™×©×œ×•×Ÿ ×©×¨×ª ××™× ×• ×—×•×¡× â€” ××™×Ÿ ×ª×œ×•×ª ×‘×‘×§×©×ª ×”â€‘POST.

×××©×§ ×”×’×“×¨×•×ª ××•×‘× ×”
------------------
- ×›×¤×ª×•×¨ ğŸŒ€ ×¦×£ (``#smoothScrollSettingsLauncher``) × ×—×©×£ ×‘××›×©×™×¨×™ Android ××• ×›××©×¨ ××•×¡×™×¤×™× ``smooth_debug=1`` ×œâ€‘URL.
- ×œ×—×™×¦×” ×¤×•×ª×—×ª ××•×“××œ RTL ×¢× ×”×˜×¤×¡×™× ×”×‘××™×:
  - Toggle ×”×¤×¢×œ×”/×›×™×‘×•×™
  - ×¡×œ×™×™×“×¨ ××©×š (150â€‘1200ms) + ×‘×—×™×¨×ª ``easing``
  - ×¨×’×™×©×•×ª ×’×œ×’×œ×ª/××§×œ×“×ª (0.5â€‘3x)
  - ×¡×œ×™×™×“×¨ ××™× ×¨×¦×™×” ×œ×× ×“×¨×•××™×“ (10â€‘60x)
  - ×›×¤×ª×•×¨×™ ×‘×“×™×§×”/××™×¤×•×¡/×©××™×¨×”
- × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”××•×“××œ ×’× ×™×“× ×™×ª ×“×¨×š ×”×§×•× ×¡×•×œ:

.. code-block:: js

   window.smoothScroll.openSettingsModal();

×”× ×—×™×•×ª ×œ×¡×•×›× ×™ AI
-----------------
- ×–×™×”×•×™ ××”×™×¨ ×©×œ ×–××™× ×•×ª:

.. code-block:: js

   const supported = Boolean(window.smoothScroll?.config?.enabled);

- ×”×™×× ×¢×• ×××–×™× ×™ ``wheel/touch`` ×›×¤×•×œ×™×: ×”××¢×¨×›×ª ×××–×™× ×” ×’×œ×•×‘×œ×™×ª ×›×‘×¨×™×¨×ª ××—×“×œ.
- ×›×‘×“×• × ×’×™×©×•×ª: ×× ``prefers-reduced-motion`` ×¤×¢×™×œ â€” ××œ ×ª×•×¡×™×¤×• ×× ×™××¦×™×•×ª ×™×“× ×™×•×ª.
- ×œ×›×•×•× ×•×Ÿ â€” ×”×©×ª××©×• ×‘â€‘``updateConfig`` ×•×œ× ×‘×›×ª×™×‘×” ×™×©×™×¨×” ×œâ€‘``localStorage``.
- ×©××¨×• ×¢×œ ×‘×™×¦×•×¢×™×: ××œ ×ª×•×¡×™×¤×• ×œ×•×œ××•×ª polling/``setInterval`` ×›×‘×“×•×ª; ×”×¢×“×™×¤×• ``requestAnimationFrame``.

×× ×“×¨×•××™×“ â€” ××” ×™×© ×•××” ×œ×
------------------------
×”×•×˜××¢×•:
- Passive touch listeners + ×“×’×™××ª ××”×™×¨×•×ª
- Momentum ×™×–×•× ×¢× ×‘×•×¡×˜×¨ ××™× ×¨×¦×™×” ×•×›×™×•×œ ``friction``/``threshold``
- ×”×ª×××•×ª Samsung Internet ×•â€‘overscroll (``android-optimized``)
- × ×™×˜×•×¨ FPS ×©××›×•×•× ×Ÿ ××©×š/×¢×§×•××ª ×× ×™××¦×™×”
- UI ××•×‘× ×” ×œ×§×‘×™×¢×ª ×¢×•×¦××ª ××™× ×¨×¦×™×” ×•××©×š

×œ× ×”×•×˜××¢×• (×™×™×¢×©×” ×‘×©×œ×‘×™× ×”×‘××™×):
- ××•×¤×˜×™××™×–×¦×™×•×ª WebView ××ª×§×“××•×ª (lazy, IntersectionObserver ××•×ª××)
- A/B test ×œ× ×™×”×•×œ ×¤×¨×•×¤×™×œ×™ ×‘×™×¦×•×¢×™× ×¡×¤×¦×™×¤×™×™× ×œ×“×¤×“×¤× ×™×

× ×’×™×©×•×ª ×•×‘×™×¦×•×¢×™×
----------------
- × ×’×™×©×•×ª:
  - ``prefers-reduced-motion: reduce`` ××‘×˜×œ/××§×¦×¨ ×× ×™××¦×™×”.
  - ×’×œ×™×œ×” ×œ×¢×•×’× ×™× ××›×‘×“×ª ``offset`` ×œ×›×•×ª×¨×•×ª ``sticky``.
- ×‘×™×¦×•×¢×™×:
  - Throttle ×œâ€‘``wheel`` ×¡×‘×™×‘ 16ms
  - ×©×™××•×© ×‘â€‘``requestAnimationFrame`` ×œ×›×œ ×”×× ×™××¦×™×•×ª
  - ×‘â€‘Android, ×§×™×¦×•×¨ ××©×š ×× ×™××¦×™×” ×× FPS ×™×¨×•×“

×¤×ª×¨×•×Ÿ ×ª×§×œ×•×ª
------------
- â€œ×’×œ×™×œ×” ×¢×“×™×™×Ÿ ×§×•×¤×¦×ª ×‘â€‘Samsungâ€:
  - × ×‘×“×§ UA ×œ×–×™×”×•×™ Samsung; ××•×•×“××™× ×©â€‘``document.documentElement.style.scrollBehavior = 'auto'`` ×”×•×¤×¢×œ.
- â€œ××™×Ÿ ×”×©×¤×¢×” ×œ×©×™× ×•×™ ×”×’×“×¨×•×ªâ€:
  - ×•×“××• ×©×”×§×¨×™××” ×”×™× ×“×¨×š ``updateConfig`` / ××•×“××œ ×”â€‘ğŸŒ€ ×•×©×§×™×™× ``window.smoothScroll``.
- â€œ××©×ª××© ×¢× Reduced Motion ×¢×“×™×™×Ÿ ×¨×•××” ×× ×™××¦×™×•×ªâ€:
  - ×‘×“×§×• ××ª ×”×¢×“×¤×ª ×”××¢×¨×›×ª (DevTools > Rendering > Emulate CSS prefers-reduced-motion).
- â€œ×× ×™ ×œ× ×‘×˜×•×— ×× ×”×¤×™×¦'×¨ ×¤×•×¢×œâ€:
  - ×”×•×¡×™×¤×• ×œâ€‘URL ××ª ×”×¤×¨××˜×¨ ``smooth_debug=1`` (×œ××©×œ ``/?smooth_debug=1`` ××• ``&smooth_debug=1``) ×›×“×™ ×œ×¤×ª×•×— ×—×œ×•× ×™×ª ×‘×“×™×§×”.
  - ×”×—×œ×•× ×™×ª ××¦×™×’×” ×× ×”×“×¤×“×¤×Ÿ ××¡××Ÿ ``prefers-reduced-motion``, ×× ×”×× ×’× ×•×Ÿ ×¤×¢×™×œ, ×•×××¤×©×¨×ª ×œ×”×¤×¢×™×œ/×œ×›×‘×•×ª ××• ×œ××—×•×§ ××ª ×”×”×¢×“×¤×” ×©× ×©××¨×” ×‘â€‘``localStorage``.

×ª×•×›× ×™×ª ×”××©×š (Roadmap ××§×•×¦×¨)
---------------------------
- CodeMirror: ×’×œ×™×œ×” ×—×œ×§×” ×‘×ª×•×š ×”×¢×•×¨×š ×•â€‘Jump to line
- TOC ×—×›×: ×©×™××•×© ×‘â€‘offset, Smart Scrolling, Active item
- × ×™×˜×•×¨ ××ª×§×“× (PerformanceObserver + Analytics)
- ××•×¤×˜×™××™×–×¦×™×•×ª WebView ×•â€‘Virtual Scrolling ×œ×¨×©×™××•×ª ××¨×•×›×•×ª

×§×™×©×•×¨×™× ×¤× ×™××™×™×
----------------
- ×§×•×“: ``webapp/static/js/smooth-scroll.js`` | ``webapp/static/css/smooth-scroll.css`` | ``webapp/templates/base.html``
- API: ``POST /api/ui_prefs`` (×¢×“×›×•×Ÿ ×”×¢×“×¤×•×ª UI, Bestâ€‘effort ×‘×œ×‘×“)

