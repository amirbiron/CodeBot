ספריית סניפטים (Web)
======================

מה זה?
------
"ספריית סניפטים" היא גלריית קטעי קוד קצרים עם הדגשת תחביר, חיפוש וסינון.
הספרייה מציגה גם סניפטים שהוגשו ע"י משתמשים (לאחר אישור אדמין), וגם סניפטים מובנים
(Curated) שמסופקים כחלק מהמערכת.

מאפייני UI
-----------
- רשימה מתקפלת: כל פריט מוצג ככותרת נפתחת (``<details>``/``<summary>``). לחיצה פותחת את הקוד.
- הדגשת תחביר: Highlight.js נטען דינמית ומדגיש קוד בעת פתיחת הפריט.
- קרדיט מחבר: מוצג "נוסף על ידי @username" (אם קיים) לצד השפה של הסניפט.

API – JSON
-----------
נתיב: ``GET /api/snippets``

פרמטרים:
- ``q`` – חיפוש חופשי בכותרת/תיאור/קוד (אופציונלי)
- ``language`` – סינון לפי שפה (אופציונלי)
- ``page`` – עמוד (ברירת מחדל: 1)
- ``per_page`` – גודל עמוד (ברירת מחדל: 30, מקסימום: 60)

תגובה (דוגמה):

.. code-block:: json

   {
     "ok": true,
     "items": [
       {
         "title": "זמן יחסי בעברית (TimeUtils.format_relative_time)",
         "description": "פורמט זמן יחסי בעברית (לפני X דקות/אתמול).",
         "code": "...",
         "language": "python",
         "username": "CodeBot",
         "approved_at": "2025-11-10T13:37:00+00:00"
       }
     ],
     "page": 1,
     "per_page": 30,
     "total": 42
   }

הערות:
- בעמוד הראשון ייתכנו סניפטים "מובנים" (curated) בנוסף לפריטי DB – המערך מאוחד ללא כפילויות לפי כותרת.
- השדה ``username`` (אם קיים) מוצג ב-UI עבור קרדיט.

הגשות, אישור וניהול (אדמין)
---------------------------
- תור ממתינים: ``/admin/snippets/pending`` – צפייה בהגשות ממתינות.
- צפייה בפריט: ``/admin/snippets/view?id=<id>`` – מציג קוד מלא + כפתורי "✏️ ערוך" ו"🗑️ מחק".
- עריכה: ``/admin/snippets/edit?id=<id>`` (GET/POST) – עדכון כותרת/תיאור/שפה/קוד.
- מחיקה: ``POST /admin/snippets/delete?id=<id>``.

הגשה דרך הבוט
--------------
- תפריט ראשי > "אוסף הקהילה" > "ספריית סניפטים" > "הוסף סניפט משלך".
- מסך פתיחה מציע שני מצבים: "🧩 קוד רגיל" ו"✍️ קוד ארוך".
- "קוד ארוך": ניתן לשלוח את הקוד במספר הודעות ולסיים ב־``/done`` (לאחר מכן ממשיכים כרגיל לבחירת כותרת/תיאור/שפה).
- ביטול: ``❌ ביטול`` או לחיצה על כל כפתור אחר – תבטל ותנקה מצב איסוף.

UI בבוט – הסרות ושיפורים
------------------------
- מתפריט "📚 הצג את כל הקבצים שלי" הוסרו קיצורי "אוסף הקהילה"/"הוסף מוצר משלך" (נמצאים כבר בתפריט הראשי).
- שמות כפתורים עודכנו: "ספריית סניפטים (web 🌐)" ו"ממשקי משתמשים (web 🌐)".
