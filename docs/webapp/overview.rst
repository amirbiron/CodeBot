המיני Web App (סקירה)
======================

מה נותן?
--------
 - **צפייה ועריכה** – תצוגת קוד עם הדגשת תחביר, עריכה עם CodeMirror
 - **ספריית סניפטים** – גלריית קטעי קוד קצרים עם חיפוש, סינון וקרדיט מחבר (:doc:`/webapp/snippet-library`)
 - **תצוגת Markdown מתקדמת** – GFM, Mermaid, KaTeX, Task Lists אינטראקטיביות
 - **ארגון מתקדם:**
   - סימניות (Bookmarks) – סימון נקודות חשובות בקוד
   - אוספים (Collections) – ארגון קבצים לפי נושאים
   - פתקים דביקים (Sticky Notes) – הערות ויזואליות על הקוד
   - מועדפים (Favorites)
 - **פעולות מרובות** – בחירה מרובה וביצוע פעולות על מספר קבצים
 - **שיתוף** – קישור ציבורי לשיתופים פנימיים (זמני או קבוע)
 - **עמודי סטטוס** – מעקב זמינות ותקינות

כתובת והרשאות
--------------
- כתובת הבסיס: מוגדרת דרך ``PUBLIC_BASE_URL``.
- הרשאות בסיסיות לקריאה; אין חשיפה של נתונים רגישים.

הגדרות ENV
-----------
- ``PUBLIC_BASE_URL`` – נדרש להצגת קישורי שיתוף ציבוריים.
- לאחר merge, האתר מתעדכן אוטומטית ב-Read the Docs (בהתאם לקונפיגורציה).

קישורים ותמונות מסך
--------------------
- דפי שיתוף: ``/share/<share_id>``.
- בעת קריאה ל-``POST /api/share/<file_id>`` ניתן לציין ``{"type": "permanent"}`` כדי לקבל קישור קבוע, או להשאיר ברירת מחדל לקישור זמני.
- מומלץ לצרף צילומי מסך של תצוגת קובץ ושיתוף.

ראו גם
------

- :doc:`/user/bookmarks`
- :doc:`/user/my_collections`
- :doc:`/user/sticky_notes`
- :doc:`/webapp/bulk-actions`
- :doc:`/webapp/editor`

באנר הכרזות בראש המסך
----------------------

ה-WebApp כולל באנר הכרזות קצר בראש העמוד (מחליף את "טיפ שבועי" הישן). כברירת מחדל הוא מוסתר ואינו מוצג למשתמשים, עד שמזריקים הודעה בפועל.

איך מפעילים?
^^^^^^^^^^^^

1. ודאו שהדגל ``WEEKLY_TIP_ENABLED`` (או ההגדרה השקולה בתצורת השרת) נשאר ``true`` – הוא משמש כמתג הכללי של הרכיב.
2. הזריקו ל-HTML, לפני הסקריפט הראשי בתבנית ``base.html`` או בבלוק ``extra_js`` ייעודי, אובייקט הכרזה:

   .. code-block:: html

      <script>
        window.__announcementEnabled = true;
        window.__announcements = [
          {
            id: 'release-2025-11-11',
            text: 'השקנו יכולת חיפוש חדשה! שווה לנסות אותה במסך הסימניות.',
            link: '/changelog#search-updates'
          }
        ];
      </script>

   - השדה ``id`` חייב להיות ייחודי (משמש למעקב וניקוי קאש מקומי אם נוסיף לוגיקה בהמשך).
   - ``text`` הוא הטקסט שיוצג בבאנר (קצר, ברור, עד ~120 תווים).
   - ``link`` אופציונלי; אם מוגדר, לחיצה על הבאנר תפתח את היעד (קישור פנימי מתחיל ב-``/``).

מה קורה מאחורי הקלעים?
^^^^^^^^^^^^^^^^^^^^^^

- אם הטבלה ``window.__announcements`` לא קיימת או ריקה, הבאנר נשאר מוסתר לחלוטין (`display:none`) – אין fallback קבוע.
- כאשר יש לפחות הודעה אחת, מוצגת רק הראשונה; ניתן לעדכן את המערך בזמן אמת (למשל, עבור קמפיינים מתוזמנים).
- כאשר יש קישור, הרכיב מקבל ``role="link"`` ותגובה ללחיצה/Enter/Space. בלי קישור הוא מוצג כ-``role="status"`` בלבד.
- ההנפשה נעשית ע"י שכפול הטקסט פעמיים במרקסה אנכית; הריחוף עוצר את הגלילה לשיפור נגישות.

כיבוי זמני
^^^^^^^^^^

- במידת הצורך ניתן לכבות את הבאנר לכל המשתמשים באמצעות קביעת ``WEEKLY_TIP_ENABLED=false`` (או דרך קובץ הקונפיג).
- משתמש קצה יכול להסיר את הבאנר מקומית (אם נרצה להחזיר פונקציית Snooze בעתיד) באמצעות ``localStorage.setItem('announcementBannerOff', '1')``; זה נתון לניהול שלנו, כרגע אין UI מובנה לנטרול ידני.

המלצות לתוכן
^^^^^^^^^^^^

- העדיפו הודעות קצרות וברורות בעברית, עם קריאה לפעולה.
- לטובת נגישות, מומלץ לספק גם יעד פנימי ב-``link`` עם פרטים מלאים (פוסט בבלוג/צ'אנג'לוג).
- בדקו תצוגה במובייל: מעל 2 שורות הטקסט יגלול לאט יותר; ניתן לעדכן את המחרוזת בהתאם.

