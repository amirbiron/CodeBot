# פקודות ChatOps

להלן מבנה אחיד לכל פקודה: מתי להשתמש, פרמטרים, הרשאות, מה לחפש בפלט, ודוגמה.

## /status
- מתי להשתמש: כשצריך תמונת מצב מהירה של השירות.
- פרמטרים: ללא (אופציונלי: `service=<name>`)
- הרשאות: כולם
- מה לחפש בפלט: מצב כללי (OK/DEGRADED), p95, וקצב שגיאות
- דוגמה:
```
/status
OK | p95: 320ms | errors: 0.2% | request_id: 2f3a...
```

## /errors
- מתי להשתמש: לקבלת שגיאות פעילות אחרונות.
- פרמטרים: אופציונלי `since=<minutes>`
- הרשאות: מנהלים בלבד
- מה לחפש בפלט: קוד/מסר שגיאה חוזרים, request_id

## /triage
- מתי להשתמש: תחקור מהיר של תקלה פעילה.
- פרמטרים: `request_id=<id>` אופציונלי
- הרשאות: מנהלים בלבד
- מה לחפש בפלט: סיבת שורש משוערת וצעדי המשך

## /predict
- מתי להשתמש: כשצריך תחזית אירועים/חריגות ב-3 שעות הקרובות.
- פרמטרים: ללא
- הרשאות: כולם
- מה לחפש בפלט: מגמת לטנציה/שגיאות (🔴/🟢/⚪) והתרעות צפויות

## /observe -v (מפורט)
- מתי להשתמש: כשצריך תמונת מצב מפורטת בזמן אמת.
- פרמטרים: אופציונליים `source=db|memory|all` (ברירת מחדל: all), `window=5m|1h|24h` (ברירת מחדל: 24h)
- הרשאות: מנהלים בלבד
- מה לחפש בפלט:
  - Uptime/Error Rate/Latency – כולל ציון מקור הנתונים (memory) והספים האדפטיביים
  - Alerts (DB) – סך הכל ו-Critical לפי חלון הזמן, עם ציון מקור
  - Alerts (Memory) – ספירה מה-buffer הפנימי והשוואה ל-Dispatch Log לצורך de-dup
  - Recent Errors – רשימה קצרה של שגיאות אחרונות (מזיכרון)
  - Cooling & Health – מצב cooldown להתראות ומצב משלוח ל-sinks (Telegram/Grafana)
- דוגמאות:
```
/observe -v window=5m source=all
/observe -v source=memory
```

## /observe -vv (מפורט מאוד)
- מתי להשתמש: כשצריך לזהות מזהי התראות אחרונות מה-DB לצורך מעקב/חקירה.
- פרמטרים: כמו `-v`.
- הרשאות: מנהלים בלבד
- מה לחפש בפלט: בנוסף לכל הנ"ל, יוצגו N=10 מזהי התראות אחרונות מה-DB.
- דוגמה:
```
/observe -vv source=db
```

## /rate_limit
- מתי להשתמש: בדיקת ועידכון מגבלות קצב.
- פרמטרים: ללא
- הרשאות: מנהלים בלבד
- מה לחפש בפלט: מצב נוכחי והמלצות דילול
