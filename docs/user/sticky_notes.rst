פתקים דביקים (Sticky Notes)
=============================

מהם פתקים דביקים?
-------------------
פתקים דביקים מאפשרים להצמיד הערות קצרות ומודגשות על‑גבי תצוגת קובץ (קוד/Markdown/HTML),
כך שאפשר לסמן נקודות חשובות, משימות או תזכורות ישירות במקום הרלוונטי בתוכן.
הפתק "ננעל" לעוגן יציב כאשר ניתן (כותרת ב‑Markdown או ``id`` ב‑HTML) או לחלופין למיקום קואורדינטות/שורה בקוד.

איך מוסיפים ומנהלים פתקים
---------------------------

.. list-table::
   :header-rows: 1
   :widths: 26 42 32

   * - פעולה
     - איך עושים
     - הערות
   * - הוספת פתק
     - לחיצה על כפתור הפתקים בתצוגת הקובץ ואז לחיצה בנקודה הרצויה
     - מומלץ להצמיד לעוגנים יציבים (כותרת/``id``) כשאפשר, לשמירה לאחר עריכות
   * - עריכת תוכן/צבע
     - קליק על פתק קיים ועריכת השדה/בחירת צבע מהתפריט
     - צבעים עוזרים לסיווג מהיר (למשל ירוק=בוצע, אדום=דחוף)
   * - הזזה/מיקום מחדש
     - גרירה קצרה של הפתק למיקום חדש בתצוגה
     - אם הפתק מעוגן לעוגן יציב – ההצמדה תישמר, והמיקום החזותי יעדכן
   * - מחיקה
     - בחירה ב"מחק" בתפריט הפתק
     - המחיקה מיידית ובלתי הפיכה

עיגון יציב לעומת מיקום קבוע
-----------------------------
- עיגון יציב: אם יש כותרת Markdown או אלמנט HTML עם ``id`` – הפתק נצמד לעוגן וכך נשמר גם לאחר עריכות.
- מיקום קבוע: בקבצי קוד, כאשר אין עוגן יציב, הפתק נשמר לפי שורה/קואורדינטות; שינויי טקסט גדולים עלולים לשנות את המיקום היחסי.

שילוב עם סימניות
-----------------
פתקים דביקים משלימים את הסימניות:

- הסימניות מתאימות לניווט מהיר לנקודות חשובות בקובץ.
- הפתקים מתאימים להוספת טקסט חופשי/הנחיות/תזכורות ויזואליות על התוכן עצמו.

מגבלות, פרטיות ואבטחה
-----------------------
- מגבלות שימוש: עד 200 פתקים לקובץ ועד 1000 פתקים לכל משתמש.
- פרטיות: פתקים נשמרים לחשבון המשתמש בלבד, ואינם מוצגים לאחרים כברירת מחדל.
- אבטחה:
  - אין הרצת JavaScript מקוד פתקים.
  - בקבצי HTML, התצוגה נעשית בתוך ``sandbox`` לצורך בידוד.

טיפים שימושיים
---------------
- העדיפו עוגנים יציבים כדי לשמר דיוק גם לאחר עריכות.
- הגדירו קוד צבעים עקבי כדי לזהות משימות/סטטוסים במבט אחד.
- נצלו פתקים לביקורת קוד עצמית ולמעקב משימות נקודתי בתוך קבצים גדולים.

API קצר (למפתחים)
------------------
ה‑API עשוי לכלול פעולות כגון יצירה/עדכון/מחיקה/שליפה של פתקים לפי מזהי קובץ ועוגן/מיקום. המימוש עשוי להשתנות בין גרסאות;
ראו את עמוד ה‑API הרלוונטי אם פורסם, או עיינו בקוד `webapp/sticky_notes_api.py` לצרכי רפרנס.

התראות ותזכורות (Reminders)
----------------------------

המערכת כוללת תזכורות לפתקי Sticky והודעת מצב קבועה (Persistent UI):

- **בועת התראה עם מונה**: כאשר יש פתקים ממתינים, תופיע בועה כתומה בולטת עם מונה.
  - **מיקום**: במובייל מעל כפתור תפריט ההמבורגר; בדסקטופ/טאבלט מעל קישור ההגדרות.
- **לחיצה על הבועה פותחת Pop‑up** ולא מנווטת מיד. ה‑Pop‑up מציג שורה קצרה (עד 6 מילים) מכל פתק ממתין.
  - לחיצה על פריט ברשימה תוביל ישירות ל‑anchor של הפתק בתוך תצוגת ה‑Markdown המרונדרת (`/md/<file_id>`).
  - כפתורים: ``סגור`` (סוגר ומבטל את הבועה כעת), ``דחה לאחר"כ`` (סוגר את החלונית ומשאיר את הבועה גלויה).
- **קביעת תזכורת לפתק**: בתוך פתק, לחצו על האייקון 🔔 כדי לפתוח חלון תזמון הכולל קיצורי זמן (עוד שעה/3 שעות/היום 21:00/מחר 9:00/24 שעות/שבוע) או בחירה ידנית ``datetime-local``.

.. note::
   קיצורי הפקודות בסגנון ``/remind`` (למשל ``/remind 1``, ``/remind 21:00``) עדיין **לא נתמכים** בגרסה זו, והם יתווספו בהמשך. בינתיים השתמשו בחלון התזכורת (🔔) לקביעת זמן.

איורים
~~~~~~

.. figure:: /_static/sticky-notes-badge.svg
   :alt: בועת התראה עם מונה מעל הגדרות/תפריט
   :width: 520px
   :align: center

   בועה משודרגת עם מונה (דסקטופ)

.. figure:: /_static/sticky-notes-popup.svg
   :alt: חלון Pop-up לתזכורות עם רשימת פתקים וכפתורי פעולה
   :width: 540px
   :align: center

   Pop‑up בלחיצה על הבועה: רשימת פתקים וכפתורי "סגור"/"דחה לאחר"כ"

.. figure:: /_static/sticky-notes-anchor.svg
   :alt: ניווט לעוגן פתק בתצוגת Markdown
   :width: 540px
   :align: center

   ניווט לעוגן בתצוגת ה‑Markdown המרונדרת (‏/md/<file_id>)

Troubleshooting קצר
-------------------
- פתק "זז" לאחר עריכות גדולות בקוד: העדיפו להצמיד לעוגן יציב במקום לשורה גולמית.
- פתק לא נשמר: ודאו שיש הרשאות וששמורו בוצע בהצלחה (הודעת אישור בתצוגה).
- בעיות בתצוגת HTML: ודאו שפתקים מוצגים במסגרת ה‑``sandbox`` ולא נחסמים על‑ידי הדפדפן.

בעיות נפוצות בתזכורות
~~~~~~~~~~~~~~~~~~~~~~~
- איני רואה את הבועה: ודאו שקיימות תזכורות שעבר זמנן (ה‑UI מציג רק פריטים שמועד התזכורת שלהם הגיע). נסו לרענן את הדף.
- לחיצה על פריט ב‑Pop‑up הובילה לתצוגת קוד: ודאו שאתם ניגשים ל‑``/md/<file_id>`` (תצוגת Markdown). המערכת אמורה לנתב לשם אוטומטית.
