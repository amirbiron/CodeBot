# ðŸ“ Type Hints â€“ Best Practices

×ž×˜×¨×”: ×œ×©×ž×¨ ×‘×˜×™×—×•×ª ×˜×™×¤×•×¡×™× ×‘×¨×•×¨×”, ×œ×”×§×©×™×— ×ž×•×“×•×œ×™× ×‘×”×“×¨×’×”, ×•×œ× ×œ×”×¡×ª×ž×š ×¢×œ `type: ignore`.

---

## ××¡×˜×¨×˜×’×™×”: ×”×§×©×—×” ×”×“×¨×’×ª×™×ª
- ×”×ª×—×™×œ×• ×ž×ž×•×“×•×œ×™× ×ž×¨×›×–×™×™× (DB, Web) ×•×”×•×¡×™×¤×• ×˜×™×¤×•×¡×™× ×‘×¨×•×¨×™× ×œ×¤×•× ×§×¦×™×•×ª ×¦×™×‘×•×¨×™×•×ª.
- ×˜×¤×œ×• ×‘××–×”×¨×•×ª MyPy × ×§×•×“×ª×™×ª ×‘×ž×§×•× `type: ignore` ×’×•×¨×£.

---

## ×¤×¨×•×˜×•×§×•×œ×™× ×•×¡×˜××‘×™×
- ×œ×¤×¨×™×˜×™× ×ž×ž×©×§×™Ö¾×”×¤×¢×œ×” (×œ×ž×©×œ ××•×¡×£ Mongo) â€“ ×”×’×“×™×¨×• `Protocol` ×›×“×™ ×œ××¤×©×¨ ×”×—×œ×¤×”/×ž×•×§×™× ×’ ×‘×˜×¡×˜×™×.

```python
from typing import Protocol, Any, Optional

class CollectionLike(Protocol):
    def find_one(self, query: dict[str, Any]) -> Optional[dict[str, Any]]: ...
    def insert_one(self, doc: dict[str, Any]) -> Any: ...
```

- ×¢×‘×•×¨ `ObjectId`/BSON â€“ ×”×™×ž× ×¢×• ×ž×ª×œ×•×ª ×§×©×”; ×”×¢×“×™×¤×• ×˜×™×¤×•×¡×™× ×›×œ×œ×™×™× ×¢× ×•×œ×™×“×¦×™×” ×‘×§×•×“.

×“×•×’×ž××•×ª ×ž×”×§×•×“
--------------
- ×‘×¤×¨×•×™×§×˜ ×§×™×™×ž×™× ×¤×¨×•×˜×•×§×•×œ×™× ×•×ž×ž×©×§×™ ×’×™×©×” ×¢×§×‘×™×™× ×‘×ž×•×“×•×œ×™× DB, ×œ×ž×©×œ ×‘â€‘``database/manager.py`` × ×©×¢× ×™× ×¢×œ ×—×ª×™×ž×•×ª ×‘×¨×•×¨×•×ª
  ×œ××™× ×“×§×¡×™× ×•×œ×¤×¢×•×œ×•×ª CRUD. ×”×”×§×©×—×” ×”×”×“×¨×’×ª×™×ª ×ž×©×ž×¨×ª ×ª××™×ž×•×ª ×˜×¡×˜×™×.

×”×’×“×¨×•×ª MyPy
------------
- ×”×§×•×‘×¥ ``mypy.ini`` ×ž×—×ž×™×¨ ×ž×•×“×•×œ×™× ×ž×¡×•×™×ž×™× (×œ×ž×©×œ ``services.code_service``) ×•×ž××¤×©×¨ ×”×—×ž×¨×” ×”×“×¨×’×ª×™×ª.
- ×ž×•×ž×œ×¥ ×œ×”×•×¡×™×£ ×ž×•×“×•×œ×™× ×¢× ``disallow_untyped_defs = True`` ×‘×”×“×¨×’×”, ×•×‘×ž×§×‘×™×œ ×œ×¦×ž×¦× ``ignore_missing_imports`` ×›××©×¨ ××¤×©×¨.

×ž×¡×œ×•×œ ×ž×™×’×¨×¦×™×”
--------------
1. ×”×•×¡×™×¤×• ×˜×™×¤×•×¡×™× ×œ×¤×•× ×§×¦×™×•×ª ×¦×™×‘×•×¨×™×•×ª.
2. ×¤×™×¨×§×• ×‘×™×˜×•×™×™× ×ž×•×¨×›×‘×™× ×œ×ž×©×ª× ×™× ×ž×ª×•Ö¼×’×™×.
3. ×”×—×œ×™×¤×• ``Any`` ×‘×˜×™×¤×•×¡×™× ×ž×“×•×™×§×™× ×™×•×ª×¨ ×›××©×¨ ×™×© ××™× ×•×•××¨×™×× ×˜ ×‘×¨×•×¨.

---

## ×”× ×—×™×•×ª ×œ×¡×•×›× ×™×
- ××œ ×ª×©× ×• ×—×ª×™×ž×•×ª ×§×™×™×ž×•×ª ×œ×œ× ×¦×•×¨×š (×©×‘×¨ ×ª××™×ž×•×ª).
- ×”×™×ž× ×¢×• ×ž-`type: ignore`; ×‘×ž×§×•× ×–×”:
  - ×¤×™×¨×•×§ ×‘×™×˜×•×™×™× ×ž×•×¨×›×‘×™× ×œ×ž×©×ª× ×™× ×ž×ª×•Ö¼×’×™×
  - ×©×™×ž×•×© ×‘-`cast` ×ž×ž×•×§×“ ×¨×§ ×›×©×™×© ××™× ×•×•××¨×™×× ×˜ ×‘×¨×•×¨
- ×”×©×ª×ž×©×• ×‘-`Optional[T]` ×›×©×¢×¨×š ×¢×œ×•×œ ×œ×”×™×•×ª `None`.
- `typing.Any` â€“ ×©×™×ž×•×© ×ž×‘×•×§×¨ ×‘×œ×‘×“, ×›× ×§×•×“×ª ×§×¦×” API ××• ×¦×“ ×©×œ×™×©×™.

---

## ×“×•×’×ž××•×ª ×§×¦×¨×•×ª

```python
from typing import Optional

def get_username(user_id: int) -> Optional[str]:
    user = repo.get(user_id)
    return user["name"] if user else None
```

```python
from typing import cast

value: object = get_value()
config = cast(dict[str, str], value)  # ×™×“×•×¢ ×ž×ž×§×•×¨ ×”×¤×•× ×§×¦×™×”
```
